(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"+1Xl":function(e,t,r){"use strict";r("pS08"),r("LagC"),r("q8oJ"),r("C9fy"),r("nWfQ"),r("ELYx"),r("+ar0"),r("xtjI"),r("JHok"),r("OeI1"),r("rzGZ"),r("Dq+y"),r("8npG"),r("Ggvi"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.MeasureAreaMode=void 0;var n=a(r("O3R+")),o=a(r("sS7t")),i=r("JeLm");function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,r){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function d(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=[],b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(b,e);var t,r,i,a,u=(t=b,function(){var e,r=h(t);if(y()){var n=h(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return d(this,e)});function b(){return f(this,b),u.apply(this,arguments)}return r=b,(i=[{key:"handleClick",value:function(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{onEdit:function(){}});p(h(b.prototype),"handleClick",this).call(this,e,r)}},{key:"getTooltips",value:function(e){var t=this.getTentativeGuide(e);if(t&&"Polygon"===t.geometry.type){var r,i=e.modeConfig||{},a=i.formatTooltip,u=i.measurementCallback,c=(0,o.default)(t),l=(0,n.default)(t);return r=a?a(l):"".concat(parseFloat(l).toFixed(2)," ").concat("sq. m"),u&&u(l),[{position:c.geometry.coordinates,text:r}]}return v}}])&&s(r.prototype,i),a&&s(r,a),b}(i.DrawPolygonMode);t.MeasureAreaMode=b},"+aqe":function(e,t,r){"use strict";var n;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r("pS08"),r("LagC"),r("q8oJ"),r("C9fy"),r("8npG"),r("nWfQ"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(n,e);var t,r=(t=n,function(){var e,r=l(t);if(c()){var n=l(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)});function n(){var e;i(this,n);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return s(u(e=r.call.apply(r,[this].concat(o))),"handleStartDragging",(function(t,r){e.getTentativeFeature()||e._initTentativeFeature(t,r)})),s(u(e),"handleStopDragging",(function(t,r){e.getTentativeFeature()&&e._commitTentativeFeature(t,r)})),s(u(e),"handlePan",(function(t,r){e.getTentativeFeature()&&t.sourceEvent.stopImmediatePropagation()})),e}return n}(((n=r("Txtv"))&&n.__esModule?n:{default:n}).default);t.default=p},"+mSJ":function(e,t,r){"use strict";r("U6Bt"),r("JHok"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0});var n=r("/rf6"),o=r("AKIq"),i=r("cWyK");t.default=function(e){if(!e)throw new Error("geojson is required");var t=[];return i.flattenEach(e,(function(e){!function(e,t){var r=[],i=e.geometry;if(null!==i){switch(i.type){case"Polygon":r=o.getCoords(i);break;case"LineString":r=[o.getCoords(i)]}r.forEach((function(r){(function(e,t){var r=[];return e.reduce((function(e,o){var i,a,u,c,l,f,s=n.lineString([e,o],t);return s.bbox=(a=o,u=(i=e)[0],c=i[1],l=a[0],f=a[1],[u<l?u:l,c<f?c:f,u>l?u:l,c>f?c:f]),r.push(s),o})),r})(r,e.properties).forEach((function(e){e.id=t.length,t.push(e)}))}))}}(e,t)})),n.featureCollection(t)}},"1I81":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return F})),r.d(t,"WebMercatorViewport",(function(){return F})),r.d(t,"fitBounds",(function(){return A})),r.d(t,"normalizeViewportProps",(function(){return N})),r.d(t,"flyToViewport",(function(){return q})),r.d(t,"getFlyToDuration",(function(){return Y})),r.d(t,"lngLatToWorld",(function(){return _})),r.d(t,"worldToLngLat",(function(){return S})),r.d(t,"worldToPixels",(function(){return D})),r.d(t,"pixelsToWorld",(function(){return k})),r.d(t,"zoomToScale",(function(){return w})),r.d(t,"scaleToZoom",(function(){return O})),r.d(t,"getMeterZoom",(function(){return M})),r.d(t,"getDistanceScales",(function(){return j})),r.d(t,"addMetersToLngLat",(function(){return T})),r.d(t,"getViewMatrix",(function(){return x})),r.d(t,"getProjectionMatrix",(function(){return R})),r.d(t,"getProjectionParameters",(function(){return C}));r("E5k/"),r("DrhF");var n=r("QDMQ"),o=r("ls4f"),i=r("L6So"),a=r("Ccfo"),u=r("uRdJ"),c=r("x364"),l=(r("YBKJ"),r("9ZhD"),r("n7j8"),r("8j0Q")),f=r("bl9R");function s(e,t){var r=f.b([],t,e);return f.a(r,r,1/r[3]),r}function p(e,t){var r=e%t;return r<0?t+r:r}function d(e,t,r){return r*t+(1-r)*e}r("QNMc");var y=r("ZaHm"),h=r("ZxFD"),g=r("n+fv");function v(e,t){if(!e)throw new Error(t||"@math.gl/web-mercator: assertion failed.")}var b=Math.PI,m=b/4,E=b/180,P=180/b;function w(e){return Math.pow(2,e)}function O(e){return Math.log2(e)}function _(e){var t=Object(l.a)(e,2),r=t[0],n=t[1];v(Number.isFinite(r)),v(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");var o=n*E;return[512*(r*E+b)/(2*b),512*(b+Math.log(Math.tan(m+.5*o)))/(2*b)]}function S(e){var t=Object(l.a)(e,2),r=t[0],n=t[1],o=r/512*(2*b)-b,i=2*(Math.atan(Math.exp(n/512*(2*b)-b))-m);return[o*P,i*P]}function M(e){var t=e.latitude;return v(Number.isFinite(t)),O(4003e4*Math.cos(t*E))-9}function j(e){var t=e.latitude,r=e.longitude,n=e.highPrecision,o=void 0!==n&&n;v(Number.isFinite(t)&&Number.isFinite(r));var i={},a=Math.cos(t*E),u=512/360/a,c=512/4003e4/a;if(i.unitsPerMeter=[c,c,c],i.metersPerUnit=[1/c,1/c,1/c],i.unitsPerDegree=[512/360,u,c],i.degreesPerUnit=[.703125,1/u,1/c],o){var l=E*Math.tan(t*E)/a,f=512/360*l/2,s=512/4003e4*l,p=s/u*c;i.unitsPerDegree2=[0,f,s],i.unitsPerMeter2=[p,0,p]}return i}function T(e,t){var r=Object(l.a)(e,3),n=r[0],o=r[1],i=r[2],a=Object(l.a)(t,3),u=a[0],c=a[1],f=a[2],s=j({longitude:n,latitude:o,highPrecision:!0}),p=s.unitsPerMeter,d=s.unitsPerMeter2,y=_(e);y[0]+=u*(p[0]+d[0]*c),y[1]+=c*(p[1]+d[1]*c);var h=S(y),g=(i||0)+(f||0);return Number.isFinite(i)||Number.isFinite(f)?[h[0],h[1],g]:h}function x(e){var t=e.height,r=e.pitch,n=e.bearing,o=e.altitude,i=e.scale,a=e.center,u=void 0===a?null:a,c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return y.h(c,c,[0,0,-o]),y.e(c,c,-r*E),y.f(c,c,n*E),i/=t,y.g(c,c,[i,i,i]),u&&y.h(c,c,g.a([],u)),c}function C(e){var t=e.width,r=e.height,n=e.altitude,o=void 0===n?1.5:n,i=e.pitch,a=void 0===i?0:i,u=e.nearZMultiplier,c=void 0===u?1:u,l=e.farZMultiplier,f=void 0===l?1:l,s=a*E,p=Math.atan(.5/o),d=Math.sin(p)*o/Math.sin(Math.min(Math.max(Math.PI/2-s-p,.01),Math.PI-.01));return{fov:2*p,aspect:t/r,focalDistance:o,near:c,far:(Math.sin(s)*d+o)*f}}function R(e){var t=e.width,r=e.height,n=e.pitch,o=C({width:t,height:r,altitude:e.altitude,pitch:n,nearZMultiplier:e.nearZMultiplier,farZMultiplier:e.farZMultiplier}),i=o.fov,a=o.aspect,u=o.near,c=o.far;return y.d([],i,a,u,c)}function D(e,t){var r=Object(l.a)(e,3),n=r[0],o=r[1],i=r[2],a=void 0===i?0:i;return v(Number.isFinite(n)&&Number.isFinite(o)&&Number.isFinite(a)),s(t,[n,o,a,1])}function k(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=Object(l.a)(e,3),o=n[0],i=n[1],a=n[2];if(v(Number.isFinite(o)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(a)){var u=s(t,[o,i,a,1]);return u}var c=s(t,[o,i,0,1]),f=s(t,[o,i,1,1]),p=c[2],d=f[2],y=p===d?0:((r||0)-p)/(d-p);return h.c([],c,f,y)}var I=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function A(e){var t=e.width,r=e.height,n=e.bounds,o=e.minExtent,i=void 0===o?0:o,a=e.maxZoom,u=void 0===a?24:a,c=e.padding,f=void 0===c?0:c,s=e.offset,p=void 0===s?[0,0]:s,d=Object(l.a)(n,2),y=Object(l.a)(d[0],2),h=y[0],g=y[1],b=Object(l.a)(d[1],2),m=b[0],E=b[1];if(Number.isFinite(f)){f={top:f,bottom:f,left:f,right:f}}else v(Number.isFinite(f.top)&&Number.isFinite(f.bottom)&&Number.isFinite(f.left)&&Number.isFinite(f.right));var P=new F({width:t,height:r,longitude:0,latitude:0,zoom:0}),w=P.project([h,E]),O=P.project([m,g]),_=[Math.max(Math.abs(O[0]-w[0]),i),Math.max(Math.abs(O[1]-w[1]),i)],S=[t-f.left-f.right-2*Math.abs(p[0]),r-f.top-f.bottom-2*Math.abs(p[1])];v(S[0]>0&&S[1]>0);var M=S[0]/_[0],j=S[1]/_[1],T=(f.right-f.left)/2/M,x=(f.bottom-f.top)/2/j,C=[(O[0]+w[0])/2+T,(O[1]+w[1])/2+x],R=P.unproject(C),D=Math.min(u,P.zoom+Math.log2(Math.abs(Math.min(M,j))));return v(Number.isFinite(D)),{longitude:R[0],latitude:R[1],zoom:D}}var F=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.width,c=r.height,l=r.latitude,f=void 0===l?0:l,s=r.longitude,p=void 0===s?0:s,d=r.zoom,y=void 0===d?0:d,h=r.pitch,g=void 0===h?0:h,v=r.bearing,b=void 0===v?0:v,m=r.altitude,E=void 0===m?1.5:m,P=r.nearZMultiplier,O=void 0===P?.02:P,S=r.farZMultiplier,M=void 0===S?1.01:S;Object(n.a)(this,t),o=o||1,c=c||1;var T=w(y);E=Math.max(.75,E);var C=_([p,f]);C[2]=0;var D=R({width:o,height:c,pitch:g,bearing:b,altitude:E,nearZMultiplier:O,farZMultiplier:M}),k=x({height:c,scale:T,center:C,pitch:g,bearing:b,altitude:E});return(e=Object(i.a)(this,Object(a.a)(t).call(this,{width:o,height:c,scale:T,viewMatrix:k,projectionMatrix:D}))).latitude=f,e.longitude=p,e.zoom=y,e.pitch=g,e.bearing=b,e.altitude=E,e.center=C,e.unitsPerMeter=j(Object(u.a)(e)).unitsPerMeter[2],Object.freeze(Object(u.a)(e)),e}return Object(c.a)(t,e),Object(o.a)(t,[{key:"projectFlat",value:function(e){return _(e)}},{key:"unprojectFlat",value:function(e){return S(e)}},{key:"getMapCenterByLngLatPosition",value:function(e){var t=e.lngLat,r=k(e.pos,this.pixelUnprojectionMatrix),n=_(t),o=h.a([],n,h.d([],r));return S(h.a([],this.center,o),this.scale)}},{key:"getLocationAtPoint",value:function(e){var t=e.lngLat,r=e.pos;return this.getMapCenterByLngLatPosition({lngLat:t,pos:r})}},{key:"fitBounds",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.width,o=this.height,i=A(Object.assign({width:n,height:o,bounds:e},r)),a=i.longitude,u=i.latitude,c=i.zoom;return new t({width:n,height:o,longitude:a,latitude:u,zoom:c})}}]),t}(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.width,o=t.height,i=t.scale,a=t.viewMatrix,u=void 0===a?I:a,c=t.projectionMatrix,l=void 0===c?I:c;Object(n.a)(this,e),this.width=r||1,this.height=o||1,this.scale=i,this.unitsPerMeter=1,this.viewMatrix=u,this.projectionMatrix=l;var f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];y.c(f,f,this.projectionMatrix),y.c(f,f,this.viewMatrix),this.viewProjectionMatrix=f;var s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];y.g(s,s,[this.width/2,-this.height/2,1]),y.h(s,s,[1,-1,0]),y.c(s,s,this.viewProjectionMatrix);var p=y.b([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],s);if(!p)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=s,this.pixelUnprojectionMatrix=p,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Object(o.a)(e,[{key:"equals",value:function(t){return t instanceof e&&(t.width===this.width&&t.height===this.height&&y.a(t.projectionMatrix,this.projectionMatrix)&&y.a(t.viewMatrix,this.viewMatrix))}},{key:"project",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.topLeft,n=void 0===r||r,o=this.projectPosition(e),i=D(o,this.pixelProjectionMatrix),a=Object(l.a)(i,2),u=a[0],c=a[1],f=n?c:this.height-c;return 2===e.length?[u,f]:[u,f,i[2]]}},{key:"unproject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.topLeft,n=void 0===r||r,o=t.targetZ,i=Object(l.a)(e,3),a=i[0],u=i[1],c=i[2],f=n?u:this.height-u,s=o&&o*this.unitsPerMeter,p=k([a,f,c],this.pixelUnprojectionMatrix,s),d=this.unprojectPosition(p),y=Object(l.a)(d,3),h=y[0],g=y[1],v=y[2];return Number.isFinite(c)?[h,g,v]:Number.isFinite(o)?[h,g,o]:[h,g]}},{key:"projectPosition",value:function(e){var t=this.projectFlat(e),r=Object(l.a)(t,2);return[r[0],r[1],(e[2]||0)*this.unitsPerMeter]}},{key:"unprojectPosition",value:function(e){var t=this.unprojectFlat(e),r=Object(l.a)(t,2);return[r[0],r[1],(e[2]||0)/this.unitsPerMeter]}},{key:"projectFlat",value:function(e){arguments.length>1&&void 0!==arguments[1]||this.scale;return e}},{key:"unprojectFlat",value:function(e){arguments.length>1&&void 0!==arguments[1]||this.scale;return e}}]),e}());function N(e){var t=e.width,r=e.height,n=e.longitude,o=e.latitude,i=e.zoom,a=e.pitch,u=void 0===a?0:a,c=e.bearing,l=void 0===c?0:c;(n<-180||n>180)&&(n=p(n+180,360)-180),(l<-180||l>180)&&(l=p(l+180,360)-180);var f=new F({width:t,height:r,longitude:n,latitude:o,zoom:i}),s=f.project([n,85.05113])[1],d=f.project([n,-85.05113])[1],y=0;return d-s<r&&(i+=Math.log2(r/(d-s)),s=(f=new F({width:t,height:r,longitude:n,latitude:o,zoom:i})).project([n,85.05113])[1],d=f.project([n,-85.05113])[1]),s>0?y=s:d<r&&(y=d-r),y&&(o=f.unproject([t/2,r/2+y])[1]),{width:t,height:r,longitude:n,latitude:o,zoom:i,pitch:u,bearing:l}}r("xclO"),r("BK7i"),r("1RH0"),r("m210"),r("4DPX"),r("rzGZ");var G=["longitude","latitude","zoom"],L={curve:1.414,speed:1.2};function q(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o={},i=H(e,t,n),a=i.startZoom,u=i.startCenterXY,c=i.uDelta,l=i.w0,f=i.u1,s=i.S,p=i.rho,y=i.rho2,g=i.r0;if(f<.01){var v=!0,b=!1,m=void 0;try{for(var E,P=G[Symbol.iterator]();!(v=(E=P.next()).done);v=!0){var w=E.value,_=e[w],M=t[w];o[w]=d(_,M,r)}}catch(I){b=!0,m=I}finally{try{v||null==P.return||P.return()}finally{if(b)throw m}}return o}var j=r*s,T=Math.cosh(g)/Math.cosh(g+p*j),x=l*((Math.cosh(g)*Math.tanh(g+p*j)-Math.sinh(g))/y)/f,C=1/T,R=a+O(C),D=h.e([],c,x);h.a(D,D,u);var k=S(D);return o.longitude=k[0],o.latitude=k[1],o.zoom=R,o}function Y(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n=Object.assign({},L,n),i=o.screenSpeed,a=o.speed,u=o.maxDuration,c=H(e,t,n),l=c.S,f=c.rho,s=1e3*l;return r=Number.isFinite(i)?s/(i/f):s/a,Number.isFinite(u)&&r>u?0:r}function H(e,t,r){var n=(r=Object.assign({},L,r)).curve,o=e.zoom,i=[e.longitude,e.latitude],a=w(o),u=t.zoom,c=[t.longitude,t.latitude],l=w(u-o),f=_(i),s=_(c),p=h.f([],s,f),d=Math.max(e.width,e.height),y=d/l,g=h.b(p)*a,v=Math.max(g,.01),b=n*n,m=(y*y-d*d+b*b*v*v)/(2*d*b*v),E=(y*y-d*d-b*b*v*v)/(2*y*b*v),P=Math.log(Math.sqrt(m*m+1)-m),O=Math.log(Math.sqrt(E*E+1)-E);return{startZoom:o,startCenterXY:f,uDelta:p,w0:d,u1:g,S:(O-P)/n,rho:n,rho2:b,r0:P,r1:O}}},"1Y5v":function(e,t,r){"use strict";var n,o,i,a,u,c;r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.EDIT_TYPE=t.ELEMENT_TYPE=t.GUIDE_TYPE=t.RENDER_STATE=t.RENDER_TYPE=t.GEOJSON_TYPE=void 0,t.GEOJSON_TYPE=n,function(e){e.POINT="Point",e.LINE_STRING="LineString",e.POLYGON="Polygon"}(n||(t.GEOJSON_TYPE=n={})),t.RENDER_TYPE=o,function(e){e.POINT="Point",e.LINE_STRING="LineString",e.POLYGON="Polygon",e.RECTANGLE="Rectangle"}(o||(t.RENDER_TYPE=o={})),t.RENDER_STATE=i,function(e){e.INACTIVE="INACTIVE",e.UNCOMMITTED="UNCOMMITTED",e.SELECTED="SELECTED",e.HOVERED="HOVERED",e.CLOSING="CLOSING"}(i||(t.RENDER_STATE=i={})),t.GUIDE_TYPE=a,function(e){e.TENTATIVE="tentative",e.EDIT_HANDLE="editHandle",e.CURSOR_EDIT_HANDLE="cursorEditHandle"}(a||(t.GUIDE_TYPE=a={})),t.ELEMENT_TYPE=u,function(e){e.FEATURE="feature",e.FILL="fill",e.SEGMENT="segment",e.EDIT_HANDLE="editHandle"}(u||(t.ELEMENT_TYPE=u={})),t.EDIT_TYPE=c,function(e){e.ADD_FEATURE="addFeature",e.ADD_POSITION="addPosition",e.REMOVE_POSITION="removePosition",e.MOVE_POSITION="movePosition",e.FINISH_MOVE_POSITION="finishMovePosition"}(c||(t.EDIT_TYPE=c={}))},"3dFB":function(e,t,r){"use strict";r("AqHK"),r("pS08"),r("LagC"),r("nWfQ"),r("MIFh"),r("rzGZ"),r("YbXK"),r("cFtU"),r("pJf4"),r("q8oJ"),r("C9fy"),r("8npG"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.DrawLineStringMode=void 0;var n=r("lVFs");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(y,e);var t,r,o,a,d=(t=y,function(){var e,r=s(t);if(f()){var n=s(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return l(this,e)});function y(){return u(this,y),d.apply(this,arguments)}return r=y,(o=[{key:"handleClick",value:function(e,t){var r=e.picks,o=(0,n.getPickedEditHandle)(r),a=!1;o||(this.addClickSequence(e),a=!0);var u=this.getClickSequence();if(u.length>1&&o&&Array.isArray(o.properties.positionIndexes)&&o.properties.positionIndexes[0]===u.length-1){var c={type:"LineString",coordinates:i(u)};this.resetClickSequence();var l=this.getAddFeatureAction(c,t.data);l&&t.onEdit(l)}else a&&t.onEdit({updatedData:t.data,editType:"addTentativePosition",editContext:{position:e.mapCoords}})}},{key:"getGuides",value:function(e){var t,r,n=e.lastPointerMoveEvent,o=this.getClickSequence(),a=n?[n.mapCoords]:[],u={type:"FeatureCollection",features:[]};o.length>0&&(r={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(i(o),a)}}),r&&u.features.push(r);var c=o.map((function(e,t){return{type:"Feature",properties:{guideType:"editHandle",editHandleType:"existing",featureIndex:-1,positionIndexes:[t]},geometry:{type:"Point",coordinates:e}}}));return(t=u.features).push.apply(t,i(c)),u}},{key:"handlePointerMove",value:function(e,t){t.onUpdateCursor("cell")}}])&&c(r.prototype,o),a&&c(r,a),y}(r("4R+2").GeoJsonEditMode);t.DrawLineStringMode=d},"4R+2":function(e,t,r){"use strict";r("wZFJ"),r("Dq+y"),r("ToIb"),r("v9g0"),r("AqHK"),r("YbXK"),r("cFtU"),r("pJf4"),r("q8oJ"),r("C9fy"),r("8npG"),r("rzGZ"),r("MIFh"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.getIntermediatePosition=function(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]},t.GeoJsonEditMode=void 0;var n=c(r("Qnnh")),o=c(r("KMcD")),i=c(r("bLT3")),a=r("lVFs"),u=r("KV4q");function c(e){return e&&e.__esModule?e:{default:e}}function l(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var d={type:"FeatureCollection",features:[]},y=[],h=function(){function e(){var t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=[],(r="_clickSequence")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}var t,r,c;return t=e,(r=[{key:"getGuides",value:function(e){return d}},{key:"getTooltips",value:function(e){return y}},{key:"getSelectedFeature",value:function(e){return 1===e.selectedIndexes.length?e.data.features[e.selectedIndexes[0]]:null}},{key:"getSelectedGeometry",value:function(e){var t=this.getSelectedFeature(e);return t?t.geometry:null}},{key:"getSelectedFeaturesAsFeatureCollection",value:function(e){var t=e.data.features;return{type:"FeatureCollection",features:e.selectedIndexes.map((function(e){return t[e]}))}}},{key:"getClickSequence",value:function(){return this._clickSequence}},{key:"addClickSequence",value:function(e){var t=e.mapCoords;this._clickSequence.push(t)}},{key:"resetClickSequence",value:function(){this._clickSequence=[]}},{key:"getTentativeGuide",value:function(e){return this.getGuides(e).features.find((function(e){return e.properties&&"tentative"===e.properties.guideType}))}},{key:"isSelectionPicked",value:function(e,t){if(!e.length)return!1;var r=(0,a.getNonGuidePicks)(e).map((function(e){return e.index})),n=(0,a.getPickedEditHandles)(e).map((function(e){return e.properties.featureIndex})),o=new Set([].concat(l(r),l(n)));return t.selectedIndexes.some((function(e){return o.has(e)}))}},{key:"getAddFeatureAction",value:function(e,t){var r=e,n=new u.ImmutableFeatureCollection(t).addFeature({type:"Feature",properties:{},geometry:r}).getObject();return{updatedData:n,editType:"addFeature",editContext:{featureIndexes:[n.features.length-1]}}}},{key:"getAddManyFeaturesAction",value:function(e,t){var r,n=e.features,o=new u.ImmutableFeatureCollection(t),i=o.getObject().features.length,a=[],c=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=f(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}(n);try{for(c.s();!(r=c.n()).done;){var l=r.value,s=l.properties,p=l.geometry;o=o.addFeature({type:"Feature",properties:s,geometry:p}),a.push(i+a.length)}}catch(d){c.e(d)}finally{c.f()}return{updatedData:o.getObject(),editType:"addFeature",editContext:{featureIndexes:a}}}},{key:"getAddFeatureOrBooleanPolygonAction",value:function(e,t){var r=this.getSelectedFeature(t),a=t.modeConfig;if(a&&a.booleanOperation){if(!r||"Polygon"!==r.geometry.type&&"MultiPolygon"!==r.geometry.type)return console.warn("booleanOperation only supported for single Polygon or MultiPolygon selection"),null;var c,l={type:"Feature",geometry:e};if("union"===a.booleanOperation)c=(0,n.default)(r,l);else if("difference"===a.booleanOperation)c=(0,o.default)(r,l);else{if("intersection"!==a.booleanOperation)return console.warn("Invalid booleanOperation ".concat(a.booleanOperation)),null;c=(0,i.default)(r,l)}if(!c)return console.warn("Canceling edit. Boolean operation erased entire polygon."),null;var f=t.selectedIndexes[0];return{updatedData:new u.ImmutableFeatureCollection(t.data).replaceGeometry(f,c.geometry).getObject(),editType:"unionGeometry",editContext:{featureIndexes:[f]}}}return this.getAddFeatureAction(e,t.data)}},{key:"handleClick",value:function(e,t){}},{key:"handlePointerMove",value:function(e,t){}},{key:"handleStartDragging",value:function(e,t){}},{key:"handleStopDragging",value:function(e,t){}},{key:"handleDragging",value:function(e,t){}}])&&p(t.prototype,r),c&&p(t,c),e}();t.GeoJsonEditMode=h},"4fRq":function(e,t,r){r("CtJk"),r("n7j8");var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var o=new Uint8Array(16);e.exports=function(){return n(o),o}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},"6e3H":function(e,t,r){"use strict";r("sc67"),r("JHok"),r("AqHK"),r("MIFh");function n(e,t,r){if(!a(r=r||{}))throw new Error("options is invalid");var n=r.bbox,o=r.id;if(void 0===e)throw new Error("geometry is required");if(t&&t.constructor!==Object)throw new Error("properties must be an Object");n&&u(n),o&&c(o);var i={type:"Feature"};return o&&(i.id=o),n&&(i.bbox=n),i.properties=t||{},i.geometry=e,i}function o(e,t,r){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!i(e[0])||!i(e[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:e},t,r)}function i(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}function a(e){return!!e&&e.constructor===Object}function u(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach((function(e){if(!i(e))throw new Error("bbox must only contain numbers")}))}function c(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}function l(e,t,r){if(null!==e)for(var n,o,i,a,u,c,f,s,p=0,d=0,y=e.type,h="FeatureCollection"===y,g="Feature"===y,v=h?e.features.length:1,b=0;b<v;b++){u=(s=!!(f=h?e.features[b].geometry:g?e.geometry:e)&&"GeometryCollection"===f.type)?f.geometries.length:1;for(var m=0;m<u;m++){var E=0,P=0;if(null!==(a=s?f.geometries[m]:f)){c=a.coordinates;var w=a.type;switch(p=!r||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===t(c,d,b,E,P))return!1;d++,E++;break;case"LineString":case"MultiPoint":for(n=0;n<c.length;n++){if(!1===t(c[n],d,b,E,P))return!1;d++,"MultiPoint"===w&&E++}"LineString"===w&&E++;break;case"Polygon":case"MultiLineString":for(n=0;n<c.length;n++){for(o=0;o<c[n].length-p;o++){if(!1===t(c[n][o],d,b,E,P))return!1;d++}"MultiLineString"===w&&E++,"Polygon"===w&&P++}"Polygon"===w&&E++;break;case"MultiPolygon":for(n=0;n<c.length;n++){for("MultiPolygon"===w&&(P=0),o=0;o<c[n].length;o++){for(i=0;i<c[n][o].length-p;i++){if(!1===t(c[n][o][i],d,b,E,P))return!1;d++}P++}E++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===l(a.geometries[n],t,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}t.a=function(e,t){var r=0,n=0,i=0;return l(e,(function(e){r+=e[0],n+=e[1],i++}),!0),o([r/i,n/i],t)}},"7it9":function(e,t,r){"use strict";r("MIFh"),r("pS08"),r("LagC"),r("q8oJ"),r("C9fy"),r("8npG"),r("nWfQ"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.RotateMode=void 0;var n=g(r("f9Xn")),o=g(r("QJ+7")),i=g(r("sS7t")),a=g(r("qhoL")),u=g(r("UWCo")),c=g(r("j3ZU")),l=r("cWyK"),f=r("AKIq"),s=r("/rf6"),p=g(r("Jgsv")),d=r("lVFs"),y=r("4R+2"),h=r("KV4q");function g(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(j,e);var t,r,g,v,M=(t=j,function(){var e,r=O(t);if(w()){var n=O(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return E(this,e)});function j(){var e;b(this,j);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return S(P(e=M.call.apply(M,[this].concat(r))),"_selectedEditHandle",void 0),S(P(e),"_geometryBeingRotated",void 0),S(P(e),"_isRotating",!1),S(P(e),"_isSinglePointGeometrySelected",(function(e){var t=(e||{}).features;return!(!Array.isArray(t)||1!==t.length)&&"Point"===(0,f.getGeom)(t[0]).type})),S(P(e),"getIsRotating",(function(){return e._isRotating})),e}return r=j,(g=[{key:"getGuides",value:function(e){var t=this._geometryBeingRotated||this.getSelectedFeaturesAsFeatureCollection(e);if(this._isRotating)return(0,s.featureCollection)([(0,i.default)(t)]);var r=this._isSinglePointGeometrySelected(t)?(0,n.default)(t,1):t,a=(0,u.default)((0,o.default)(r)),f=null,p=null,d=0;(0,l.coordEach)(a,(function(e,t){if(f){var r=(0,y.getIntermediatePosition)(e,f);(!p||r[1]>p[1])&&(p=r);var n=(0,c.default)(e,f);d=Math.max(d,n)}f=e}));var h=p&&[p[0],p[1]+d/1e3],g=(0,s.lineString)([p,h]),v=(0,s.point)(h,{guideType:"editHandle",editHandleType:"rotate"});return(0,s.featureCollection)([a,v,g])}},{key:"handleDragging",value:function(e,t){if(this._isRotating){var r=this.getRotateAction(e.pointerDownMapCoords,e.mapCoords,"rotating",t);r&&t.onEdit(r),e.cancelPan()}}},{key:"handlePointerMove",value:function(e,t){if(!this._isRotating){var r=(0,d.getPickedEditHandle)(e.picks);this._selectedEditHandle=r&&"rotate"===r.properties.editHandleType?r:null}this.updateCursor(t)}},{key:"handleStartDragging",value:function(e,t){this._selectedEditHandle&&(this._isRotating=!0,this._geometryBeingRotated=this.getSelectedFeaturesAsFeatureCollection(t))}},{key:"handleStopDragging",value:function(e,t){if(this._isRotating){var r=this.getRotateAction(e.pointerDownMapCoords,e.mapCoords,"rotated",t);r&&t.onEdit(r),this._geometryBeingRotated=null,this._selectedEditHandle=null,this._isRotating=!1}}},{key:"updateCursor",value:function(e){this._selectedEditHandle?e.onUpdateCursor("crosshair"):e.onUpdateCursor(null)}},{key:"getRotateAction",value:function(e,t,r,n){if(!this._geometryBeingRotated)return null;for(var o=(0,i.default)(this._geometryBeingRotated),u=function(e,t,r){var n=(0,a.default)(e,t);return(0,a.default)(e,r)-n}(o,e,t),c=(0,p.default)(this._geometryBeingRotated,u,{pivot:o}),l=new h.ImmutableFeatureCollection(n.data),f=n.selectedIndexes,s=0;s<f.length;s++){var d=f[s],y=c.features[s];l=l.replaceGeometry(d,y.geometry)}return{updatedData:l.getObject(),editType:r,editContext:{featureIndexes:f}}}}])&&m(r.prototype,g),v&&m(r,v),j}(y.GeoJsonEditMode);t.RotateMode=M},"9/d+":function(e,t,r){"use strict";r("wZFJ"),r("gu/5"),r("eoYm"),r("v9g0"),r("pS08"),r("LagC"),r("nWfQ"),r("pJf4"),r("q8oJ"),r("C9fy"),r("8npG"),r("MIFh"),r("YbXK"),r("cFtU"),r("rzGZ"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.ModifyMode=void 0;var n,o=(n=r("eSxo"))&&n.__esModule?n:{default:n},i=r("/rf6"),a=r("lVFs"),u=r("4R+2"),c=r("KV4q");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(p,e);var t,r,n,u,l=(t=p,function(){var e,r=v(t);if(g()){var n=v(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return h(this,e)});function p(){return d(this,p),l.apply(this,arguments)}return r=p,(n=[{key:"getGuides",value:function(e){var t,r=this,n=[],o=e.data,u=e.lastPointerMoveEvent,c=o.features,l=u&&u.picks,p=u&&u.mapCoords,d=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=s(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}(e.selectedIndexes);try{for(d.s();!(t=d.n()).done;){var y=t.value;if(y<c.length){var h=c[y].geometry;n.push.apply(n,f((0,a.getEditHandlesForGeometry)(h,y)))}else console.warn("selectedFeatureIndexes out of range ".concat(y))}}catch(O){d.e(O)}finally{d.f()}if(l&&l.length&&p){var g=!(0,a.getPickedExistingEditHandle)(l)&&l.find((function(e){return!e.isGuide}));if(g&&!g.object.geometry.type.includes("Point")&&e.selectedIndexes.includes(g.index)){var v=null,b=[],m=(0,i.point)(p);if((0,a.recursivelyTraverseNestedArrays)(g.object.geometry.coordinates,[],(function(t,n){var o=(0,i.lineString)(t),a=r.nearestPointOnLine(o,m,e.modeConfig&&e.modeConfig.viewport);(!v||a.properties.dist<v.properties.dist)&&(v=a,b=n)})),v){var E=v,P=E.geometry.coordinates,w=E.properties.index;n.push({type:"Feature",properties:{guideType:"editHandle",editHandleType:"intermediate",featureIndex:g.index,positionIndexes:[].concat(f(b),[w+1])},geometry:{type:"Point",coordinates:P}})}}}return{type:"FeatureCollection",features:n}}},{key:"nearestPointOnLine",value:function(e,t,r){if(e.geometry.coordinates.some((function(e){return e.length>2}))){if(r)return(0,a.nearestPointOnProjectedLine)(e,t,r);console.log("Editing 3D point but modeConfig.viewport not provided. Falling back to 2D logic.")}return(0,o.default)(e,t)}},{key:"handleClick",value:function(e,t){var r=(0,a.getPickedExistingEditHandle)(e.picks),n=(0,a.getPickedIntermediateEditHandle)(e.picks);if(r){var o,i=r.properties,u=i.featureIndex,l=i.positionIndexes;try{o=new c.ImmutableFeatureCollection(t.data).removePosition(u,l).getObject()}catch(y){}o&&t.onEdit({updatedData:o,editType:"removePosition",editContext:{featureIndexes:[u],positionIndexes:l,position:r.geometry.coordinates}})}else if(n){var f=n.properties,s=f.featureIndex,p=f.positionIndexes,d=new c.ImmutableFeatureCollection(t.data).addPosition(s,p,n.geometry.coordinates).getObject();d&&t.onEdit({updatedData:d,editType:"addPosition",editContext:{featureIndexes:[s],positionIndexes:p,position:n.geometry.coordinates}})}}},{key:"handleDragging",value:function(e,t){var r=(0,a.getPickedEditHandle)(e.pointerDownPicks);if(r){e.cancelPan();var n=r.properties,o=new c.ImmutableFeatureCollection(t.data).replacePosition(n.featureIndex,n.positionIndexes,e.mapCoords).getObject();t.onEdit({updatedData:o,editType:"movePosition",editContext:{featureIndexes:[n.featureIndex],positionIndexes:n.positionIndexes,position:e.mapCoords}})}}},{key:"handlePointerMove",value:function(e,t){var r=this.getCursor(e);t.onUpdateCursor(r)}},{key:"handleStartDragging",value:function(e,t){var r=t.selectedIndexes,n=(0,a.getPickedIntermediateEditHandle)(e.picks);if(r.length&&n){var o=n.properties,i=new c.ImmutableFeatureCollection(t.data).addPosition(o.featureIndex,o.positionIndexes,e.mapCoords).getObject();t.onEdit({updatedData:i,editType:"addPosition",editContext:{featureIndexes:[o.featureIndex],positionIndexes:o.positionIndexes,position:e.mapCoords}})}}},{key:"handleStopDragging",value:function(e,t){var r=t.selectedIndexes,n=(0,a.getPickedEditHandle)(e.picks);if(r.length&&n){var o=n.properties,i=new c.ImmutableFeatureCollection(t.data).replacePosition(o.featureIndex,o.positionIndexes,e.mapCoords).getObject();t.onEdit({updatedData:i,editType:"finishMovePosition",editContext:{featureIndexes:[o.featureIndex],positionIndexes:o.positionIndexes,position:e.mapCoords}})}}},{key:"getCursor",value:function(e){var t=e&&e.picks||[];return(0,a.getPickedEditHandles)(t).length?"cell":null}}])&&y(r.prototype,n),u&&y(r,u),p}(u.GeoJsonEditMode);t.ModifyMode=m},"9ASd":function(e,t,r){"use strict";r("U6Bt"),r("AqHK"),r("JHok"),r("YBKJ"),r("m5Zt"),r("pS08"),r("LagC"),r("nWfQ"),r("pJf4"),r("q8oJ"),r("C9fy"),r("8npG"),r("MIFh"),r("YbXK"),r("cFtU"),r("rzGZ"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.SplitPolygonMode=void 0;var n=g(r("RZZ2")),o=g(r("KMcD")),i=g(r("f9Xn")),a=g(r("sk2A")),u=r("/rf6"),c=g(r("qhoL")),l=g(r("j3ZU")),f=g(r("Yeox")),s=g(r("nlv9")),p=g(r("eSxo")),d=r("lVFs"),y=r("4R+2"),h=r("KV4q");function g(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){o=!0,i=c}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(E,e);var t,r,y,g,v=(t=E,function(){var e,r=M(t);if(S()){var n=M(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return _(this,e)});function E(){return w(this,E),v.apply(this,arguments)}return r=E,(y=[{key:"calculateMapCoords",value:function(e,t,r){var n=r.modeConfig;if(!n||!n.lock90Degree||!e.length)return t;if(1===e.length){var o=e[0],i=this.getSelectedGeometry(r),a=(0,s.default)(i),y="FeatureCollection"===a.type?a.features:[a],h=Number.MAX_SAFE_INTEGER,g=null;if(y.forEach((function(e){var t=(0,p.default)(e,o),r=(0,l.default)(t,o);h>r&&(h=r,g=t)})),g){var v=(0,c.default)(o,g),b=(0,l.default)(o,t,{units:"meters"});return(0,f.default)(o,b,v,{units:"meters"}).geometry.coordinates}return t}var E=e[e.length-1],P=m((0,d.generatePointsParallelToLinePoints)(e[e.length-2],E,t),1)[0];return(0,p.default)((0,u.lineString)([E,P]),t).geometry.coordinates}},{key:"getGuides",value:function(e){var t=this.getClickSequence(),r={type:"FeatureCollection",features:[]};if(0===t.length||!e.lastPointerMoveEvent)return r;var n=e.lastPointerMoveEvent.mapCoords;return r.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(b(t),[this.calculateMapCoords(t,n,e)])}}),r}},{key:"handleClick",value:function(e,t){var r=this.getTentativeGuide(t),o=this.getSelectedGeometry(t);if(o){var i=this.getClickSequence();r&&"LineString"===r.geometry.type?i.push(r.geometry.coordinates[r.geometry.coordinates.length-1]):this.addClickSequence(e);var u={type:"Point",coordinates:i[i.length-1]},c=(0,n.default)(u,o);if(i.length>1&&r&&!c){if(this.resetClickSequence(),0===(0,a.default)(r,o).features.length)return;var l=this.splitPolygon(r,t);l&&t.onEdit(l)}}else console.warn("A polygon must be selected for splitting")}},{key:"handlePointerMove",value:function(e,t){t.onUpdateCursor("cell")}},{key:"splitPolygon",value:function(e,t){var r=this.getSelectedGeometry(t),n=t.selectedIndexes[0],a=t.modeConfig||{},u=a.gap,c=void 0===u?.1:u,l=a.units,f=void 0===l?"centimeters":l;0===c&&(c=.1,f="centimeters");var s=(0,i.default)(e,c,{units:f}),p=(0,o.default)(r,s);if(!p)return console.warn("Canceling edit. Split Polygon erased"),null;var d=p.geometry,y=d.type,g=d.coordinates,v=[];return v="Polygon"===y?g.map((function(e){return[e]})):g.reduce((function(e,t){return t.forEach((function(t){e.push([t])})),e}),[]),{updatedData:new h.ImmutableFeatureCollection(t.data).replaceGeometry(n,{type:"MultiPolygon",coordinates:v}).getObject(),editType:"split",editContext:{featureIndexes:[n]}}}}])&&O(r.prototype,y),g&&O(r,g),E}(y.GeoJsonEditMode);t.SplitPolygonMode=T},"9daN":function(e,t,r){"use strict";r("pS08"),r("LagC"),r("q8oJ"),r("C9fy"),r("8npG"),r("nWfQ"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.DrawCircleFromCenterMode=void 0;var n=i(r("Mu+0")),o=i(r("j3ZU"));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(y,e);var t,r,i,a,d=(t=y,function(){var e,r=s(t);if(f()){var n=s(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return l(this,e)});function y(){return u(this,y),d.apply(this,arguments)}return r=y,(i=[{key:"getTwoClickPolygon",value:function(e,t,r){var i=(r||{}).steps,a=void 0===i?64:i,u={steps:a};a<4&&(console.warn("Minimum steps to draw a circle is 4 "),u.steps=4);var c=Math.max((0,o.default)(e,t),.001);return(0,n.default)(e,c,u)}}])&&c(r.prototype,i),a&&c(r,a),y}(r("MMIt").TwoClickPolygonMode);t.DrawCircleFromCenterMode=d},"9hBD":function(e,t,r){"use strict";r("pS08"),r("LagC"),r("nWfQ"),r("+ar0"),r("xtjI"),r("JHok"),r("OeI1"),r("Dq+y"),r("Ggvi"),r("MIFh"),r("rzGZ"),r("YbXK"),r("cFtU"),r("pJf4"),r("q8oJ"),r("C9fy"),r("8npG"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=u(r("xDdU")),o=r("1Y5v"),i=u(r("KER3")),a=r("wHih");function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(f,e);var t,r,i,u,c=(t=f,function(){var e,r=b(t);if(v()){var n=b(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return h(this,e)});function f(){var e;d(this,f);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return E(g(e=c.call.apply(c,[this].concat(r))),"handleClick",(function(t,r){e.getTentativeFeature()?e._updateTentativeFeature(t,r):e._initTentativeFeature(t,r)})),E(g(e),"getGuides",(function(t){var r=e.getSelectedFeature(t),n=e.getTentativeFeature(),i=r||n,u=(0,a.getFeatureCoordinates)(i);if(!u)return null;var c=t.lastPointerMoveEvent,f=e.getEditHandlesFromFeature(i)||[],s={type:"Feature",properties:{guideType:o.GUIDE_TYPE.CURSOR_EDIT_HANDLE,renderType:o.RENDER_TYPE.LINE_STRING,positionIndexes:[f.length]},geometry:{type:o.GEOJSON_TYPE.POINT,coordinates:[c.mapCoords]}};return f.push(s),{tentativeFeature:n=p({},n,{geometry:{type:o.GEOJSON_TYPE.LINE_STRING,coordinates:[].concat(l(u),[c.mapCoords])}}),editHandles:f}})),E(g(e),"_updateTentativeFeature",(function(t,r){var n=e.getTentativeFeature();n&&(n=p({},n,{geometry:{type:o.GEOJSON_TYPE.LINE_STRING,coordinates:[].concat(l(n.geometry.coordinates),[t.mapCoords])}}),e.setTentativeFeature(n),r.onEdit({editType:o.EDIT_TYPE.ADD_POSITION,updatedData:r.data.getObject(),editContext:[{feature:n,featureIndex:null,editHandleIndex:n.geometry.coordinates.length-1,screenCoords:t.screenCoords,mapCoords:t.mapCoords}]}))})),E(g(e),"_commitTentativeFeature",(function(t,r){var n=e.getTentativeFeature();if(n){var i=r.data;e.setTentativeFeature(null);var a=p({},n,{properties:{id:n.properties.id,renderType:o.RENDER_TYPE.LINE_STRING}}),u=i.addFeature(a).getObject();r.onEdit({editType:o.EDIT_TYPE.ADD_FEATURE,updatedData:u,editContext:null})}})),E(g(e),"_initTentativeFeature",(function(t,r){e.setTentativeFeature({type:"Feature",properties:{id:(0,n.default)(),renderType:o.RENDER_TYPE.LINE_STRING,guideType:o.GUIDE_TYPE.TENTATIVE},geometry:{type:o.GEOJSON_TYPE.POINT,coordinates:[t.mapCoords]}})})),e}return r=f,(i=[{key:"handleDblClick",value:function(e,t){this._commitTentativeFeature(e,t)}}])&&y(r.prototype,i),u&&y(r,u),f}(i.default);t.default=P},"A/RR":function(e,t,r){r("R48M"),r("+ar0"),r("rzGZ"),r("Dq+y"),r("8npG"),r("JHok"),r("v9g0"),r("sC2a"),function(e){"use strict";function t(e,t){return e>t?1:e<t?-1:0}var r=function(e,r){void 0===e&&(e=t),void 0===r&&(r=!1),this._compare=e,this._root=null,this._size=0,this._noDuplicates=!!r},n={size:{configurable:!0}};function o(e,t,r){null===t?(e.inOut=!1,e.otherInOut=!0):(e.isSubject===t.isSubject?(e.inOut=!t.inOut,e.otherInOut=t.otherInOut):(e.inOut=!t.otherInOut,e.otherInOut=t.isVertical()?!t.inOut:t.inOut),t&&(e.prevInResult=!i(t,r)||t.isVertical()?t.prevInResult:t)),e.inResult=i(e,r)}function i(e,t){switch(e.type){case 0:switch(t){case 0:return!e.otherInOut;case 1:return e.otherInOut;case 2:return e.isSubject&&e.otherInOut||!e.isSubject&&!e.otherInOut;case 3:return!0}break;case 2:return 0===t||1===t;case 3:return 2===t;case 1:return!1}return!1}r.prototype.rotateLeft=function(e){var t=e.right;t&&(e.right=t.left,t.left&&(t.left.parent=e),t.parent=e.parent),e.parent?e===e.parent.left?e.parent.left=t:e.parent.right=t:this._root=t,t&&(t.left=e),e.parent=t},r.prototype.rotateRight=function(e){var t=e.left;t&&(e.left=t.right,t.right&&(t.right.parent=e),t.parent=e.parent),e.parent?e===e.parent.left?e.parent.left=t:e.parent.right=t:this._root=t,t&&(t.right=e),e.parent=t},r.prototype._splay=function(e){for(;e.parent;){var t=e.parent;t.parent?t.left===e&&t.parent.left===t?(this.rotateRight(t.parent),this.rotateRight(t)):t.right===e&&t.parent.right===t?(this.rotateLeft(t.parent),this.rotateLeft(t)):t.left===e&&t.parent.right===t?(this.rotateRight(t),this.rotateLeft(t)):(this.rotateLeft(t),this.rotateRight(t)):t.left===e?this.rotateRight(t):this.rotateLeft(t)}},r.prototype.splay=function(e){for(var t,r,n,o,i;e.parent;)(r=(t=e.parent).parent)&&r.parent?((n=r.parent).left===r?n.left=e:n.right=e,e.parent=n):(e.parent=null,this._root=e),o=e.left,i=e.right,e===t.left?(r&&(r.left===t?(t.right?(r.left=t.right,r.left.parent=r):r.left=null,t.right=r,r.parent=t):(o?(r.right=o,o.parent=r):r.right=null,e.left=r,r.parent=e)),i?(t.left=i,i.parent=t):t.left=null,e.right=t,t.parent=e):(r&&(r.right===t?(t.left?(r.right=t.left,r.right.parent=r):r.right=null,t.left=r,r.parent=t):(i?(r.left=i,i.parent=r):r.left=null,e.right=r,r.parent=e)),o?(t.right=o,o.parent=t):t.right=null,e.left=t,t.parent=e)},r.prototype.replace=function(e,t){e.parent?e===e.parent.left?e.parent.left=t:e.parent.right=t:this._root=t,t&&(t.parent=e.parent)},r.prototype.minNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.left;)e=e.left;return e},r.prototype.maxNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.right;)e=e.right;return e},r.prototype.insert=function(e,t){var r=this._root,n=null,o=this._compare;if(this._noDuplicates)for(;r;){if(n=r,0===o(r.key,e))return;r=o(r.key,e)<0?r.right:r.left}else for(;r;)n=r,r=o(r.key,e)<0?r.right:r.left;return r={key:e,data:t,left:null,right:null,parent:n},n?o(n.key,r.key)<0?n.right=r:n.left=r:this._root=r,this.splay(r),this._size++,r},r.prototype.find=function(e){for(var t=this._root,r=this._compare;t;){var n=r(t.key,e);if(n<0)t=t.right;else{if(!(n>0))return t;t=t.left}}return null},r.prototype.contains=function(e){for(var t=this._root,r=this._compare;t;){var n=r(e,t.key);if(0===n)return!0;t=n<0?t.left:t.right}return!1},r.prototype.remove=function(e){var t=this.find(e);if(!t)return!1;if(this.splay(t),t.left)if(t.right){var r=this.minNode(t.right);r.parent!==t&&(this.replace(r,r.right),r.right=t.right,r.right.parent=r),this.replace(t,r),r.left=t.left,r.left.parent=r}else this.replace(t,t.left);else this.replace(t,t.right);return this._size--,!0},r.prototype.removeNode=function(e){if(!e)return!1;if(this.splay(e),e.left)if(e.right){var t=this.minNode(e.right);t.parent!==e&&(this.replace(t,t.right),t.right=e.right,t.right.parent=t),this.replace(e,t),t.left=e.left,t.left.parent=t}else this.replace(e,e.left);else this.replace(e,e.right);return this._size--,!0},r.prototype.erase=function(e){var t=this.find(e);if(t){this.splay(t);var r=t.left,n=t.right,o=null;r&&(r.parent=null,o=this.maxNode(r),this.splay(o),this._root=o),n&&(r?o.right=n:this._root=n,n.parent=o),this._size--}},r.prototype.pop=function(){var e=this._root,t=null;if(e){for(;e.left;)e=e.left;t={key:e.key,data:e.data},this.remove(e.key)}return t},r.prototype.next=function(e){var t=e;if(t)if(t.right)for(t=t.right;t&&t.left;)t=t.left;else for(t=e.parent;t&&t.right===e;)e=t,t=t.parent;return t},r.prototype.prev=function(e){var t=e;if(t)if(t.left)for(t=t.left;t&&t.right;)t=t.right;else for(t=e.parent;t&&t.left===e;)e=t,t=t.parent;return t},r.prototype.forEach=function(e){for(var t=this._root,r=[],n=!1,o=0;!n;)t?(r.push(t),t=t.left):r.length>0?(e(t=r.pop(),o++),t=t.right):n=!0;return this},r.prototype.range=function(e,t,r,n){for(var o=[],i=this._compare,a=this._root;0!==o.length||a;)if(a)o.push(a),a=a.left;else{if(i((a=o.pop()).key,t)>0)break;if(i(a.key,e)>=0&&r.call(n,a))return this;a=a.right}return this},r.prototype.keys=function(){for(var e=this._root,t=[],r=[],n=!1;!n;)e?(t.push(e),e=e.left):t.length>0?(e=t.pop(),r.push(e.key),e=e.right):n=!0;return r},r.prototype.values=function(){for(var e=this._root,t=[],r=[],n=!1;!n;)e?(t.push(e),e=e.left):t.length>0?(e=t.pop(),r.push(e.data),e=e.right):n=!0;return r},r.prototype.at=function(e){for(var t=this._root,r=[],n=!1,o=0;!n;)if(t)r.push(t),t=t.left;else if(r.length>0){if(t=r.pop(),o===e)return t;o++,t=t.right}else n=!0;return null},r.prototype.load=function(e,t,r){if(void 0===e&&(e=[]),void 0===t&&(t=[]),void 0===r&&(r=!1),0!==this._size)throw new Error("bulk-load: tree is not empty");var n=e.length;return r&&function e(t,r,n,o,i){if(!(n>=o)){for(var a=t[n+o>>1],u=n-1,c=o+1;;){do{u++}while(i(t[u],a)<0);do{c--}while(i(t[c],a)>0);if(u>=c)break;var l=t[u];t[u]=t[c],t[c]=l,l=r[u],r[u]=r[c],r[c]=l}e(t,r,n,c,i),e(t,r,c+1,o,i)}}(e,t,0,n-1,this._compare),this._root=function e(t,r,n,o,i){var a=i-o;if(a>0){var u=o+Math.floor(a/2),c={key:r[u],data:n[u],parent:t};return c.left=e(c,r,n,o,u),c.right=e(c,r,n,u+1,i),c}return null}(null,e,t,0,n),this._size=n,this},r.prototype.min=function(){var e=this.minNode(this._root);return e?e.key:null},r.prototype.max=function(){var e=this.maxNode(this._root);return e?e.key:null},r.prototype.isEmpty=function(){return null===this._root},n.size.get=function(){return this._size},r.createTree=function(e,t,n,o,i){return new r(n,i).load(e,t,o)},Object.defineProperties(r.prototype,n);var a=function(e,t,r,n,o){this.left=t,this.point=e,this.otherEvent=r,this.isSubject=n,this.type=o||0,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.inResult=!1,this.resultInOut=!1,this.isExteriorRing=!0};function u(e,t){return e[0]===t[0]&&e[1]===t[1]}function c(e,t,r){return(e[0]-r[0])*(t[1]-r[1])-(t[0]-r[0])*(e[1]-r[1])}function l(e,t){var r=e.point,n=t.point;return r[0]>n[0]?1:r[0]<n[0]?-1:r[1]!==n[1]?r[1]>n[1]?1:-1:function(e,t,r,n){return e.left!==t.left?e.left?1:-1:0!==c(r,e.otherEvent.point,t.otherEvent.point)?e.isBelow(t.otherEvent.point)?-1:1:!e.isSubject&&t.isSubject?1:-1}(e,t,r)}function f(e,t,r){var n=new a(t,!1,e,e.isSubject),o=new a(t,!0,e.otherEvent,e.isSubject);return u(e.point,e.otherEvent.point)&&console.warn("what is that, a collapsed segment?",e),n.contourId=o.contourId=e.contourId,l(o,e.otherEvent)>0&&(e.otherEvent.left=!0,o.left=!1),e.otherEvent.otherEvent=o,e.otherEvent=n,r.push(o),r.push(n),r}function s(e,t){return e[0]*t[1]-e[1]*t[0]}function p(e,t){return e[0]*t[0]+e[1]*t[1]}function d(e,t,r){var n=function(e,t,r,n,o){var i=[t[0]-e[0],t[1]-e[1]],a=[n[0]-r[0],n[1]-r[1]];function u(e,t,r){return[e[0]+t*r[0],e[1]+t*r[1]]}var c=[r[0]-e[0],r[1]-e[1]],l=s(i,a),f=l*l,d=p(i,i);if(f>0){var y=s(c,a)/l;if(y<0||y>1)return null;var h=s(c,i)/l;return h<0||h>1?null:0===y||1===y?o?null:[u(e,y,i)]:0===h||1===h?o?null:[u(r,h,a)]:[u(e,y,i)]}if((f=(l=s(c,i))*l)>0)return null;var g=p(i,c)/d,v=g+p(i,a)/d,b=Math.min(g,v),m=Math.max(g,v);return b<=1&&m>=0?1===b?o?null:[u(e,b>0?b:0,i)]:0===m?o?null:[u(e,m<1?m:1,i)]:o&&0===b&&1===m?null:[u(e,b>0?b:0,i),u(e,m<1?m:1,i)]:null}(e.point,e.otherEvent.point,t.point,t.otherEvent.point),o=n?n.length:0;if(0===o)return 0;if(1===o&&(u(e.point,t.point)||u(e.otherEvent.point,t.otherEvent.point)))return 0;if(2===o&&e.isSubject===t.isSubject)return 0;if(1===o)return u(e.point,n[0])||u(e.otherEvent.point,n[0])||f(e,n[0],r),u(t.point,n[0])||u(t.otherEvent.point,n[0])||f(t,n[0],r),1;var i=[],a=!1,c=!1;return u(e.point,t.point)?a=!0:1===l(e,t)?i.push(t,e):i.push(e,t),u(e.otherEvent.point,t.otherEvent.point)?c=!0:1===l(e.otherEvent,t.otherEvent)?i.push(t.otherEvent,e.otherEvent):i.push(e.otherEvent,t.otherEvent),a&&c||a?(t.type=1,e.type=t.inOut===e.inOut?2:3,a&&!c&&f(i[1].otherEvent,i[0].point,r),2):c?(f(i[0],i[1].point,r),3):i[0]!==i[3].otherEvent?(f(i[0],i[1].point,r),f(i[1],i[2].point,r),3):(f(i[0],i[1].point,r),f(i[3].otherEvent,i[2].point,r),3)}function y(e,t){if(e===t)return 0;if(0!==c(e.point,e.otherEvent.point,t.point)||0!==c(e.point,e.otherEvent.point,t.otherEvent.point))return u(e.point,t.point)?e.isBelow(t.otherEvent.point)?-1:1:e.point[0]===t.point[0]?e.point[1]<t.point[1]?-1:1:1===l(e,t)?t.isAbove(e.point)?-1:1:e.isBelow(t.point)?-1:1;if(e.isSubject!==t.isSubject)return e.isSubject?-1:1;var r=e.point,n=t.point;return r[0]===n[0]&&r[1]===n[1]?(r=e.otherEvent.point,n=t.otherEvent.point,r[0]===n[0]&&r[1]===n[1]?0:e.contourId>t.contourId?1:-1):1===l(e,t)?1:-1}function h(e,t,r,n){var o=e+1,i=t.length;if(o>i-1)return e-1;for(var a=t[e].point,u=t[o].point;o<i&&u[0]===a[0]&&u[1]===a[1];){if(!r[o])return o;u=t[++o].point}for(o=e-1;r[o]&&o>=n;)o--;return o}function g(e,t){var r,n,o,i=function(e){var t,r,n,o,i=[];for(r=0,n=e.length;r<n;r++)((t=e[r]).left&&t.inResult||!t.left&&t.otherEvent.inResult)&&i.push(t);for(var a=!1;!a;)for(a=!0,r=0,n=i.length;r<n;r++)r+1<n&&1===l(i[r],i[r+1])&&(o=i[r],i[r]=i[r+1],i[r+1]=o,a=!1);for(r=0,n=i.length;r<n;r++)(t=i[r]).pos=r;for(r=0,n=i.length;r<n;r++)(t=i[r]).left||(o=t.pos,t.pos=t.otherEvent.pos,t.otherEvent.pos=o);return i}(e),a={},u=[];for(r=0,n=i.length;r<n;r++)if(!a[r]){var c=[[]];i[r].isExteriorRing?2===t&&!i[r].isSubject&&u.length>1?u[u.length-1].push(c[0]):u.push(c):2!==t||i[r].isSubject||0!==u.length?0===u.length?u.push([[c]]):u[u.length-1].push(c[0]):u.push(c);var f=u.length-1,s=r,p=i[r].point;for(c[0].push(p);s>=r;)o=i[s],a[s]=!0,o.left?(o.resultInOut=!1,o.contourId=f):(o.otherEvent.resultInOut=!0,o.otherEvent.contourId=f),a[s=o.pos]=!0,c[0].push(i[s].point),s=h(s,i,a,r);o=i[s=-1===s?r:s],a[s]=a[o.pos]=!0,o.otherEvent.resultInOut=!0,o.otherEvent.contourId=f}return u}a.prototype.isBelow=function(e){var t=this.point,r=this.otherEvent.point;return this.left?(t[0]-e[0])*(r[1]-e[1])-(r[0]-e[0])*(t[1]-e[1])>0:(r[0]-e[0])*(t[1]-e[1])-(t[0]-e[0])*(r[1]-e[1])>0},a.prototype.isAbove=function(e){return!this.isBelow(e)},a.prototype.isVertical=function(){return this.point[0]===this.otherEvent.point[0]},a.prototype.clone=function(){var e=new a(this.point,this.left,this.otherEvent,this.isSubject,this.type);return e.inResult=this.inResult,e.prevInResult=this.prevInResult,e.isExteriorRing=this.isExteriorRing,e.inOut=this.inOut,e.otherInOut=this.otherInOut,e};var v=m,b=m;function m(e,t){if(!(this instanceof m))return new m(e,t);if(this.data=e||[],this.length=this.data.length,this.compare=t||E,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)}function E(e,t){return e<t?-1:e>t?1:0}m.prototype={push:function(e){this.data.push(e),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var e=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),e}},peek:function(){return this.data[0]},_up:function(e){for(var t=this.data,r=this.compare,n=t[e];e>0;){var o=e-1>>1,i=t[o];if(r(n,i)>=0)break;t[e]=i,e=o}t[e]=n},_down:function(e){for(var t=this.data,r=this.compare,n=this.length>>1,o=t[e];e<n;){var i=1+(e<<1),a=i+1,u=t[i];if(a<this.length&&r(t[a],u)<0&&(i=a,u=t[a]),r(u,o)>=0)break;t[e]=u,e=i}t[e]=o}},v.default=b;var P=Math.max,w=Math.min,O=0;function _(e,t,r,n,o,i){var u,c,f,s,p,d;for(u=0,c=e.length-1;u<c;u++)if(f=e[u],s=e[u+1],p=new a(f,!1,void 0,t),d=new a(s,!1,p,t),p.otherEvent=d,f[0]!==s[0]||f[1]!==s[1]){p.contourId=d.contourId=r,i||(p.isExteriorRing=!1,d.isExteriorRing=!1),l(p,d)>0?d.left=!0:p.left=!0;var y=f[0],h=f[1];o[0]=w(o[0],y),o[1]=w(o[1],h),o[2]=P(o[2],y),o[3]=P(o[3],h),n.push(p),n.push(d)}}var S=[];function M(e,t,n){"number"==typeof e[0][0][0]&&(e=[e]),"number"==typeof t[0][0][0]&&(t=[t]);var i=function(e,t,r){var n=null;return e.length*t.length==0&&(0===r?n=S:2===r?n=e:1!==r&&3!==r||(n=0===e.length?t:e)),n}(e,t,n);if(i)return i===S?null:i;var a=[1/0,1/0,-1/0,-1/0],u=[1/0,1/0,-1/0,-1/0],c=function(e,t,r,n,o){var i,a,u,c,f,s,p=new v(null,l);for(u=0,c=e.length;u<c;u++)for(f=0,s=(i=e[u]).length;f<s;f++)(a=0===f)&&O++,_(i[f],!0,O,p,r,a);for(u=0,c=t.length;u<c;u++)for(f=0,s=(i=t[u]).length;f<s;f++)a=0===f,2===o&&(a=!1),a&&O++,_(i[f],!1,O,p,n,a);return p}(e,t,a,u,n);return(i=function(e,t,r,n,o){var i=null;return(r[0]>n[2]||n[0]>r[2]||r[1]>n[3]||n[1]>r[3])&&(0===o?i=S:2===o?i=e:1!==o&&3!==o||(i=e.concat(t))),i}(e,t,a,u,n))?i===S?null:i:g(function(e,t,n,i,a,u){for(var c,l,f,s=new r(y),p=[],h=Math.min(i[2],a[2]);0!==e.length;){var g=e.pop();if(p.push(g),0===u&&g.point[0]>h||2===u&&g.point[0]>i[2])break;if(g.left){l=c=s.insert(g),c=c!==(f=s.minNode())?s.prev(c):null,l=s.next(l);var v=c?c.key:null;if(o(g,v,u),l&&2===d(g,l.key,e)&&(o(g,v,u),o(g,l.key,u)),c&&2===d(c.key,g,e)){var b=c;o(v,(b=b!==f?s.prev(b):null)?b.key:null,u),o(g,v,u)}}else g=g.otherEvent,l=c=s.find(g),c&&l&&(c=c!==f?s.prev(c):null,l=s.next(l),s.remove(g),l&&c&&d(c.key,l.key,e))}return p}(c,0,0,a,u,n),n)}var j={UNION:1,DIFFERENCE:2,INTERSECTION:0,XOR:3};e.union=function(e,t){return M(e,t,1)},e.diff=function(e,t){return M(e,t,2)},e.xor=function(e,t){return M(e,t,3)},e.intersection=function(e,t){return M(e,t,0)},e.operations=j,Object.defineProperty(e,"__esModule",{value:!0})}(t)},"A1R+":function(e,t,r){"use strict";r("sc67"),r("zGcK"),e.exports=o,e.exports.default=o;var n=r("YcpW");function o(e,t){if(!(this instanceof o))return new o(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&this._initFormat(t),this.clear()}function i(e,t,r){if(!r)return t.indexOf(e);for(var n=0;n<t.length;n++)if(r(e,t[n]))return n;return-1}function a(e,t){u(e,0,e.children.length,t,e)}function u(e,t,r,n,o){o||(o=h(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var i,a=t;a<r;a++)i=e.children[a],c(o,e.leaf?n(i):i);return o}function c(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function l(e,t){return e.minX-t.minX}function f(e,t){return e.minY-t.minY}function s(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function p(e){return e.maxX-e.minX+(e.maxY-e.minY)}function d(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function y(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function h(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,t,r,o,i){for(var a,u=[t,r];u.length;)(r=u.pop())-(t=u.pop())<=o||(a=t+Math.ceil((r-t)/o/2)*o,n(e,a,t,r,i),u.push(t,a,a,r))}o.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],n=this.toBBox;if(!y(e,t))return r;for(var o,i,a,u,c=[];t;){for(o=0,i=t.children.length;o<i;o++)a=t.children[o],y(e,u=t.leaf?n(a):a)&&(t.leaf?r.push(a):d(e,u)?this._all(a,r):c.push(a));t=c.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!y(e,t))return!1;for(var n,o,i,a,u=[];t;){for(n=0,o=t.children.length;n<o;n++)if(i=t.children[n],y(e,a=t.leaf?r(i):i)){if(t.leaf||d(e,a))return!0;u.push(i)}t=u.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var o=this.data;this.data=n,n=o}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=h([]),this},remove:function(e,t){if(!e)return this;for(var r,n,o,a,u=this.data,c=this.toBBox(e),l=[],f=[];u||l.length;){if(u||(u=l.pop(),n=l[l.length-1],r=f.pop(),a=!0),u.leaf&&-1!==(o=i(e,u.children,t)))return u.children.splice(o,1),l.push(u),this._condense(l),this;a||u.leaf||!d(u,c)?n?(r++,u=n.children[r],a=!1):u=null:(l.push(u),f.push(r),r=0,n=u,u=u.children[0])}return this},toBBox:function(e){return e},compareMinX:l,compareMinY:f,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},_build:function(e,t,r,n){var o,i=r-t+1,u=this._maxEntries;if(i<=u)return a(o=h(e.slice(t,r+1)),this.toBBox),o;n||(n=Math.ceil(Math.log(i)/Math.log(u)),u=Math.ceil(i/Math.pow(u,n-1))),(o=h([])).leaf=!1,o.height=n;var c,l,f,s,p=Math.ceil(i/u),d=p*Math.ceil(Math.sqrt(u));for(g(e,t,r,d,this.compareMinX),c=t;c<=r;c+=d)for(g(e,c,f=Math.min(c+d-1,r),p,this.compareMinY),l=c;l<=f;l+=p)s=Math.min(l+p-1,f),o.children.push(this._build(e,l,s,n-1));return a(o,this.toBBox),o},_chooseSubtree:function(e,t,r,n){for(var o,i,a,u,c,l,f,p,d,y;n.push(t),!t.leaf&&n.length-1!==r;){for(f=p=1/0,o=0,i=t.children.length;o<i;o++)c=s(a=t.children[o]),d=e,y=a,(l=(Math.max(y.maxX,d.maxX)-Math.min(y.minX,d.minX))*(Math.max(y.maxY,d.maxY)-Math.min(y.minY,d.minY))-c)<p?(p=l,f=c<f?c:f,u=a):l===p&&c<f&&(f=c,u=a);t=u||t.children[0]}return t},_insert:function(e,t,r){var n=this.toBBox,o=r?e:n(e),i=[],a=this._chooseSubtree(o,this.data,t,i);for(a.children.push(e),c(a,o);t>=0&&i[t].children.length>this._maxEntries;)this._split(i,t),t--;this._adjustParentBBoxes(o,i,t)},_split:function(e,t){var r=e[t],n=r.children.length,o=this._minEntries;this._chooseSplitAxis(r,o,n);var i=this._chooseSplitIndex(r,o,n),u=h(r.children.splice(i,r.children.length-i));u.height=r.height,u.leaf=r.leaf,a(r,this.toBBox),a(u,this.toBBox),t?e[t-1].children.push(u):this._splitRoot(r,u)},_splitRoot:function(e,t){this.data=h([e,t]),this.data.height=e.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var n,o,i,a,c,l,f,p,d,y,h,g,v,b;for(l=f=1/0,n=t;n<=r-t;n++)o=u(e,0,n,this.toBBox),i=u(e,n,r,this.toBBox),d=o,y=i,h=void 0,g=void 0,v=void 0,b=void 0,h=Math.max(d.minX,y.minX),g=Math.max(d.minY,y.minY),v=Math.min(d.maxX,y.maxX),b=Math.min(d.maxY,y.maxY),a=Math.max(0,v-h)*Math.max(0,b-g),c=s(o)+s(i),a<l?(l=a,p=n,f=c<f?c:f):a===l&&c<f&&(f=c,p=n);return p},_chooseSplitAxis:function(e,t,r){var n=e.leaf?this.compareMinX:l,o=e.leaf?this.compareMinY:f;this._allDistMargin(e,t,r,n)<this._allDistMargin(e,t,r,o)&&e.children.sort(n)},_allDistMargin:function(e,t,r,n){e.children.sort(n);var o,i,a=this.toBBox,l=u(e,0,t,a),f=u(e,r-t,r,a),s=p(l)+p(f);for(o=t;o<r-t;o++)i=e.children[o],c(l,e.leaf?a(i):i),s+=p(l);for(o=r-t-1;o>=t;o--)i=e.children[o],c(f,e.leaf?a(i):i),s+=p(f);return s},_adjustParentBBoxes:function(e,t,r){for(var n=r;n>=0;n--)c(t[n],e)},_condense:function(e){for(var t,r=e.length-1;r>=0;r--)0===e[r].children.length?r>0?(t=e[r-1].children).splice(t.indexOf(e[r]),1):this.clear():a(e[r],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}},AC7V:function(e,t,r){var n=r("emib").parseFloat,o=r("EU/P").trim;e.exports=1/n(r("+VNo")+"-0")!=-1/0?function(e){var t=o(String(e),3),r=n(t);return 0===r&&"-"==t.charAt(0)?-0:r}:n},AKIq:function(e,t,r){"use strict";r("MIFh"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0});var n=r("/rf6");t.getCoord=function(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")},t.getCoords=function(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},t.containsNumber=function e(t){if(t.length>1&&n.isNumber(t[0])&&n.isNumber(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return e(t[0]);throw new Error("coordinates must only contain numbers")},t.geojsonType=function(e,t,r){if(!t||!r)throw new Error("type and name required");if(!e||e.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+e.type)},t.featureOf=function(e,t,r){if(!e)throw new Error("No feature passed");if(!r)throw new Error(".featureOf() requires a name");if(!e||"Feature"!==e.type||!e.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+e.geometry.type)},t.collectionOf=function(e,t,r){if(!e)throw new Error("No featureCollection passed");if(!r)throw new Error(".collectionOf() requires a name");if(!e||"FeatureCollection"!==e.type)throw new Error("Invalid input to "+r+", FeatureCollection required");for(var n=0,o=e.features;n<o.length;n++){var i=o[n];if(!i||"Feature"!==i.type||!i.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!i.geometry||i.geometry.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+i.geometry.type)}},t.getGeom=function(e){return"Feature"===e.type?e.geometry:e},t.getType=function(e,t){return"FeatureCollection"===e.type?"FeatureCollection":"GeometryCollection"===e.type?"GeometryCollection":"Feature"===e.type&&null!==e.geometry?e.geometry.type:e.type}},Cg8U:function(e,t,r){"use strict";r("AqHK"),r("v9g0"),r("+ar0"),r("xtjI"),r("JHok"),r("OeI1"),r("pS08"),r("LagC"),r("nWfQ"),r("Dq+y"),r("Ggvi"),r("sc67"),r("MIFh"),r("rzGZ"),r("YbXK"),r("cFtU"),r("pJf4"),r("q8oJ"),r("C9fy"),r("8npG"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=c(r("q1tI")),o=r("1Y5v"),i=c(r("dHJZ")),a=r("wHih"),u=r("KxKs");function c(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O=P({},i.default.defaultProps,{clickRadius:0,featureShape:"circle",editHandleShape:"rect",editHandleStyle:u.editHandleStyle,featureStyle:u.featureStyle,featuresDraggable:!0}),_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(l,e);var t,r,i,u,c=(t=l,function(){var e,r=b(t);if(v()){var n=b(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return h(this,e)});function l(){var e;d(this,l);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return w(g(e=c.call.apply(c,[this].concat(r))),"_getEditHandleState",(function(t,r){var n=e.state,i=n.pointerDownPicks,a=n.hovered;if(r)return r;var u=t.properties.positionIndexes[0],c=null,l=i&&i[0]&&i[0].object;if(l&&l.guideType===o.GUIDE_TYPE.EDIT_HANDLE&&(c=l.index),u===c)return o.RENDER_STATE.SELECTED;if(a&&a.type===o.ELEMENT_TYPE.EDIT_HANDLE){if(a.index===u)return o.RENDER_STATE.HOVERED;if(0===a.index&&t.properties.guideType===o.GUIDE_TYPE.CURSOR_EDIT_HANDLE)return o.RENDER_STATE.CLOSING}return o.RENDER_STATE.INACTIVE})),w(g(e),"_getFeatureRenderState",(function(t,r){var n=e.state.hovered,i=e._getSelectedFeatureIndex();return r||(t===i?o.RENDER_STATE.SELECTED:n&&n.type===o.ELEMENT_TYPE.FEATURE&&n.featureIndex===t?o.RENDER_STATE.HOVERED:o.RENDER_STATE.INACTIVE)})),w(g(e),"_getStyleProp",(function(e,t){return"function"==typeof e?e(t):e})),w(g(e),"_renderEditHandle",(function(t,r){var i=(0,a.getFeatureCoordinates)(t),u=e.project(i&&i[0]);if(!u)return null;var c=t.properties,l=c.featureIndex,f=c.positionIndexes,s=e.props,p=s.clickRadius,d=s.editHandleShape,y=s.editHandleStyle,h=f[0],g=e._getStyleProp(d,{feature:r||t,index:h,featureIndex:l,state:e._getEditHandleState(t)}),v=e._getStyleProp(y,{feature:r||t,index:h,featureIndex:l,shape:g,state:e._getEditHandleState(t)});t.properties.guideType===o.GUIDE_TYPE.CURSOR_EDIT_HANDLE&&(v=P({},v,{pointerEvents:"none"}));var b="".concat(o.ELEMENT_TYPE.EDIT_HANDLE,".").concat(l,".").concat(h);switch(g){case"circle":return n.default.createElement("g",{key:b,transform:"translate(".concat(u[0],", ").concat(u[1],")")},n.default.createElement("circle",{"data-type":o.ELEMENT_TYPE.EDIT_HANDLE,"data-index":h,"data-feature-index":l,key:"".concat(b,".hidden"),style:P({},v,{stroke:"none",fill:"#000",fillOpacity:0}),cx:0,cy:0,r:p}),n.default.createElement("circle",{"data-type":o.ELEMENT_TYPE.EDIT_HANDLE,"data-index":h,"data-feature-index":l,key:b,style:v,cx:0,cy:0}));case"rect":return n.default.createElement("g",{key:b,transform:"translate(".concat(u[0],", ").concat(u[1],")")},n.default.createElement("rect",{"data-type":o.ELEMENT_TYPE.EDIT_HANDLE,"data-index":h,"data-feature-index":l,key:"".concat(b,".hidden"),style:P({},v,{height:p,width:p,fill:"#000",fillOpacity:0}),r:p}),n.default.createElement("rect",{"data-type":o.ELEMENT_TYPE.EDIT_HANDLE,"data-index":h,"data-feature-index":l,key:"".concat(b),style:v}));default:return null}})),w(g(e),"_renderSegment",(function(t,r,i,a){var u=e._getPathInScreenCoords(i,o.GEOJSON_TYPE.LINE_STRING),c=a.radius,l=p(a,["radius"]),f=e.props.clickRadius,s="".concat(o.ELEMENT_TYPE.SEGMENT,".").concat(t,".").concat(r);return n.default.createElement("g",{key:s},n.default.createElement("path",{key:"".concat(s,".hidden"),"data-type":o.ELEMENT_TYPE.SEGMENT,"data-index":r,"data-feature-index":t,style:P({},l,{strokeWidth:f||c,opacity:0}),d:u}),n.default.createElement("path",{key:s,"data-type":o.ELEMENT_TYPE.SEGMENT,"data-index":r,"data-feature-index":t,style:l,d:u}))})),w(g(e),"_renderSegments",(function(t,r,n){for(var o=[],i=0;i<r.length-1;i++)o.push(e._renderSegment(t,i,[r[i],r[i+1]],n));return o})),w(g(e),"_renderFill",(function(t,r,i){var a=e._getPathInScreenCoords(r,o.GEOJSON_TYPE.POLYGON);return n.default.createElement("path",{key:"".concat(o.ELEMENT_TYPE.FILL,".").concat(t),"data-type":o.ELEMENT_TYPE.FILL,"data-feature-index":t,style:P({},i,{stroke:"none"}),d:a})})),w(g(e),"_renderTentativeFeature",(function(t,r){var n=e.props.featureStyle,i=t.geometry.coordinates,a=t.properties.renderType;if(!i||i.length<2)return null;var u,c,l,s=i[0],p=i[i.length-1],d=e._getStyleProp(n,{feature:t,index:null,state:o.RENDER_STATE.UNCOMMITTED}),y=e._renderFill("tentative",i,d);switch(a){case o.RENDER_TYPE.LINE_STRING:case o.RENDER_TYPE.POLYGON:var h=e._getStyleProp(n,{feature:t,state:o.RENDER_STATE.SELECTED});if(r){var g=i[i.length-2];u=e._renderSegments("tentative",i.slice(0,i.length-1),h),c=e._renderSegment("tentative-uncommitted",i.length-2,[g,p],d)}else u=e._renderSegments("tentative",i,h);if(a===o.RENDER_TYPE.POLYGON){var v=e._getStyleProp(n,{feature:t,index:null,state:o.RENDER_STATE.CLOSING});l=e._renderSegment("tentative-closing",i.length-1,[p,s],v)}break;case o.RENDER_TYPE.RECTANGLE:c=e._renderSegments("tentative",[].concat(f(i),[s]),d)}return[y,u,c,l].filter(Boolean)})),w(g(e),"_renderGuides",(function(t){var r=t.tentativeFeature,i=t.editHandles,a=e.getFeatures(),u=i.find((function(e){return e.properties.guideType===o.GUIDE_TYPE.CURSOR_EDIT_HANDLE}));return n.default.createElement("g",{key:"feature-guides"},r&&e._renderTentativeFeature(r,u),i&&i.map((function(t){var n=a&&a[t.properties.featureIndex]||r;return e._renderEditHandle(t,n)})))})),w(g(e),"_renderPoint",(function(t,r,i){var a=e._getFeatureRenderState(r),u=e.props,c=u.featureStyle,l=u.featureShape,f=u.clickRadius,s=e._getStyleProp(l,{feature:t,index:r,state:a}),p=e._getStyleProp(c,{feature:t,index:r,state:a}),d="feature.".concat(r);return"rect"===s?n.default.createElement("g",{key:d,transform:"translate(".concat(i[0][0],", ").concat(i[0][1],")")},n.default.createElement("rect",{"data-type":o.ELEMENT_TYPE.FEATURE,"data-feature-index":r,key:"".concat(d,".hidden"),style:P({},p,{width:f,height:f,fill:"#000",fillOpacity:0})}),n.default.createElement("rect",{"data-type":o.ELEMENT_TYPE.FEATURE,"data-feature-index":r,key:d,style:p})):n.default.createElement("g",{key:"feature.".concat(r),transform:"translate(".concat(i[0][0],", ").concat(i[0][1],")")},n.default.createElement("circle",{"data-type":o.ELEMENT_TYPE.FEATURE,"data-feature-index":r,key:"".concat(d,".hidden"),style:P({},p,{opacity:0}),cx:0,cy:0,r:f}),n.default.createElement("circle",{"data-type":o.ELEMENT_TYPE.FEATURE,"data-feature-index":r,key:d,style:p,cx:0,cy:0}))})),w(g(e),"_renderPath",(function(t,r,i){var a=e.props,u=a.featureStyle,c=a.clickRadius,l=r===e._getSelectedFeatureIndex(),f=e._getFeatureRenderState(r),s=e._getStyleProp(u,{feature:t,index:r,state:f}),p="feature.".concat(r);return l?n.default.createElement("g",{key:p},e._renderSegments(r,t.geometry.coordinates,s)):n.default.createElement("g",{key:p},n.default.createElement("path",{"data-type":o.ELEMENT_TYPE.FEATURE,"data-feature-index":r,key:"".concat(p,".hidden"),style:P({},s,{strokeWidth:c,opacity:0}),d:i}),n.default.createElement("path",{"data-type":o.ELEMENT_TYPE.FEATURE,"data-feature-index":r,key:p,style:s,d:i}))})),w(g(e),"_renderPolygon",(function(t,r,i){var u=e.props.featureStyle,c=r===e._getSelectedFeatureIndex(),l=e._getFeatureRenderState(r),f=e._getStyleProp(u,{feature:t,index:r,state:l}),s="feature.".concat(r);if(c){var p=(0,a.getFeatureCoordinates)(t);return p?n.default.createElement("g",{key:s},e._renderFill(r,p,f),e._renderSegments(r,p,f)):null}return n.default.createElement("path",{"data-type":o.ELEMENT_TYPE.FEATURE,"data-feature-index":r,key:s,style:f,d:i})})),w(g(e),"_renderFeature",(function(t,r){var n=(0,a.getFeatureCoordinates)(t);if(!n||!n.length)return null;var i=t.properties.renderType,u=t.geometry.type,c=e._getPathInScreenCoords(n,u);if(!c)return null;switch(i){case o.RENDER_TYPE.POINT:return e._renderPoint(t,r,c);case o.RENDER_TYPE.LINE_STRING:return e._renderPath(t,r,c);case o.RENDER_TYPE.POLYGON:case o.RENDER_TYPE.RECTANGLE:return e._renderPolygon(t,r,c);default:return null}})),w(g(e),"_renderCanvas",(function(){var t=e.getFeatures(),r=e._modeHandler&&e._modeHandler.getGuides(e.getModeProps());return n.default.createElement("svg",{key:"draw-canvas",width:"100%",height:"100%"},t&&t.length>0&&n.default.createElement("g",{key:"feature-group"},t.map(e._renderFeature)),r&&n.default.createElement("g",{key:"feature-guides"},e._renderGuides(r)))})),w(g(e),"_render",(function(){var t=e._context&&e._context.viewport||{},r=e.props.style,o=t.width,i=t.height;return n.default.createElement("div",{id:"editor",style:P({width:o,height:i},r),ref:function(t){e._containerRef=t}},e._renderCanvas())})),e}return r=l,(i=[{key:"_getPathInScreenCoords",value:function(e,t){var r=this;if(0===e.length)return"";var n=e.map((function(e){return r.project(e)})),i="";switch(t){case o.GEOJSON_TYPE.POINT:return n;case o.GEOJSON_TYPE.LINE_STRING:return i=n.map((function(e){return"".concat(e[0],",").concat(e[1])})).join("L"),"M ".concat(i);case o.GEOJSON_TYPE.POLYGON:return i=n.map((function(e){return"".concat(e[0],",").concat(e[1])})).join("L"),"M ".concat(i," z");default:return null}}}])&&y(r.prototype,i),u&&y(r,u),l}(i.default);t.default=_,w(_,"defaultProps",O)},ELYx:function(e,t,r){var n=r("Drra"),o=r("ltAs"),i=r("qDzq"),a=r("P8UN"),u=r("BjK0"),c=r("1a8y");a(a.S,"Reflect",{get:function e(t,r){var a,l,f=arguments.length<3?t:arguments[2];return c(t)===f?t[r]:(a=n.f(t,r))?i(a,"value")?a.value:void 0!==a.get?a.get.call(f):void 0:u(l=o(t))?e(l,r,f):void 0}})},EMED:function(e,t,r){var n=r("P8UN");n(n.S,"Math",{sign:r("gDik")})},HYY4:function(e,t,r){"use strict";function n(e,t){if(e===t)return!0;if(Array.isArray(e)){var r=e.length;if(!t||t.length!==r)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}return!1}r("MIFh"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,r={};return function(o){for(var i in o)if(!n(o[i],r[i])){t=e(o),r=o;break}return t}}},I2ZF:function(e,t,r){r("q8oJ"),r("C9fy"),r("8npG");for(var n=[],o=0;o<256;++o)n[o]=(o+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,o=n;return[o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]]].join("")}},IaNU:function(e,t,r){"use strict";r("pS08"),r("LagC"),r("nWfQ"),r("MIFh"),r("rzGZ"),r("YbXK"),r("cFtU"),r("pJf4"),r("q8oJ"),r("C9fy"),r("8npG"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.DrawRectangleUsingThreePointsMode=void 0;var n=r("lVFs");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){o=!0,i=c}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(y,e);var t,r,o,a,d=(t=y,function(){var e,r=s(t);if(f()){var n=s(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return l(this,e)});function y(){return u(this,y),d.apply(this,arguments)}return r=y,(o=[{key:"getThreeClickPolygon",value:function(e,t,r,o){var a=i((0,n.generatePointsParallelToLinePoints)(e,t,r),2);return{type:"Feature",geometry:{type:"Polygon",coordinates:[[e,t,a[0],a[1],e]]}}}}])&&c(r.prototype,o),a&&c(r,a),y}(r("mOTV").ThreeClickPolygonMode);t.DrawRectangleUsingThreePointsMode=d},IulE:function(e,t,r){"use strict";r("pS08"),r("LagC"),r("q8oJ"),r("C9fy"),r("8npG"),r("nWfQ"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.DrawRectangleMode=void 0;var n,o=(n=r("UWCo"))&&n.__esModule?n:{default:n};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(d,e);var t,r,n,i,p=(t=d,function(){var e,r=f(t);if(l()){var n=f(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return c(this,e)});function d(){return a(this,d),p.apply(this,arguments)}return r=d,(n=[{key:"getTwoClickPolygon",value:function(e,t,r){return(0,o.default)([e[0],e[1],t[0],t[1]])}}])&&u(r.prototype,n),i&&u(r,i),d}(r("MMIt").TwoClickPolygonMode);t.DrawRectangleMode=p},JeLm:function(e,t,r){"use strict";r("AqHK"),r("pS08"),r("LagC"),r("nWfQ"),r("MIFh"),r("rzGZ"),r("YbXK"),r("cFtU"),r("pJf4"),r("q8oJ"),r("C9fy"),r("8npG"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.DrawPolygonMode=void 0;var n=r("lVFs");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(y,e);var t,r,o,a,d=(t=y,function(){var e,r=s(t);if(f()){var n=s(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return l(this,e)});function y(){return u(this,y),d.apply(this,arguments)}return r=y,(o=[{key:"getGuides",value:function(e){var t,r,n=e.lastPointerMoveEvent,o=this.getClickSequence(),a=n?[n.mapCoords]:[],u={type:"FeatureCollection",features:[]};1===o.length||2===o.length?r={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(i(o),a)}}:o.length>2&&(r={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"Polygon",coordinates:[[].concat(i(o),a,[o[0]])]}}),r&&u.features.push(r);var c=o.map((function(e,t){return{type:"Feature",properties:{guideType:"editHandle",editHandleType:"existing",featureIndex:-1,positionIndexes:[t]},geometry:{type:"Point",coordinates:e}}}));return(t=u.features).push.apply(t,i(c)),u}},{key:"handleClick",value:function(e,t){var r=e.picks,o=(0,n.getPickedEditHandle)(r),a=!1;o||(this.addClickSequence(e),a=!0);var u=this.getClickSequence();if(u.length>2&&o&&Array.isArray(o.properties.positionIndexes)&&(0===o.properties.positionIndexes[0]||o.properties.positionIndexes[0]===u.length-1)){var c={type:"Polygon",coordinates:[[].concat(i(u),[u[0]])]};this.resetClickSequence();var l=this.getAddFeatureOrBooleanPolygonAction(c,t);l&&t.onEdit(l)}else a&&t.onEdit({updatedData:t.data,editType:"addTentativePosition",editContext:{position:e.mapCoords}})}},{key:"handlePointerMove",value:function(e,t){e.mapCoords,t.onUpdateCursor("cell")}}])&&c(r.prototype,o),a&&c(r,a),y}(r("4R+2").GeoJsonEditMode);t.DrawPolygonMode=d},Jgsv:function(e,t,r){"use strict";r.r(t);var n=r("6e3H"),o=r("gbZC"),i=r("vhGx"),a=r("bRXx"),u=r("KHcG");r("sc67"),r("JHok"),r("AqHK"),r("MIFh");function c(e){return!!e&&e.constructor===Object}function l(e,t,r){if(null!==e)for(var n,o,i,a,u,c,f,s,p=0,d=0,y=e.type,h="FeatureCollection"===y,g="Feature"===y,v=h?e.features.length:1,b=0;b<v;b++){u=(s=!!(f=h?e.features[b].geometry:g?e.geometry:e)&&"GeometryCollection"===f.type)?f.geometries.length:1;for(var m=0;m<u;m++){var E=0,P=0;if(null!==(a=s?f.geometries[m]:f)){c=a.coordinates;var w=a.type;switch(p=!r||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===t(c,d,b,E,P))return!1;d++,E++;break;case"LineString":case"MultiPoint":for(n=0;n<c.length;n++){if(!1===t(c[n],d,b,E,P))return!1;d++,"MultiPoint"===w&&E++}"LineString"===w&&E++;break;case"Polygon":case"MultiLineString":for(n=0;n<c.length;n++){for(o=0;o<c[n].length-p;o++){if(!1===t(c[n][o],d,b,E,P))return!1;d++}"MultiLineString"===w&&E++,"Polygon"===w&&P++}"Polygon"===w&&E++;break;case"MultiPolygon":for(n=0;n<c.length;n++){for("MultiPolygon"===w&&(P=0),o=0;o<c[n].length;o++){for(i=0;i<c[n][o].length-p;i++){if(!1===t(c[n][o][i],d,b,E,P))return!1;d++}P++}E++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===l(a.geometries[n],t,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}t.default=function(e,t,r){if(!c(r=r||{}))throw new Error("options is invalid");var f=r.pivot,s=r.mutate;if(!e)throw new Error("geojson is required");if(null==t||isNaN(t))throw new Error("angle is required");return 0===t||(f||(f=Object(n.a)(e)),!1!==s&&void 0!==s||(e=Object(u.a)(e)),l(e,(function(e){var r=Object(o.a)(f,e)+t,n=Object(i.a)(f,e),u=function(e){if(!e)throw new Error("coords is required");if("Feature"===e.type&&null!==e.geometry)return e.geometry.coordinates;if(e.coordinates)return e.coordinates;if(Array.isArray(e))return e;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}(Object(a.a)(f,n,r));e[0]=u[0],e[1]=u[1]}))),e}},KER3:function(e,t,r){"use strict";r("AqHK"),r("YBKJ"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("1Y5v"),o=r("wHih");function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"_tentativeFeature",void 0),a(this,"_editHandles",void 0),a(this,"getTentativeFeature",(function(){return t._tentativeFeature})),a(this,"getEditHandles",(function(){return t._editHandles})),a(this,"setTentativeFeature",(function(e){t._tentativeFeature=e})),a(this,"getSelectedFeature",(function(e,t){var r=e.data,n=e.selectedIndexes,i=r.getObject(),a=i&&i.features,u=(0,o.isNumeric)(t)?Number(t):n&&n[0];return a&&a[u]})),this._tentativeFeature=null,this._editHandles=null}var t,r,u;return t=e,(r=[{key:"handlePan",value:function(e,t){}},{key:"handleClick",value:function(e,t){}},{key:"handleDblClick",value:function(e,t){}},{key:"handlePointerMove",value:function(e,t){}},{key:"handleStartDragging",value:function(e,t){}},{key:"handleStopDragging",value:function(e,t){}},{key:"getGuides",value:function(e){return null}},{key:"getTooltips",value:function(e){return[]}},{key:"handleDragging",value:function(e,t){}},{key:"getEditHandlesFromFeature",value:function(e,t){var r=(0,o.getFeatureCoordinates)(e);return r?r.map((function(r,o){return{type:"Feature",properties:{renderType:e.properties.renderType,guideType:n.GUIDE_TYPE.EDIT_HANDLE,featureIndex:t,positionIndexes:[o]},geometry:{type:n.GEOJSON_TYPE.POINT,coordinates:[r]}}})):null}}])&&i(t.prototype,r),u&&i(t,u),e}();t.default=u},KHcG:function(e,t,r){"use strict";r("AqHK"),r("rzGZ"),r("Dq+y"),r("8npG"),r("Ggvi"),r("JHok");function n(e){var t={type:"Feature"};return Object.keys(e).forEach((function(r){switch(r){case"type":case"properties":case"geometry":return;default:t[r]=e[r]}})),t.properties=function e(t){var r={};return t?(Object.keys(t).forEach((function(n){var o=t[n];"object"==typeof o?null===o?r[n]=null:o.length?r[n]=o.map((function(e){return e})):r[n]=e(o):r[n]=o})),r):r}(e.properties),t.geometry=o(e.geometry),t}function o(e){var t={type:e.type};return e.bbox&&(t.bbox=e.bbox),"GeometryCollection"===e.type?(t.geometries=e.geometries.map((function(e){return o(e)})),t):(t.coordinates=function e(t){if("object"!=typeof t[0])return t.slice();return t.map((function(t){return e(t)}))}(e.coordinates),t)}t.a=function(e){if(!e)throw new Error("geojson is required");switch(e.type){case"Feature":return n(e);case"FeatureCollection":return function(e){var t={type:"FeatureCollection"};return Object.keys(e).forEach((function(r){switch(r){case"type":case"features":return;default:t[r]=e[r]}})),t.features=e.features.map((function(e){return n(e)})),t}(e);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return o(e);default:throw new Error("unknown GeoJSON type")}}},KMcD:function(e,t,r){"use strict";r.r(t);var n=r("A/RR"),o=r("O3R+"),i=r.n(o),a=r("/rf6"),u=r("AKIq"),c=r("cWyK");function l(e){switch(e.type){case"Polygon":return i()(e)>1?e:null;case"MultiPolygon":var t=[];if(Object(c.flattenEach)(e,(function(e){i()(e)>1&&t.push(e.geometry.coordinates)})),t.length)return{type:"MultiPolygon",coordinates:t}}}t.default=function(e,t){var r=Object(u.getGeom)(e),o=Object(u.getGeom)(t),i=e.properties||{};if(r=l(r),o=l(o),!r)return null;if(!o)return Object(a.feature)(r,i);var c=n.diff(r.coordinates,o.coordinates);return 0===c.length?null:1===c.length?Object(a.polygon)(c[0],i):Object(a.multiPolygon)(c,i)}},KV4q:function(e,t,r){"use strict";function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r("zGcK"),r("+ar0"),r("xtjI"),r("JHok"),r("OeI1"),r("Dq+y"),r("Ggvi"),r("MIFh"),r("rzGZ"),r("m210"),r("4DPX"),r("YbXK"),r("cFtU"),r("pJf4"),r("q8oJ"),r("C9fy"),r("8npG"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.ImmutableFeatureCollection=void 0;var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"featureCollection",void 0),this.featureCollection=t}var t,r,o;return t=e,(r=[{key:"getObject",value:function(){return this.featureCollection}},{key:"replacePosition",value:function(e,t,r){var n=this.featureCollection.features[e].geometry,o="Polygon"===n.type||"MultiPolygon"===n.type,i=a({},n,{coordinates:s(n.coordinates,t,r,o)});return this.replaceGeometry(e,i)}},{key:"removePosition",value:function(e,t){var r=this.featureCollection.features[e].geometry;if("Point"===r.type)throw Error("Can't remove a position from a Point or there'd be nothing left");if("MultiPoint"===r.type&&r.coordinates.length<2)throw Error("Can't remove the last point of a MultiPoint or there'd be nothing left");if("LineString"===r.type&&r.coordinates.length<3)throw Error("Can't remove position. LineString must have at least two positions");if("Polygon"===r.type&&r.coordinates[0].length<5&&Array.isArray(t)&&0===t[0])throw Error("Can't remove position. Polygon's outer ring must have at least four positions");if("MultiLineString"===r.type&&1===r.coordinates.length&&r.coordinates[0].length<3)throw Error("Can't remove position. MultiLineString must have at least two positions");if("MultiPolygon"===r.type&&1===r.coordinates.length&&r.coordinates[0][0].length<5&&Array.isArray(t)&&0===t[0]&&0===t[1])throw Error("Can't remove position. MultiPolygon's outer ring must have at least four positions");var n="Polygon"===r.type||"MultiPolygon"===r.type,o=a({},r,{coordinates:p(r.coordinates,t,n)});return function(e){switch(e.type){case"Polygon":!function(e){for(var t=e.coordinates,r=1;r<t.length;r++)y(t,r)&&r--}(e);break;case"MultiLineString":!function(e){for(var t=0;t<e.coordinates.length;t++)1===e.coordinates[t].length&&(e.coordinates.splice(t,1),t--)}(e);break;case"MultiPolygon":!function(e){for(var t=0;t<e.coordinates.length;t++){var r=e.coordinates[t];r[0].length<=3&&(e.coordinates.splice(t,1),t--);for(var n=1;n<r.length;n++)y(r,n)&&n--}}(e)}}(o),this.replaceGeometry(e,o)}},{key:"addPosition",value:function(e,t,r){var n=this.featureCollection.features[e].geometry;if("Point"===n.type)throw new Error("Unable to add a position to a Point feature");var o="Polygon"===n.type||"MultiPolygon"===n.type,i=a({},n,{coordinates:d(n.coordinates,t,r,o)});return this.replaceGeometry(e,i)}},{key:"replaceGeometry",value:function(t,r){var o=a({},this.featureCollection.features[t],{geometry:r});return new e(a({},this.featureCollection,{features:[].concat(n(this.featureCollection.features.slice(0,t)),[o],n(this.featureCollection.features.slice(t+1)))}))}},{key:"addFeature",value:function(e){return this.addFeatures([e])}},{key:"addFeatures",value:function(t){return new e(a({},this.featureCollection,{features:[].concat(n(this.featureCollection.features),n(t))}))}},{key:"deleteFeature",value:function(e){return this.deleteFeatures([e])}},{key:"deleteFeatures",value:function(t){var r=n(this.featureCollection.features);t.sort();for(var o=t.length-1;o>=0;o--){var i=t[o];i>=0&&i<r.length&&r.splice(i,1)}return new e(a({},this.featureCollection,{features:r}))}}])&&u(t.prototype,r),o&&u(t,o),e}();function f(e,t){if(2===e.length&&3===t.length){var r=t[2];return[e[0],e[1],r]}return e}function s(e,t,r,o){if(!t)return e;if(0===t.length)return f(r,e);if(1===t.length){var i=[].concat(n(e.slice(0,t[0])),[f(r,e[t[0]])],n(e.slice(t[0]+1)));return!o||0!==t[0]&&t[0]!==e.length-1||(i[0]=f(r,e[0]),i[e.length-1]=f(r,e[0])),i}return[].concat(n(e.slice(0,t[0])),[s(e[t[0]],t.slice(1,t.length),r,o)],n(e.slice(t[0]+1)))}function p(e,t,r){if(!t)return e;if(0===t.length)throw Error("Must specify the index of the position to remove");if(1===t.length){var o=[].concat(n(e.slice(0,t[0])),n(e.slice(t[0]+1)));return!r||0!==t[0]&&t[0]!==e.length-1||(0===t[0]?o[o.length-1]=o[0]:t[0]===e.length-1&&(o[0]=o[o.length-1])),o}return[].concat(n(e.slice(0,t[0])),[p(e[t[0]],t.slice(1,t.length),r)],n(e.slice(t[0]+1)))}function d(e,t,r,o){if(!t)return e;if(0===t.length)throw Error("Must specify the index of the position to remove");return 1===t.length?[].concat(n(e.slice(0,t[0])),[r],n(e.slice(t[0]))):[].concat(n(e.slice(0,t[0])),[d(e[t[0]],t.slice(1,t.length),r,o)],n(e.slice(t[0]+1)))}function y(e,t){return e[t].length<=3&&(e.splice(t,1),!0)}t.ImmutableFeatureCollection=l},Klu8:function(e,t,r){var n=r("P8UN");n(n.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},KxKs:function(e,t,r){"use strict";r("n0hJ"),r("+ar0"),r("xtjI"),r("JHok"),r("OeI1"),r("4DPX"),r("rzGZ"),r("Dq+y"),r("8npG"),r("Ggvi"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.featureStyle=function(e){var t=e.feature,r=e.state,o=t.properties.renderType,a=null;switch(r){case n.RENDER_STATE.SELECTED:a=i({},c);break;case n.RENDER_STATE.HOVERED:a=i({},l);break;case n.RENDER_STATE.UNCOMMITTED:case n.RENDER_STATE.CLOSING:a=i({},f);break;case n.RENDER_STATE.INACTIVE:a=i({},s);break;default:a=i({},p)}switch(o){case n.RENDER_TYPE.POINT:a.r=8;break;case n.RENDER_TYPE.LINE_STRING:a.fill="none";break;case n.RENDER_TYPE.POLYGON:r===n.RENDER_STATE.CLOSING&&(a.strokeDasharray="4,2");break;case n.RENDER_TYPE.RECTANGLE:r===n.RENDER_STATE.UNCOMMITTED&&(a.strokeDasharray="4,2")}return a},t.editHandleStyle=function(e){e.feature;var t=e.shape,r=(e.index,e.state),o={};switch(r){case n.RENDER_STATE.SELECTED:o=i({},c);break;case n.RENDER_STATE.HOVERED:o=i({},l);break;case n.RENDER_STATE.UNCOMMITTED:case n.RENDER_STATE.CLOSING:o=i({},f);break;case n.RENDER_STATE.INACTIVE:o=i({},s);break;default:o=i({},p)}switch(t){case"circle":o.r=8;break;case"rect":o=i({},o,{},u)}return o};var n=r("1Y5v");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u={stroke:"#7ac943",strokeWidth:2,x:-6,y:-6,height:12,width:12},c={stroke:"#7ac943",strokeWidth:2,fill:"#ffff00",fillOpacity:.7},l={stroke:"#7ac943",strokeWidth:2,fill:"#7ac943",fillOpacity:.5},f={stroke:"#a7a7a7",strokeWidth:2,fill:"#a9a9a9",fillOpacity:.3},s=f,p={stroke:"#000000",strokeWidth:2,fill:"#a9a9a9",fillOpacity:.1}},LNFK:function(e,t,r){"use strict";r("pS08"),r("LagC"),r("q8oJ"),r("C9fy"),r("8npG"),r("nWfQ"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(r("xDdU")),o=r("1Y5v");function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(i,e);var t,r=(t=i,function(){var e,r=s(t);if(f()){var n=s(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return c(this,e)});function i(){var e;u(this,i);for(var t=arguments.length,a=new Array(t),c=0;c<t;c++)a[c]=arguments[c];return d(l(e=r.call.apply(r,[this].concat(a))),"handleClick",(function(e,t){var r={type:"Feature",properties:{id:(0,n.default)(),renderType:o.RENDER_TYPE.POINT},geometry:{type:o.GEOJSON_TYPE.POINT,coordinates:[e.mapCoords]}},i=t.data.addFeature(r).getObject();t.onEdit({editType:o.EDIT_TYPE.ADD_FEATURE,updatedData:i,editContext:null})})),e}return i}(i(r("KER3")).default);t.default=y},MMIt:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r("pS08"),r("LagC"),r("q8oJ"),r("C9fy"),r("8npG"),r("nWfQ"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.TwoClickPolygonMode=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(p,e);var t,r,n,f,s=(t=p,function(){var e,r=c(t);if(u()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)});function p(){return o(this,p),s.apply(this,arguments)}return r=p,(n=[{key:"handleClick",value:function(e,t){t.modeConfig&&t.modeConfig.dragToDraw||(this.addClickSequence(e),this.checkAndFinishPolygon(t))}},{key:"handleStartDragging",value:function(e,t){t.modeConfig&&t.modeConfig.dragToDraw&&(this.addClickSequence(e),e.cancelPan())}},{key:"handleStopDragging",value:function(e,t){t.modeConfig&&t.modeConfig.dragToDraw&&(this.addClickSequence(e),this.checkAndFinishPolygon(t))}},{key:"checkAndFinishPolygon",value:function(e){var t=this.getClickSequence(),r=this.getTentativeGuide(e);if(t.length>1&&r&&"Polygon"===r.geometry.type){var n=this.getAddFeatureOrBooleanPolygonAction(r.geometry,e);this.resetClickSequence(),n&&e.onEdit(n)}}},{key:"getGuides",value:function(e){var t=e.lastPointerMoveEvent,r=e.modeConfig,n=this.getClickSequence(),o={type:"FeatureCollection",features:[]};if(0===n.length)return o;var i=n[0],a=t.mapCoords,u=this.getTwoClickPolygon(i,a,r);return u&&o.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:u.geometry}),o}},{key:"getTwoClickPolygon",value:function(e,t,r){return null}},{key:"handlePointerMove",value:function(e,t){t.onUpdateCursor("cell")}}])&&i(r.prototype,n),f&&i(r,f),p}(r("4R+2").GeoJsonEditMode);t.TwoClickPolygonMode=f},MYR2:function(e,t,r){"use strict";r("AqHK"),r("OeI1"),r("ELYx"),r("LagC"),r("pS08"),r("nWfQ"),r("MIFh"),r("rzGZ"),r("YbXK"),r("cFtU"),r("pJf4"),r("q8oJ"),r("C9fy"),r("8npG"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r("1Y5v"),i=(n=r("zx9D"))&&n.__esModule?n:{default:n},a=r("wHih");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,r){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(l,e);var t,r,n,i,u=(t=l,function(){var e,r=v(t);if(y()){var n=v(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return p(this,e)});function l(){var e;f(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return b(d(e=u.call.apply(u,[this].concat(r))),"handleClick",(function(t,r){g(v(l.prototype),"handleClick",d(e)).call(d(e),t,r);var n=t.picks&&t.picks[0]&&t.picks[0].object,i=r.selectedIndexes&&r.selectedIndexes[0];if(n&&n.featureIndex===i){var u=n.featureIndex,c=n.index,f=e.getSelectedFeature(r,u);if(f&&(f.geometry.type===o.RENDER_TYPE.POLYGON||f.geometry.type===o.RENDER_TYPE.LINE_STRING)&&n.type===o.ELEMENT_TYPE.SEGMENT){var s=(0,a.getFeatureCoordinates)(f);if(!s)return;var p=(c+1)%s.length,y=f.geometry.type===o.RENDER_TYPE.POLYGON?[0,p]:[p],h=e._getPointOnSegment(f,n,t.mapCoords),b=r.data.addPosition(u,y,h).getObject();r.onEdit({editType:o.EDIT_TYPE.ADD_POSITION,updatedData:b,editContext:[{featureIndex:u,editHandleIndex:p,screenCoords:r.viewport&&r.viewport.project(h),mapCoords:h}]})}}})),b(d(e),"_handleDragging",(function(t,r){var n=r.onEdit,i=e.getSelectedFeature(r),u=t.isDragging,c=t.pointerDownPicks,l=t.screenCoords,f=r.lastPointerMoveEvent,s=c&&c[0]&&c[0].object;if(s&&(0,a.isNumeric)(s.featureIndex)){var p=s.index,d=u?o.EDIT_TYPE.MOVE_POSITION:o.EDIT_TYPE.FINISH_MOVE_POSITION;switch(s.type){case o.ELEMENT_TYPE.FEATURE:case o.ELEMENT_TYPE.FILL:case o.ELEMENT_TYPE.SEGMENT:if(!r.featuresDraggable)break;var y=l[0]-f.screenCoords[0],h=l[1]-f.screenCoords[1];n({editType:d,updatedData:e._updateFeature(r,"feature",{dx:y,dy:h}),editContext:null});break;case o.ELEMENT_TYPE.EDIT_HANDLE:var g=i.properties.renderType===o.RENDER_TYPE.RECTANGLE?"rectangle":"editHandle";n({editType:d,updatedData:e._updateFeature(r,g,{editHandleIndex:p,mapCoords:t.mapCoords}),editContext:null})}}})),b(d(e),"handlePointerMove",(function(t,r){e.getSelectedFeature(r)&&t.isDragging&&e._handleDragging(t,r)})),b(d(e),"_updateFeature",(function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.data,u=t.selectedIndexes,l=t.viewport,f=u&&u[0],s=e.getSelectedFeature(t,f),p=null,d=(0,a.getFeatureCoordinates)(s);if(!d)return null;var y=c(d);switch(r){case"editHandle":var h=s.geometry.type===o.GEOJSON_TYPE.POLYGON?[0,n.editHandleIndex]:[n.editHandleIndex];return i.replacePosition(f,h,n.mapCoords).getObject();case"feature":var g=n.dx,v=n.dy;return y=y.map((function(e){var t=l&&l.project(e);return t?(t[0]+=g,t[1]+=v,l&&l.unproject(t)):null})).filter(Boolean),p={type:s.geometry.type,coordinates:s.geometry.type===o.GEOJSON_TYPE.POLYGON?[y]:y},i.replaceGeometry(f,p).getObject();case"rectangle":return y=(0,a.updateRectanglePosition)(s,n.editHandleIndex,n.mapCoords),p={type:o.GEOJSON_TYPE.POLYGON,coordinates:y},i.replaceGeometry(f,p).getObject();default:return i&&i.getObject()}})),b(d(e),"_getCursorEditHandle",(function(t,r){var n=t.isDragging,i=t.picks,u=i&&i[0]&&i[0].object;if(!u||!(0,a.isNumeric)(u.featureIndex)||u.type!==o.ELEMENT_TYPE.SEGMENT)return null;if(n||r.properties.renderType!==o.GEOJSON_TYPE.POLYGON&&r.properties.renderType!==o.GEOJSON_TYPE.LINE_STRING)return null;var c=e._getPointOnSegment(r,u,t.mapCoords);return c?{type:"Feature",properties:{guideType:o.GUIDE_TYPE.CURSOR_EDIT_HANDLE,renderType:r.properties.renderType,positionIndexes:[null]},geometry:{type:o.GEOJSON_TYPE.POINT,coordinates:[c]}}:null})),b(d(e),"getGuides",(function(t){var r=e.getSelectedFeature(t),n=t.selectedIndexes&&t.selectedIndexes[0];if(!r||r.geometry.type===o.GEOJSON_TYPE.POINT)return null;var i=t.lastPointerMoveEvent,a=e.getEditHandlesFromFeature(r,n)||[];return e._getCursorEditHandle(i,r)&&a.push(e._getCursorEditHandle(i,r)),{editHandles:a.length?a:null}})),e}return r=l,(n=[{key:"handleStopDragging",value:function(e,t){var r=e.picks&&e.picks[0]&&e.picks[0].object;if(r&&(0,a.isNumeric)(r.featureIndex))switch(r.type){case o.ELEMENT_TYPE.FEATURE:case o.ELEMENT_TYPE.FILL:case o.ELEMENT_TYPE.EDIT_HANDLE:this._handleDragging(e,t)}}},{key:"_getPointOnSegment",value:function(e,t,r){var n=(0,a.getFeatureCoordinates)(e);if(!n)return null;var o=t.index,i=t.index+1;return(0,a.findClosestPointOnLineSegment)(n[o],n[i],r)}}])&&s(r.prototype,n),i&&s(r,i),l}(i.default);t.default=m},MoSN:function(e,t,r){"use strict";r("rzGZ"),r("Dq+y"),r("8npG"),r("Ggvi"),r("JHok"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0});var n={Editor:!0,RenderTypes:!0,RenderStates:!0,GEOJSON_TYPE:!0,RENDER_TYPE:!0,RENDER_STATE:!0,ELEMENT_TYPE:!0,EDIT_TYPE:!0};Object.defineProperty(t,"Editor",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"RenderTypes",{enumerable:!0,get:function(){return a.RENDER_TYPE}}),Object.defineProperty(t,"RenderStates",{enumerable:!0,get:function(){return a.RENDER_STATE}}),Object.defineProperty(t,"GEOJSON_TYPE",{enumerable:!0,get:function(){return a.GEOJSON_TYPE}}),Object.defineProperty(t,"RENDER_TYPE",{enumerable:!0,get:function(){return a.RENDER_TYPE}}),Object.defineProperty(t,"RENDER_STATE",{enumerable:!0,get:function(){return a.RENDER_STATE}}),Object.defineProperty(t,"ELEMENT_TYPE",{enumerable:!0,get:function(){return a.ELEMENT_TYPE}}),Object.defineProperty(t,"EDIT_TYPE",{enumerable:!0,get:function(){return a.EDIT_TYPE}});var o,i=(o=r("Cg8U"))&&o.__esModule?o:{default:o},a=r("1Y5v"),u=r("XlYV");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var c=r("tHzR");Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}))},"Mu+0":function(e,t,r){"use strict";r("MIFh"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0});var n=r("Yeox"),o=r("/rf6");t.default=function(e,t,r){void 0===r&&(r={});for(var i=r.steps||64,a=r.properties?r.properties:!Array.isArray(e)&&"Feature"===e.type&&e.properties?e.properties:{},u=[],c=0;c<i;c++)u.push(n.default(e,t,-360*c/i,r).geometry.coordinates);return u.push(u[0]),o.polygon([u],a)}},Noqf:function(e,t,r){"use strict";r("gu/5"),r("eoYm"),r("pS08"),r("LagC"),r("nWfQ"),r("pJf4"),r("q8oJ"),r("C9fy"),r("8npG"),r("MIFh"),r("YbXK"),r("cFtU"),r("rzGZ"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.ExtrudeMode=void 0;var n,o=(n=r("qhoL"))&&n.__esModule?n:{default:n},i=r("lVFs"),a=r("9/d+"),u=r("KV4q");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){o=!0,i=c}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(s,e);var t,r,n,a,c=(t=s,function(){var e,r=b(t);if(v()){var n=b(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return h(this,e)});function s(){var e;d(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return E(g(e=c.call.apply(c,[this].concat(r))),"isPointAdded",!1),e}return r=s,(n=[{key:"handleDragging",value:function(e,t){var r=(0,i.getPickedEditHandle)(e.pointerDownPicks);if(r){var n=r.properties.featureIndex,o=r.properties.positionIndexes,a=this.coordinatesSize(o,n,t.data);o=this.isPointAdded?this.nextPositionIndexes(o,a):o;var c=this.getPointForPositionIndexes(this.prevPositionIndexes(o,a),n,t.data),l=this.getPointForPositionIndexes(o,n,t.data);if(c&&l){var s=f((0,i.generatePointsParallelToLinePoints)(c,l,e.mapCoords),2),p=s[0],d=s[1],y=new u.ImmutableFeatureCollection(t.data).replacePosition(n,this.prevPositionIndexes(o,a),d).replacePosition(n,o,p).getObject();t.onEdit({updatedData:y,editType:"extruding",editContext:{featureIndexes:[n],positionIndexes:this.nextPositionIndexes(o,a),position:p}}),e.cancelPan()}}}},{key:"handleStartDragging",value:function(e,t){var r=t.selectedIndexes,n=(0,i.getPickedIntermediateEditHandle)(e.picks);if(r.length&&n){var o=n.properties,a=o.positionIndexes,c=o.featureIndex,l=this.coordinatesSize(a,c,t.data),f=this.getPointForPositionIndexes(this.prevPositionIndexes(a,l),c,t.data),s=this.getPointForPositionIndexes(a,c,t.data);if(f&&s){var p=new u.ImmutableFeatureCollection(t.data);this.isOrthogonal(a,c,l,t.data)||(p=p.addPosition(c,a,s)),this.isOrthogonal(this.prevPositionIndexes(a,l),c,l,t.data)||(p=p.addPosition(c,a,f),this.isPointAdded=!0),t.onEdit({updatedData:p.getObject(),editType:"startExtruding",editContext:{featureIndexes:[c],positionIndexes:a,position:f}})}}}},{key:"handleStopDragging",value:function(e,t){var r=t.selectedIndexes,n=(0,i.getPickedEditHandle)(e.pointerDownPicks);if(r.length&&n){var o=n.properties.featureIndex,a=n.properties.positionIndexes,c=this.coordinatesSize(a,o,t.data);a=this.isPointAdded?this.nextPositionIndexes(a,c):a;var l=this.getPointForPositionIndexes(this.prevPositionIndexes(a,c),o,t.data),s=this.getPointForPositionIndexes(a,o,t.data);if(l&&s){var p=f((0,i.generatePointsParallelToLinePoints)(l,s,e.mapCoords),2),d=p[0],y=p[1],h=new u.ImmutableFeatureCollection(t.data).replacePosition(o,this.prevPositionIndexes(a,c),y).replacePosition(o,a,d).getObject();t.onEdit({updatedData:h,editType:"extruded",editContext:{featureIndexes:[o],positionIndexes:a,position:d}})}}this.isPointAdded=!1}},{key:"coordinatesSize",value:function(e,t,r){var n=r.features,o=0;if(Array.isArray(e)){var i=n[t].geometry.coordinates;if(3===e.length){var a=f(e,2),u=a[0],c=a[1];i.length&&i[u].length&&(o=i[u][c].length)}else{var l=f(e,1)[0];i.length&&i[l].length&&(o=i[l].length)}}return o}},{key:"getBearing",value:function(e,t){var r=(0,o.default)(e,t);return r<0?Math.floor(360+r):Math.floor(r)}},{key:"isOrthogonal",value:function(e,t,r,n){if(!Array.isArray(e))return!1;e[e.length-1]===r-1&&(e[e.length-1]=0);var o=this.getPointForPositionIndexes(this.prevPositionIndexes(e,r),t,n),i=this.getPointForPositionIndexes(this.nextPositionIndexes(e,r),t,n),a=this.getPointForPositionIndexes(e,t,n),u=this.getBearing(a,o),c=this.getBearing(a,i);return[89,90,91,269,270,271].includes(Math.abs(u-c))}},{key:"nextPositionIndexes",value:function(e,t){if(!Array.isArray(e))return[];var r=l(e);return r.length&&(r[r.length-1]=r[r.length-1]===t-1?0:r[r.length-1]+1),r}},{key:"prevPositionIndexes",value:function(e,t){if(!Array.isArray(e))return[];var r=l(e);return r.length&&(r[r.length-1]=0===r[r.length-1]?t-2:r[r.length-1]-1),r}},{key:"getPointForPositionIndexes",value:function(e,t,r){var n,o=r.features;if(Array.isArray(e)){var i=o[t].geometry.coordinates;if(3===e.length){var a=f(e,3),u=a[0],c=a[1],l=a[2];i.length&&i[u].length&&(n=i[u][c][l])}else{var s=f(e,2),p=s[0],d=s[1];i.length&&i[p].length&&(n=i[p][d])}}return n}}])&&y(r.prototype,n),a&&y(r,a),s}(a.ModifyMode);t.ExtrudeMode=P},"O3R+":function(e,t,r){"use strict";r("R48M"),Object.defineProperty(t,"__esModule",{value:!0});var n=r("cWyK");function o(e){var t=0;if(e&&e.length>0){t+=Math.abs(i(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(i(e[r]))}return t}function i(e){var t,r,n,o,i,u,c=0,l=e.length;if(l>2){for(u=0;u<l;u++)u===l-2?(n=l-2,o=l-1,i=0):u===l-1?(n=l-1,o=0,i=1):(n=u,o=u+1,i=u+2),t=e[n],r=e[o],c+=(a(e[i][0])-a(t[0]))*Math.sin(a(r[1]));c=6378137*c*6378137/2}return c}function a(e){return e*Math.PI/180}t.default=function(e){return n.geomReduce(e,(function(e,t){return e+function(e){var t,r=0;switch(e.type){case"Polygon":return o(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)r+=o(e.coordinates[t]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)}),0)}},PfwA:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r("pS08"),r("LagC"),r("nWfQ"),r("pJf4"),r("q8oJ"),r("C9fy"),r("8npG"),r("MIFh"),r("YbXK"),r("cFtU"),r("rzGZ"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.CompositeMode=void 0;var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(y,e);var t,r,n,a,d=(t=y,function(){var e,r=s(t);if(f()){var n=s(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return c(this,e)});function y(e){var t,r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),t=d.call(this),r=l(t),o=void 0,(n="_modes")in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,t._modes=e,t}return r=y,(n=[{key:"_coalesce",value:function(e){for(var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=0;n<this._modes.length&&(t=e(this._modes[n]),!(r?r(t):t));n++);return t}},{key:"handleClick",value:function(e,t){this._coalesce((function(r){return r.handleClick(e,t)}))}},{key:"handlePointerMove",value:function(e,t){return this._coalesce((function(r){return r.handlePointerMove(e,t)}))}},{key:"handleStartDragging",value:function(e,t){return this._coalesce((function(r){return r.handleStartDragging(e,t)}))}},{key:"handleStopDragging",value:function(e,t){return this._coalesce((function(r){return r.handleStopDragging(e,t)}))}},{key:"handleDragging",value:function(e,t){return this._coalesce((function(r){return r.handleDragging(e,t)}))}},{key:"getGuides",value:function(e){var t,r=[],n=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=i(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,a=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}(this._modes);try{for(n.s();!(t=n.n()).done;){var a=t.value;r.push.apply(r,o(a.getGuides(e).features))}}catch(u){n.e(u)}finally{n.f()}return{type:"FeatureCollection",features:r}}}])&&u(r.prototype,n),a&&u(r,a),y}(r("4R+2").GeoJsonEditMode);t.CompositeMode=d},Qnnh:function(e,t,r){"use strict";r("R48M"),Object.defineProperty(t,"__esModule",{value:!0});var n=r("A/RR"),o=r("AKIq"),i=r("/rf6");t.default=function(e,t,r){void 0===r&&(r={});var a=o.getGeom(e).coordinates,u=o.getGeom(t).coordinates,c=n.union(a,u);return 0===c.length?null:1===c.length?i.polygon(c[0],r.properties):i.multiPolygon(c,r.properties)}},RJX9:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r("pS08"),r("LagC"),r("q8oJ"),r("C9fy"),r("8npG"),r("nWfQ"),r("ELYx"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.DuplicateMode=void 0;var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(d,e);var t,r,n,s,p=(t=d,function(){var e,r=l(t);if(c()){var n=l(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return u(this,e)});function d(){return o(this,d),p.apply(this,arguments)}return r=d,(n=[{key:"handleStartDragging",value:function(e,t){a(l(d.prototype),"handleStartDragging",this).call(this,e,t),this._geometryBeforeTranslate&&t.onEdit(this.getAddManyFeaturesAction(this._geometryBeforeTranslate,t.data))}},{key:"updateCursor",value:function(e){this._isTranslatable?e.onUpdateCursor("copy"):e.onUpdateCursor(null)}}])&&i(r.prototype,n),s&&i(r,s),d}(r("iJqO").TranslateMode);t.DuplicateMode=s},RZZ2:function(e,t,r){"use strict";r("R48M"),Object.defineProperty(t,"__esModule",{value:!0});var n=r("AKIq");function o(e,t,r){var n=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var o=0,i=t.length-1;o<t.length;i=o++){var a=t[o][0],u=t[o][1],c=t[i][0],l=t[i][1];if(e[1]*(a-c)+u*(c-e[0])+l*(e[0]-a)==0&&(a-e[0])*(c-e[0])<=0&&(u-e[1])*(l-e[1])<=0)return!r;u>e[1]!=l>e[1]&&e[0]<(c-a)*(e[1]-u)/(l-u)+a&&(n=!n)}return n}t.default=function(e,t,r){if(void 0===r&&(r={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var i=n.getCoord(e),a=n.getGeom(t),u=a.type,c=t.bbox,l=a.coordinates;if(c&&!1===function(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}(i,c))return!1;"Polygon"===u&&(l=[l]);for(var f=!1,s=0;s<l.length&&!f;s++)if(o(i,l[s][0],r.ignoreBoundary)){for(var p=!1,d=1;d<l[s].length&&!p;)o(i,l[s][d],!r.ignoreBoundary)&&(p=!0),d++;p||(f=!0)}return f}},SGlo:function(e,t,r){"use strict";var n=r("rj/q"),o=r("N+BI").getWeak,i=r("1a8y"),a=r("BjK0"),u=r("xa9o"),c=r("yde8"),l=r("Wadk"),f=r("qDzq"),s=r("O1i0"),p=l(5),d=l(6),y=0,h=function(e){return e._l||(e._l=new g)},g=function(){this.a=[]},v=function(e,t){return p(e.a,(function(e){return e[0]===t}))};g.prototype={get:function(e){var t=v(this,e);if(t)return t[1]},has:function(e){return!!v(this,e)},set:function(e,t){var r=v(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=d(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,r,i){var l=e((function(e,n){u(e,l,t,"_i"),e._t=t,e._i=y++,e._l=void 0,null!=n&&c(n,r,e[i],e)}));return n(l.prototype,{delete:function(e){if(!a(e))return!1;var r=o(e);return!0===r?h(s(this,t)).delete(e):r&&f(r,this._i)&&delete r[this._i]},has:function(e){if(!a(e))return!1;var r=o(e);return!0===r?h(s(this,t)).has(e):r&&f(r,this._i)}}),l},def:function(e,t,r){var n=o(i(t),!0);return!0===n?h(e).set(t,r):n[e._i]=r,e},ufstore:h}},SnY6:function(e,t,r){"use strict";r("YBKJ"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0});var n=r("/rf6"),o=r("AKIq");t.default=function(e,t,r){void 0===r&&(r={});var i=o.getCoord(e),a=o.getCoord(t);a[0]+=a[0]-i[0]>180?-360:i[0]-a[0]>180?360:0;var u=function(e,t,r){var o=r=void 0===r?n.earthRadius:Number(r),i=e[1]*Math.PI/180,a=t[1]*Math.PI/180,u=a-i,c=Math.abs(t[0]-e[0])*Math.PI/180;c>Math.PI&&(c-=2*Math.PI);var l=Math.log(Math.tan(a/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),f=Math.abs(l)>1e-11?u/l:Math.cos(i);return Math.sqrt(u*u+f*f*c*c)*o}(i,a);return n.convertLength(u,"meters",r.units)}},Txtv:function(e,t,r){"use strict";r("AqHK"),r("pS08"),r("LagC"),r("nWfQ"),r("MIFh"),r("YbXK"),r("cFtU"),r("pJf4"),r("q8oJ"),r("C9fy"),r("+ar0"),r("xtjI"),r("JHok"),r("OeI1"),r("rzGZ"),r("Dq+y"),r("8npG"),r("Ggvi"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=u(r("xDdU")),o=r("1Y5v"),i=u(r("KER3")),a=r("wHih");function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(i,e);var t,r=(t=i,function(){var e,r=v(t);if(g()){var n=v(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return y(this,e)});function i(){var e;d(this,i);for(var t=arguments.length,u=new Array(t),c=0;c<t;c++)u[c]=arguments[c];return m(h(e=r.call.apply(r,[this].concat(u))),"handleClick",(function(t,r){e.getTentativeFeature()?e._commitTentativeFeature(t,r):e._initTentativeFeature(t,r)})),m(h(e),"getEditHandlesFromFeature",(function(e,t){var r=(0,a.getFeatureCoordinates)(e);return r&&r.map((function(e,r){return{type:"Feature",properties:{renderType:o.RENDER_TYPE.RECTANGLE,guideType:o.GUIDE_TYPE.CURSOR_EDIT_HANDLE,featureIndex:t,positionIndexes:[r]},geometry:{type:o.GEOJSON_TYPE.POINT,coordinates:[e]}}}))})),m(h(e),"getGuides",(function(t){var r=e.getTentativeFeature();if(!(0,a.getFeatureCoordinates)(r))return null;var i=t.lastPointerMoveEvent,u=(0,a.updateRectanglePosition)(r,2,i.mapCoords);return{tentativeFeature:r={type:"Feature",properties:{id:(0,n.default)(),guideType:o.GUIDE_TYPE.TENTATIVE,renderType:o.RENDER_TYPE.RECTANGLE},geometry:{type:o.GEOJSON_TYPE.LINE_STRING,coordinates:u}},editHandles:e.getEditHandlesFromFeature(r)}})),m(h(e),"_commitTentativeFeature",(function(t,r){var n=r.data,i=e.getTentativeFeature();if(i){e.setTentativeFeature(null);var u=(0,a.updateRectanglePosition)(i,2,t.mapCoords);if(!u)return;u=[].concat(s(u),[u[0]]),i=f({},i,{properties:{id:i.properties.id,renderType:o.RENDER_TYPE.RECTANGLE},geometry:{type:o.GEOJSON_TYPE.POLYGON,coordinates:[u]}});var c=n.addFeature(i).getObject();r.onEdit({editType:o.EDIT_TYPE.ADD_FEATURE,updatedData:c,editContext:null})}})),m(h(e),"_initTentativeFeature",(function(t,r){e.setTentativeFeature({type:"Feature",properties:{id:(0,n.default)(),renderType:o.RENDER_TYPE.RECTANGLE,guideType:o.GUIDE_TYPE.TENTATIVE},geometry:{type:"LineString",coordinates:[t.mapCoords,t.mapCoords,t.mapCoords,t.mapCoords]}})})),e}return i}(i.default);t.default=E},"USW+":function(e,t,r){"use strict";r("JHok"),r("pS08"),r("LagC"),r("nWfQ"),r("pJf4"),r("q8oJ"),r("C9fy"),r("8npG"),r("MIFh"),r("YbXK"),r("cFtU"),r("rzGZ"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.Draw90DegreePolygonMode=void 0;var n=l(r("Yeox")),o=l(r("qhoL")),i=l(r("sk2A")),a=l(r("j3ZU")),u=r("/rf6"),c=r("lVFs");function l(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){o=!0,i=c}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(y,e);var t,r,l,f,d=(t=y,function(){var e,r=m(t);if(b()){var n=m(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return v(this,e)});function y(){return h(this,y),d.apply(this,arguments)}return r=y,(l=[{key:"getGuides",value:function(e){var t={type:"FeatureCollection",features:[]},r=this.getClickSequence();if(0===r.length||!e.lastPointerMoveEvent)return t;var n,o,i=e.lastPointerMoveEvent.mapCoords;if(1===r.length)n=i;else{var a=r[r.length-2],u=r[r.length-1];n=p((0,c.generatePointsParallelToLinePoints)(a,u,i),1)[0]}return o=r.length<3?{type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(s(r),[n])}}:{type:"Feature",properties:{guideType:"tentative"},geometry:{type:"Polygon",coordinates:[[].concat(s(r),[n,r[0]])]}},t.features.push(o),t.features=t.features.concat((0,c.getEditHandlesForGeometry)(o.geometry,-1)),t.features=t.features.slice(0,-1),t}},{key:"handlePointerMove",value:function(e,t){e.mapCoords,t.onUpdateCursor("cell")}},{key:"handleClick",value:function(e,t){var r=e.picks,n=this.getTentativeGuide(t);this.addClickSequence(e);var o=this.getClickSequence();if(n){if(3===o.length&&"LineString"===n.geometry.type){var i=n.geometry;o[o.length-1]=i.coordinates[i.coordinates.length-1]}else if(o.length>3&&"Polygon"===n.geometry.type){var a=n.geometry;o[o.length-1]=a.coordinates[0][a.coordinates[0].length-2];var u=(0,c.getPickedEditHandle)(r);if(u&&Array.isArray(u.properties.positionIndexes)&&(0===u.properties.positionIndexes[1]||u.properties.positionIndexes[1]===a.coordinates[0].length-3)){var l={type:"Polygon",coordinates:this.finalizedCoordinates(s(a.coordinates[0]))};this.resetClickSequence();var f=this.getAddFeatureOrBooleanPolygonAction(l,t);f&&t.onEdit(f)}}var p={screenCoords:[-1,-1],mapCoords:e.mapCoords,picks:[],pointerDownPicks:null,pointerDownScreenCoords:null,pointerDownMapCoords:null,cancelPan:function(){},sourceEvent:null};this.handlePointerMove(p,t)}}},{key:"finalizedCoordinates",value:function(e){var t=[[].concat(s(e.slice(0,-2)),[e[0]])],r=this.getIntermediatePoint(s(e));if(r)t=[[].concat(s(e.slice(0,-2)),[r,e[0]])];else{var n=s(e);n.splice(-3,1),(r=this.getIntermediatePoint(s(n)))&&(t=[[].concat(s(e.slice(0,-3)),[r,e[0]])])}return t}},{key:"getIntermediatePoint",value:function(e){var t;if(e.length>4){var r=s(e),c=r[0],l=r[1],f=(0,o.default)(c,l),p=e[e.length-3],d=e[e.length-4],y=(0,o.default)(p,d),h={first:[],second:[]};[1,2,3].forEach((function(e){var t=f+90*e;h.first.push(t>180?t-360:t);var r=y+90*e;h.second.push(r>180?r-360:r)}));var g=(0,a.default)((0,u.point)(c),(0,u.point)(p));[0,1,2].forEach((function(e){var r=(0,u.lineString)([c,(0,n.default)(c,g,h.first[e]).geometry.coordinates]);[0,1,2].forEach((function(e){var o=(0,u.lineString)([p,(0,n.default)(p,g,h.second[e]).geometry.coordinates]),a=(0,i.default)(r,o);a&&a.features.length&&(t=a.features[0].geometry.coordinates)}))}))}return t}}])&&g(r.prototype,l),f&&g(r,f),y}(r("4R+2").GeoJsonEditMode);t.Draw90DegreePolygonMode=P},UWCo:function(e,t,r){"use strict";r("YBKJ"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0});var n=r("/rf6");t.default=function(e,t){void 0===t&&(t={});var r=Number(e[0]),o=Number(e[1]),i=Number(e[2]),a=Number(e[3]);if(6===e.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var u=[r,o],c=[r,a],l=[i,a],f=[i,o];return n.polygon([[u,f,l,c,u]],t.properties,{bbox:e,id:t.id})}},VhK9:function(e,t,r){"use strict";r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GeoJsonEditMode",{enumerable:!0,get:function(){return o.GeoJsonEditMode}}),Object.defineProperty(t,"ModifyMode",{enumerable:!0,get:function(){return i.ModifyMode}}),Object.defineProperty(t,"TranslateMode",{enumerable:!0,get:function(){return a.TranslateMode}}),Object.defineProperty(t,"ScaleMode",{enumerable:!0,get:function(){return u.ScaleMode}}),Object.defineProperty(t,"RotateMode",{enumerable:!0,get:function(){return c.RotateMode}}),Object.defineProperty(t,"DuplicateMode",{enumerable:!0,get:function(){return l.DuplicateMode}}),Object.defineProperty(t,"ExtendLineStringMode",{enumerable:!0,get:function(){return f.ExtendLineStringMode}}),Object.defineProperty(t,"SplitPolygonMode",{enumerable:!0,get:function(){return s.SplitPolygonMode}}),Object.defineProperty(t,"ExtrudeMode",{enumerable:!0,get:function(){return p.ExtrudeMode}}),Object.defineProperty(t,"ElevationMode",{enumerable:!0,get:function(){return d.ElevationMode}}),Object.defineProperty(t,"TransformMode",{enumerable:!0,get:function(){return y.TransformMode}}),Object.defineProperty(t,"DrawPointMode",{enumerable:!0,get:function(){return h.DrawPointMode}}),Object.defineProperty(t,"DrawLineStringMode",{enumerable:!0,get:function(){return g.DrawLineStringMode}}),Object.defineProperty(t,"DrawPolygonMode",{enumerable:!0,get:function(){return v.DrawPolygonMode}}),Object.defineProperty(t,"DrawRectangleMode",{enumerable:!0,get:function(){return b.DrawRectangleMode}}),Object.defineProperty(t,"DrawCircleByDiameterMode",{enumerable:!0,get:function(){return m.DrawCircleByDiameterMode}}),Object.defineProperty(t,"DrawCircleFromCenterMode",{enumerable:!0,get:function(){return E.DrawCircleFromCenterMode}}),Object.defineProperty(t,"DrawEllipseByBoundingBoxMode",{enumerable:!0,get:function(){return P.DrawEllipseByBoundingBoxMode}}),Object.defineProperty(t,"DrawEllipseUsingThreePointsMode",{enumerable:!0,get:function(){return w.DrawEllipseUsingThreePointsMode}}),Object.defineProperty(t,"DrawRectangleUsingThreePointsMode",{enumerable:!0,get:function(){return O.DrawRectangleUsingThreePointsMode}}),Object.defineProperty(t,"Draw90DegreePolygonMode",{enumerable:!0,get:function(){return _.Draw90DegreePolygonMode}}),Object.defineProperty(t,"DrawPolygonByDraggingMode",{enumerable:!0,get:function(){return S.DrawPolygonByDraggingMode}}),Object.defineProperty(t,"ImmutableFeatureCollection",{enumerable:!0,get:function(){return M.ImmutableFeatureCollection}}),Object.defineProperty(t,"ViewMode",{enumerable:!0,get:function(){return j.ViewMode}}),Object.defineProperty(t,"MeasureDistanceMode",{enumerable:!0,get:function(){return T.MeasureDistanceMode}}),Object.defineProperty(t,"MeasureAreaMode",{enumerable:!0,get:function(){return x.MeasureAreaMode}}),Object.defineProperty(t,"MeasureAngleMode",{enumerable:!0,get:function(){return C.MeasureAngleMode}}),Object.defineProperty(t,"CompositeMode",{enumerable:!0,get:function(){return R.CompositeMode}}),Object.defineProperty(t,"SnappableMode",{enumerable:!0,get:function(){return D.SnappableMode}}),Object.defineProperty(t,"_memoize",{enumerable:!0,get:function(){return k.default}});var n,o=r("4R+2"),i=r("9/d+"),a=r("iJqO"),u=r("hmiN"),c=r("7it9"),l=r("RJX9"),f=r("jWzm"),s=r("9ASd"),p=r("Noqf"),d=r("pLGD"),y=r("lF+Y"),h=r("pTud"),g=r("3dFB"),v=r("JeLm"),b=r("IulE"),m=r("ekYj"),E=r("9daN"),P=r("yRTG"),w=r("cNaZ"),O=r("IaNU"),_=r("USW+"),S=r("Ycbx"),M=r("KV4q"),j=r("X2aT"),T=r("fMhR"),x=r("+1Xl"),C=r("vNvi"),R=r("PfwA"),D=r("bN/D"),k=(n=r("HYY4"))&&n.__esModule?n:{default:n}},X2aT:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r("pS08"),r("LagC"),r("q8oJ"),r("C9fy"),r("8npG"),r("nWfQ"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.ViewMode=void 0;var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(n,e);var t,r=(t=n,function(){var e,r=u(t);if(a()){var n=u(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return i(this,e)});function n(){return o(this,n),r.apply(this,arguments)}return n}(r("4R+2").GeoJsonEditMode);t.ViewMode=l},XlYV:function(e,t,r){"use strict";r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"SelectMode",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"EditingMode",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"BaseMode",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"DrawPointMode",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"DrawLineStringMode",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"DrawRectangleMode",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"DrawRectangleOneclickMode",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"DrawPolygonMode",{enumerable:!0,get:function(){return f.default}});var n=s(r("zx9D")),o=s(r("MYR2")),i=s(r("KER3")),a=s(r("LNFK")),u=s(r("9hBD")),c=s(r("Txtv")),l=s(r("+aqe")),f=s(r("u779"));function s(e){return e&&e.__esModule?e:{default:e}}},Ycbx:function(e,t,r){"use strict";r("pS08"),r("LagC"),r("nWfQ"),r("MIFh"),r("rzGZ"),r("YbXK"),r("cFtU"),r("pJf4"),r("q8oJ"),r("C9fy"),r("8npG"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.DrawPolygonByDraggingMode=void 0;var n,o=(n=r("hKI/"))&&n.__esModule?n:{default:n},i=r("lVFs");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(v,e);var t,r,n,a,c=(t=v,function(){var e,r=y(t);if(d()){var n=y(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return s(this,e)});function v(){var e;l(this,v);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(p(e=c.call.apply(c,[this].concat(r))),"handleDraggingThrottled",null),e}return r=v,(n=[{key:"handleClick",value:function(e,t){}},{key:"handleStartDragging",value:function(e,t){e.cancelPan(),t.modeConfig&&t.modeConfig.throttleMs?this.handleDraggingThrottled=(0,o.default)(this.handleDraggingAux,t.modeConfig.throttleMs):this.handleDraggingThrottled=this.handleDraggingAux}},{key:"handleStopDragging",value:function(e,t){this.addClickSequence(e);var r=this.getClickSequence();if(this.handleDraggingThrottled&&this.handleDraggingThrottled.cancel&&this.handleDraggingThrottled.cancel(),r.length>2){var n={type:"Polygon",coordinates:[[].concat(u(r),[r[0]])]};this.resetClickSequence();var o=this.getAddFeatureOrBooleanPolygonAction(n,t);o&&t.onEdit(o)}}},{key:"handleDraggingAux",value:function(e,t){var r=e.picks;(0,i.getPickedEditHandle)(r)||this.addClickSequence(e)}},{key:"handleDragging",value:function(e,t){this.handleDraggingThrottled&&this.handleDraggingThrottled(e,t)}}])&&f(r.prototype,n),a&&f(r,a),v}(r("JeLm").DrawPolygonMode);t.DrawPolygonByDraggingMode=v},YcpW:function(e,t,r){e.exports=function(){"use strict";function e(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function t(e,t){return e<t?-1:e>t?1:0}return function(r,n,o,i,a){!function t(r,n,o,i,a){for(;i>o;){if(i-o>600){var u=i-o+1,c=n-o+1,l=Math.log(u),f=.5*Math.exp(2*l/3),s=.5*Math.sqrt(l*f*(u-f)/u)*(c-u/2<0?-1:1),p=Math.max(o,Math.floor(n-c*f/u+s)),d=Math.min(i,Math.floor(n+(u-c)*f/u+s));t(r,n,p,d,a)}var y=r[n],h=o,g=i;for(e(r,o,n),a(r[i],y)>0&&e(r,o,i);h<g;){for(e(r,h,g),h++,g--;a(r[h],y)<0;)h++;for(;a(r[g],y)>0;)g--}0===a(r[o],y)?e(r,o,g):(g++,e(r,g,i)),g<=n&&(o=g+1),n<=g&&(i=g-1)}}(r,n,o||0,i||r.length-1,a||t)}}()},Yeox:function(e,t,r){"use strict";r("R48M"),Object.defineProperty(t,"__esModule",{value:!0});var n=r("/rf6"),o=r("AKIq");t.default=function(e,t,r,i){void 0===i&&(i={});var a=o.getCoord(e),u=n.degreesToRadians(a[0]),c=n.degreesToRadians(a[1]),l=n.degreesToRadians(r),f=n.lengthToRadians(t,i.units),s=Math.asin(Math.sin(c)*Math.cos(f)+Math.cos(c)*Math.sin(f)*Math.cos(l)),p=u+Math.atan2(Math.sin(l)*Math.sin(f)*Math.cos(c),Math.cos(f)-Math.sin(c)*Math.sin(s)),d=n.radiansToDegrees(p),y=n.radiansToDegrees(s);return n.point([d,y],i.properties)}},aZEm:function(e,t,r){r("nMRu"),r("sPse"),r("JHok"),r("MIFh");var n=r("A1R+"),o=r("/rf6"),i=r("cWyK"),a=r("QJ+7").default,u=i.featureEach,c=(i.coordEach,o.polygon,o.featureCollection);function l(e){var t=n(e);return t.insert=function(e){if("Feature"!==e.type)throw new Error("invalid feature");return e.bbox=e.bbox?e.bbox:a(e),n.prototype.insert.call(this,e)},t.load=function(e){var t=[];return Array.isArray(e)?e.forEach((function(e){if("Feature"!==e.type)throw new Error("invalid features");e.bbox=e.bbox?e.bbox:a(e),t.push(e)})):u(e,(function(e){if("Feature"!==e.type)throw new Error("invalid features");e.bbox=e.bbox?e.bbox:a(e),t.push(e)})),n.prototype.load.call(this,t)},t.remove=function(e,t){if("Feature"!==e.type)throw new Error("invalid feature");return e.bbox=e.bbox?e.bbox:a(e),n.prototype.remove.call(this,e,t)},t.clear=function(){return n.prototype.clear.call(this)},t.search=function(e){var t=n.prototype.search.call(this,this.toBBox(e));return c(t)},t.collides=function(e){return n.prototype.collides.call(this,this.toBBox(e))},t.all=function(){var e=n.prototype.all.call(this);return c(e)},t.toJSON=function(){return n.prototype.toJSON.call(this)},t.fromJSON=function(e){return n.prototype.fromJSON.call(this,e)},t.toBBox=function(e){var t;if(e.bbox)t=e.bbox;else if(Array.isArray(e)&&4===e.length)t=e;else if(Array.isArray(e)&&6===e.length)t=[e[0],e[1],e[3],e[4]];else if("Feature"===e.type)t=a(e);else{if("FeatureCollection"!==e.type)throw new Error("invalid geojson");t=a(e)}return{minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}},t}e.exports=l,e.exports.default=l},bLT3:function(e,t,r){"use strict";r("R48M");var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r("/rf6"),i=r("AKIq"),a=n(r("A/RR"));t.default=function e(t,r,n){void 0===n&&(n={});var u=i.getGeom(t),c=i.getGeom(r);if("Polygon"===u.type&&"Polygon"===c.type){var l=a.intersection(u.coordinates,c.coordinates);if(null===l||0===l.length)return null;if(1===l.length){var f=l[0][0][0],s=l[0][0][l[0][0].length-1];return f[0]===s[0]&&f[1]===s[1]?o.polygon(l[0],n.properties):null}return o.multiPolygon(l,n.properties)}if("MultiPolygon"===u.type){for(var p=[],d=0,y=u.coordinates;d<y.length;d++){var h=y[d],g=e(i.getGeom(o.polygon(h)),c);if(g){var v=i.getGeom(g);if("Polygon"===v.type)p.push(v.coordinates);else{if("MultiPolygon"!==v.type)throw new Error("intersection is invalid");p=p.concat(v.coordinates)}}}return 0===p.length?null:1===p.length?o.polygon(p[0],n.properties):o.multiPolygon(p,n.properties)}if("MultiPolygon"===c.type)return e(c,u);throw new Error("poly1 and poly2 must be either polygons or multiPolygons")}},"bN/D":function(e,t,r){"use strict";r("gu/5"),r("eoYm"),r("U6Bt"),r("v9g0"),r("E5k/"),r("pS08"),r("LagC"),r("nWfQ"),r("+ar0"),r("xtjI"),r("JHok"),r("OeI1"),r("Dq+y"),r("Ggvi"),r("YbXK"),r("cFtU"),r("pJf4"),r("q8oJ"),r("C9fy"),r("8npG"),r("rzGZ"),r("MIFh"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.SnappableMode=void 0;var n=r("lVFs");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(v,e);var t,r,o,u,g=(t=v,function(){var e,r=d(t);if(p()){var n=d(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return f(this,e)});function v(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),h(s(t=g.call(this)),"_handler",void 0),t._handler=e,t}return r=v,(o=[{key:"_getSnappedMouseEvent",value:function(e,t,r){return Object.assign(e,{mapCoords:r.geometry.coordinates,pointerDownMapCoords:t&&t.geometry.coordinates})}},{key:"_getPickedSnapTarget",value:function(e){return(0,n.getPickedEditHandles)(e).find((function(e){return"snap-target"===e.properties.editHandleType}))}},{key:"_getPickedSnapSource",value:function(e){return(0,n.getPickedSnapSourceEditHandle)(e)}},{key:"_getUpdatedSnapSourceHandle",value:function(e,t){var r=e.properties,n=r.featureIndex,o=r.positionIndexes;if(!Array.isArray(o))return e;var i=t.features[n];return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{geometry:{type:"Point",coordinates:o.reduce((function(e,t){return e[t]}),i.geometry.coordinates)}})}},{key:"_getSnapTargets",value:function(e){var t=(e.modeConfig||{}).additionalSnapTargets;return t=t||[],[].concat(i(e.data.features),i(t))}},{key:"_getSnapTargetHandles",value:function(e){for(var t=[],r=this._getSnapTargets(e),o=0;o<r.length;o++)if(!e.selectedIndexes.includes(o)){var a=r[o].geometry;t.push.apply(t,i((0,n.getEditHandlesForGeometry)(a,o,"snap-target")))}return t}},{key:"getGuides",value:function(e){var t=e.modeConfig,r=e.lastPointerMoveEvent,o=(t||{}).enableSnapping,u={type:"FeatureCollection",features:i(this._handler.getGuides(e).features)};if(!o)return u;var c,l=r&&this._getPickedSnapSource(r.pointerDownPicks);if(l)return(c=u.features).push.apply(c,i(this._getSnapTargetHandles(e)).concat([this._getUpdatedSnapSourceHandle(l,e.data)])),u;var f,s=e.data.features,p=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=a(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw o}}}}(e.selectedIndexes);try{for(p.s();!(f=p.n()).done;){var d=f.value;if(d<s.length){var y,h=s[d].geometry;(y=u.features).push.apply(y,i((0,n.getEditHandlesForGeometry)(h,d,"snap-source")))}}}catch(g){p.e(g)}finally{p.f()}return u}},{key:"_getSnapAwareEvent",value:function(e,t){var r=this._getPickedSnapSource(t.lastPointerMoveEvent.pointerDownPicks),n=this._getPickedSnapTarget(e.picks);return r&&n?this._getSnappedMouseEvent(e,r,n):e}},{key:"handleStartDragging",value:function(e,t){this._handler.handleStartDragging(e,t)}},{key:"handleStopDragging",value:function(e,t){this._handler.handleStopDragging(this._getSnapAwareEvent(e,t),t)}},{key:"handleDragging",value:function(e,t){this._handler.handleDragging(this._getSnapAwareEvent(e,t),t)}},{key:"handlePointerMove",value:function(e,t){this._handler.handlePointerMove(this._getSnapAwareEvent(e,t),t)}}])&&l(r.prototype,o),u&&l(r,u),v}(r("4R+2").GeoJsonEditMode);t.SnappableMode=g},bRXx:function(e,t,r){"use strict";r("YBKJ"),r("sc67"),r("JHok"),r("AqHK"),r("MIFh");var n={meters:6371008.8,metres:6371008.8,millimeters:6371008800,millimetres:6371008800,centimeters:637100880,centimetres:637100880,kilometers:6371.0088,kilometres:6371.0088,miles:3958.761333810546,nauticalmiles:6371008.8/1852,inches:6371008.8*39.37,yards:6371008.8/1.0936,feet:20902260.511392,radians:1,degrees:6371008.8/111325};function o(e,t,r){if(!f(r=r||{}))throw new Error("options is invalid");var n=r.bbox,o=r.id;if(void 0===e)throw new Error("geometry is required");if(t&&t.constructor!==Object)throw new Error("properties must be an Object");n&&s(n),o&&p(o);var i={type:"Feature"};return o&&(i.id=o),n&&(i.bbox=n),i.properties=t||{},i.geometry=e,i}function i(e,t,r){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!l(e[0])||!l(e[1]))throw new Error("coordinates must contain numbers");return o({type:"Point",coordinates:e},t,r)}function a(e,t){if(null==e)throw new Error("distance is required");if(t&&"string"!=typeof t)throw new Error("units must be a string");var r=n[t||"kilometers"];if(!r)throw new Error(t+" units is invalid");return e/r}function u(e){if(null==e)throw new Error("degrees is required");return e%360*Math.PI/180}function c(e,t,r){if(null==e)throw new Error("length is required");if(!(e>=0))throw new Error("length must be a positive number");return function(e,t){if(null==e)throw new Error("radians is required");if(t&&"string"!=typeof t)throw new Error("units must be a string");var r=n[t||"kilometers"];if(!r)throw new Error(t+" units is invalid");return e*r}(a(e,t),r||"kilometers")}function l(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}function f(e){return!!e&&e.constructor===Object}function s(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach((function(e){if(!l(e))throw new Error("bbox must only contain numbers")}))}function p(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}t.a=function(e,t,r,n){if(!f(n=n||{}))throw new Error("options is invalid");var o=n.units,a=n.properties;if(!e)throw new Error("origin is required");if(null==t)throw new Error("distance is required");if(null==r)throw new Error("bearing is required");if(!(t>=0))throw new Error("distance must be greater than 0");var l=c(t,o,"meters"),s=function(e){if(!e)throw new Error("coord is required");if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates;if(Array.isArray(e)&&e.length>=2&&void 0===e[0].length&&void 0===e[1].length)return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(e),p=function(e,t,r,n){n=void 0===n?6371008.8:Number(n);var o=t/n,i=e[0]*Math.PI/180,a=u(e[1]),c=u(r),l=o*Math.cos(c),f=a+l;Math.abs(f)>Math.PI/2&&(f=f>0?Math.PI-f:-Math.PI-f);var s=Math.log(Math.tan(f/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),p=Math.abs(s)>1e-11?l/s:Math.cos(a),d=o*Math.sin(c)/p;return[(180*(i+d)/Math.PI+540)%360-180,180*f/Math.PI]}(s,l,r);return p[0]+=p[0]-s[0]>180?-360:s[0]-p[0]>180?360:0,i(p,a)}},cNaZ:function(e,t,r){"use strict";r("pS08"),r("LagC"),r("q8oJ"),r("C9fy"),r("8npG"),r("nWfQ"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.DrawEllipseUsingThreePointsMode=void 0;var n=c(r("j3ZU")),o=c(r("luXc")),i=c(r("qhoL")),a=r("/rf6"),u=r("4R+2");function c(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(v,e);var t,r,c,l,g=(t=v,function(){var e,r=y(t);if(d()){var n=y(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return p(this,e)});function v(){return f(this,v),g.apply(this,arguments)}return r=v,(c=[{key:"getThreeClickPolygon",value:function(e,t,r,c){var l=(0,u.getIntermediatePosition)(e,t),f=Math.max((0,n.default)(l,(0,a.point)(r)),.001),s=Math.max((0,n.default)(e,t),.001)/2,p={angle:(0,i.default)(e,t)};return(0,o.default)(l,f,s,p)}}])&&s(r.prototype,c),l&&s(r,l),v}(r("mOTV").ThreeClickPolygonMode);t.DrawEllipseUsingThreePointsMode=g},cqeU:function(e,t,r){"use strict";var n=r("QJ+7"),o=r.n(n);r("sc67"),r("JHok"),r("AqHK"),r("MIFh");function i(e,t,r){if(!c(r=r||{}))throw new Error("options is invalid");var n=r.bbox,o=r.id;if(void 0===e)throw new Error("geometry is required");if(t&&t.constructor!==Object)throw new Error("properties must be an Object");n&&l(n),o&&f(o);var i={type:"Feature"};return o&&(i.id=o),n&&(i.bbox=n),i.properties=t||{},i.geometry=e,i}function a(e,t,r){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!u(e[0])||!u(e[1]))throw new Error("coordinates must contain numbers");return i({type:"Point",coordinates:e},t,r)}function u(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}function c(e){return!!e&&e.constructor===Object}function l(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach((function(e){if(!u(e))throw new Error("bbox must only contain numbers")}))}function f(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}t.a=function(e,t){if(!c(t=t||{}))throw new Error("options is invalid");var r=t.properties;if(!e)throw new Error("geojson is required");var n=o()(e);return a([(n[0]+n[2])/2,(n[1]+n[3])/2],r)}},d7SH:function(e,t,r){"use strict";r("R48M"),Object.defineProperty(t,"__esModule",{value:!0});var n=r("QJ+7"),o=r("/rf6");t.default=function(e,t){void 0===t&&(t={});var r=n.default(e),i=(r[0]+r[2])/2,a=(r[1]+r[3])/2;return o.point([i,a],t.properties,t)}},dHJZ:function(e,t,r){"use strict";r("zTTH"),r("MIFh"),r("pS08"),r("LagC"),r("q8oJ"),r("C9fy"),r("nWfQ"),r("+ar0"),r("xtjI"),r("JHok"),r("OeI1"),r("Ggvi"),r("m210"),r("4DPX"),r("rzGZ"),r("Dq+y"),r("8npG"),r("YbXK"),r("eMsz"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("+qjn"),o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,t&&t.set(e,r);return r}(r("q1tI")),i=r("VhK9"),a=r("wHih"),u=r("1Y5v");function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m={featureCollection:new i.ImmutableFeatureCollection({type:"FeatureCollection",features:[]}),selectedFeatureIndex:null,hovered:null,isDragging:!1,didDrag:!1,lastPointerMoveEvent:null,pointerDownPicks:null,pointerDownScreenCoords:null,pointerDownMapCoords:null},E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(E,e);var t,r,c,l,f=(t=E,function(){var e,r=g(t);if(h()){var n=g(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return d(this,e)});function E(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,E),b(y(t=f.call(this,e)),"_events",void 0),b(y(t),"_eventsRegistered",void 0),b(y(t),"_modeHandler",void 0),b(y(t),"_context",void 0),b(y(t),"_containerRef",void 0),b(y(t),"getFeatures",(function(){var e=t._getFeatureCollection();return(e=e&&e.getObject())&&e.features})),b(y(t),"addFeatures",(function(e){var r=t._getFeatureCollection();r&&(Array.isArray(e)||(e=[e]),r=r.addFeatures(e),t.setState({featureCollection:r}))})),b(y(t),"deleteFeatures",(function(e){var r=t._getFeatureCollection(),n=t._getSelectedFeatureIndex();if(r){Array.isArray(e)||(e=[e]);var o={featureCollection:r=r.deleteFeatures(e)};e.findIndex((function(e){return n===e}))>=0&&(o.selectedFeatureIndex=null),t.setState(o)}})),b(y(t),"_getMemorizedFeatureCollection",(0,i._memoize)((function(e){var t=e.propsFeatures,r=e.stateFeatures,n=t||r;return n instanceof i.ImmutableFeatureCollection?n:n&&"FeatureCollection"===n.type?new i.ImmutableFeatureCollection({type:"FeatureCollection",features:n.features}):new i.ImmutableFeatureCollection({type:"FeatureCollection",features:n||[]})}))),b(y(t),"_getFeatureCollection",(function(){return t._getMemorizedFeatureCollection({propsFeatures:t.props.features,stateFeatures:t.state.featureCollection})})),b(y(t),"_setupModeHandler",(function(){var e=t.props.mode;t._modeHandler=e,e?t._registerEvents():t._degregisterEvents()})),b(y(t),"_clearEditingState",(function(){t.setState({selectedFeatureIndex:null,hovered:null,pointerDownPicks:null,pointerDownScreenCoords:null,pointerDownMapCoords:null,isDragging:!1,didDrag:!1})})),b(y(t),"_getSelectedFeatureIndex",(function(){return"selectedFeatureIndex"in t.props?t.props.selectedFeatureIndex:t.state.selectedFeatureIndex})),b(y(t),"_onSelect",(function(e){t.setState({selectedFeatureIndex:e&&e.selectedFeatureIndex}),t.props.onSelect&&t.props.onSelect(e)})),b(y(t),"_onEdit",(function(e){var r=e.editType,n=e.updatedData,o=e.editContext;switch(t.setState({featureCollection:new i.ImmutableFeatureCollection(n)}),r){case u.EDIT_TYPE.ADD_FEATURE:t.props.onSelect({selectedFeature:null,selectedFeatureIndex:null,selectedEditHandleIndex:null,screenCoords:o&&o.screenCoords,mapCoords:o&&o.mapCoords})}t.props.onUpdate&&t.props.onUpdate({data:n&&n.features,editType:r,editContext:o})})),b(y(t),"_degregisterEvents",(function(){var e=t._context&&t._context.eventManager;t._events&&e&&t._eventsRegistered&&(e.off(t._events),t._eventsRegistered=!1)})),b(y(t),"_registerEvents",(function(){var e=t._containerRef,r=t._context&&t._context.eventManager;t._events&&e&&r&&(t._eventsRegistered||(r.on(t._events,e),t._eventsRegistered=!0))})),b(y(t),"_onEvent",(function(e,r,n){e(t._getEvent(r)),n&&r.stopImmediatePropagation()})),b(y(t),"_onClick",(function(e){var r=t.getModeProps();t._modeHandler.handleClick(e,r)})),b(y(t),"_onDblClick",(function(e){var r=t.getModeProps();t._modeHandler.handleDblClick(e,r)})),b(y(t),"_onPointerMove",(function(e){var r=t._getHoverState(e),n=t.state,o=n.isDragging,i=n.didDrag,a=n.pointerDownPicks,u=n.pointerDownScreenCoords,c=n.pointerDownMapCoords;if(o&&!i&&u){var l=e.screenCoords[0]-u[0],f=e.screenCoords[1]-u[1];l*l+f*f>5&&t.setState({didDrag:!0})}var p=s({},e,{isDragging:o,pointerDownPicks:a,pointerDownScreenCoords:u,pointerDownMapCoords:c});if(t.state.didDrag){var d=t.getModeProps();t._modeHandler.handlePointerMove(p,d)}t.setState({hovered:r,lastPointerMoveEvent:p})})),b(y(t),"_onPointerDown",(function(e){var r=s({},e,{isDragging:!0,pointerDownScreenCoords:e.screenCoords,pointerDownMapCoords:e.mapCoords}),n={isDragging:!0,pointerDownPicks:e.picks,pointerDownScreenCoords:e.screenCoords,pointerDownMapCoords:e.mapCoords};t.setState(n);var o=t.getModeProps();t._modeHandler.handleStartDragging(r,o)})),b(y(t),"_onPointerUp",(function(e){var r=t.state,n=r.didDrag,o=r.pointerDownPicks,i=r.pointerDownScreenCoords,a=r.pointerDownMapCoords,u=s({},e,{isDragging:!1,pointerDownPicks:n?o:null,pointerDownScreenCoords:n?i:null,pointerDownMapCoords:n?a:null});t.setState({isDragging:!1,didDrag:!1,pointerDownPicks:null,pointerDownScreenCoords:null,pointerDownMapCoords:null});var c=t.getModeProps();n&&t._modeHandler.handleStopDragging(u,c)})),b(y(t),"_onPan",(function(e){t.state.isDragging&&e.sourceEvent.stopImmediatePropagation(),t._modeHandler.handlePan(e,t.getModeProps())})),b(y(t),"project",(function(e){var r=t._context&&t._context.viewport;return r&&r.project(e)})),b(y(t),"unproject",(function(e){var r=t._context&&t._context.viewport;return r&&r.unproject(e)})),b(y(t),"_getHoverState",(function(e){var t=e.picks&&e.picks[0]&&e.picks[0].object;return t?s({screenCoords:e.screenCoords,mapCoords:e.mapCoords},t):null})),t.state=m,t._eventsRegistered=!1,t._events={anyclick:function(e){return t._onEvent(t._onClick,e,!0)},click:function(e){return e.stopImmediatePropagation()},dblclick:function(e){return t._onEvent(t._onDblClick,e,!0)},pointermove:function(e){return t._onEvent(t._onPointerMove,e,!0)},pointerdown:function(e){return t._onEvent(t._onPointerDown,e,!0)},pointerup:function(e){return t._onEvent(t._onPointerUp,e,!0)},panmove:function(e){return t._onEvent(t._onPan,e,!1)},panstart:function(e){return t._onEvent(t._onPan,e,!1)},panend:function(e){return t._onEvent(t._onPan,e,!1)}},t}return r=E,(c=[{key:"componentDidMount",value:function(){this._setupModeHandler()}},{key:"componentDidUpdate",value:function(e){e.mode!==this.props.mode&&(this._clearEditingState(),this._setupModeHandler())}},{key:"componentWillUnmount",value:function(){this._degregisterEvents()}},{key:"getModeProps",value:function(){var e=this._getFeatureCollection(),t=this.state.lastPointerMoveEvent;return{data:e,selectedIndexes:[this._getSelectedFeatureIndex()],lastPointerMoveEvent:t,viewport:this._context&&this._context.viewport,featuresDraggable:this.props.featuresDraggable,onEdit:this._onEdit,onSelect:this._onSelect}}},{key:"_getEvent",value:function(e){var t=(0,a.parseEventElement)(e),r=(0,a.getScreenCoords)(e);return{picks:t?[t]:null,screenCoords:r,mapCoords:this.unproject(r),sourceEvent:e}}},{key:"_render",value:function(){return o.default.createElement("div",null)}},{key:"render",value:function(){var e=this;return o.default.createElement(n._MapContext.Consumer,null,(function(t){e._context=t;var r=t&&t.viewport;return!r||r.height<=0||r.width<=0?null:e._render()}))}}])&&p(r.prototype,c),l&&p(r,l),E}(o.PureComponent);t.default=E,b(E,"displayName","ModeHandler"),b(E,"defaultProps",{mode:null,features:null,onSelect:null,onUpdate:null})},dnTh:function(e,t,r){"use strict";r.r(t);r("MIFh");var n=r("KHcG"),o=r("cqeU"),i=r("6e3H"),a=r("QJ+7"),u=r.n(a),c=r("gbZC"),l=r("vhGx"),f=r("bRXx");r("sc67"),r("JHok"),r("AqHK");function s(e,t,r){if(!y(r=r||{}))throw new Error("options is invalid");var n=r.bbox,o=r.id;if(void 0===e)throw new Error("geometry is required");if(t&&t.constructor!==Object)throw new Error("properties must be an Object");n&&h(n),o&&g(o);var i={type:"Feature"};return o&&(i.id=o),n&&(i.bbox=n),i.properties=t||{},i.geometry=e,i}function p(e,t,r){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!d(e[0])||!d(e[1]))throw new Error("coordinates must contain numbers");return s({type:"Point",coordinates:e},t,r)}function d(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}function y(e){return!!e&&e.constructor===Object}function h(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach((function(e){if(!d(e))throw new Error("bbox must only contain numbers")}))}function g(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}function v(e,t,r){if(null!==e)for(var n,o,i,a,u,c,l,f,s=0,p=0,d=e.type,y="FeatureCollection"===d,h="Feature"===d,g=y?e.features.length:1,b=0;b<g;b++){u=(f=!!(l=y?e.features[b].geometry:h?e.geometry:e)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<u;m++){var E=0,P=0;if(null!==(a=f?l.geometries[m]:l)){c=a.coordinates;var w=a.type;switch(s=!r||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===t(c,p,b,E,P))return!1;p++,E++;break;case"LineString":case"MultiPoint":for(n=0;n<c.length;n++){if(!1===t(c[n],p,b,E,P))return!1;p++,"MultiPoint"===w&&E++}"LineString"===w&&E++;break;case"Polygon":case"MultiLineString":for(n=0;n<c.length;n++){for(o=0;o<c[n].length-s;o++){if(!1===t(c[n][o],p,b,E,P))return!1;p++}"MultiLineString"===w&&E++,"Polygon"===w&&P++}"Polygon"===w&&E++;break;case"MultiPolygon":for(n=0;n<c.length;n++){for("MultiPolygon"===w&&(P=0),o=0;o<c[n].length;o++){for(i=0;i<c[n][o].length-s;i++){if(!1===t(c[n][o][i],p,b,E,P))return!1;p++}P++}E++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===v(a.geometries[n],t,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function b(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var r=0;r<e.features.length&&!1!==t(e.features[r],r);r++);}function m(e,t,r){var n="Point"===function(e,t){if(!e)throw new Error((t||"geojson")+" is required");if(e.geometry&&e.geometry.type)return e.geometry.type;if(e.type)return e.type;throw new Error((t||"geojson")+" is invalid")}(e);return r=function(e,t){null==t&&(t="centroid");if(Array.isArray(t)||"object"==typeof t)return function(e){if(!e)throw new Error("coord is required");if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates;if(Array.isArray(e)&&e.length>=2&&void 0===e[0].length&&void 0===e[1].length)return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(t);var r=e.bbox?e.bbox:u()(e),n=r[0],a=r[1],c=r[2],l=r[3];switch(t){case"sw":case"southwest":case"westsouth":case"bottomleft":return p([n,a]);case"se":case"southeast":case"eastsouth":case"bottomright":return p([c,a]);case"nw":case"northwest":case"westnorth":case"topleft":return p([n,l]);case"ne":case"northeast":case"eastnorth":case"topright":return p([c,l]);case"center":return Object(o.a)(e);case void 0:case null:case"centroid":return Object(i.a)(e);default:throw new Error("invalid origin")}}(e,r),1===t||n||v(e,(function(e){var n=Object(l.a)(r,e),o=Object(c.a)(r,e),i=n*t,a=function(e){if(!e)throw new Error("coords is required");if("Feature"===e.type&&null!==e.geometry)return e.geometry.coordinates;if(e.coordinates)return e.coordinates;if(Array.isArray(e))return e;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}(Object(f.a)(r,i,o));e[0]=a[0],e[1]=a[1],3===e.length&&(e[2]*=t)})),e}t.default=function(e,t,r){if(!y(r=r||{}))throw new Error("options is invalid");var o=r.origin,i=r.mutate;if(!e)throw new Error("geojson required");if("number"!=typeof t||0===t)throw new Error("invalid factor");var a=Array.isArray(o)||"object"==typeof o;return!0!==i&&(e=Object(n.a)(e)),"FeatureCollection"!==e.type||a?m(e,t,o):(b(e,(function(r,n){e.features[n]=m(r,t,o)})),e)}},eMsz:function(e,t,r){"use strict";var n,o=r("emib"),i=r("Wadk")(0),a=r("IYdN"),u=r("N+BI"),c=r("k5Iv"),l=r("SGlo"),f=r("BjK0"),s=r("O1i0"),p=r("O1i0"),d=!o.ActiveXObject&&"ActiveXObject"in o,y=u.getWeak,h=Object.isExtensible,g=l.ufstore,v=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},b={get:function(e){if(f(e)){var t=y(e);return!0===t?g(s(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return l.def(s(this,"WeakMap"),e,t)}},m=e.exports=r("94Pd")("WeakMap",v,b,l,!0,!0);p&&d&&(c((n=l.getConstructor(v,"WeakMap")).prototype,b),u.NEED=!0,i(["delete","has","get","set"],(function(e){var t=m.prototype,r=t[e];a(t,e,(function(t,o){if(f(t)&&!h(t)){this._f||(this._f=new n);var i=this._f[e](t,o);return"set"==e?this:i}return r.call(this,t,o)}))})))},eSxo:function(e,t,r){"use strict";r("R48M"),Object.defineProperty(t,"__esModule",{value:!0});var n=r("qhoL"),o=r("j3ZU"),i=r("Yeox"),a=r("sk2A"),u=r("cWyK"),c=r("/rf6"),l=r("AKIq");t.default=function(e,t,r){void 0===r&&(r={});var f=c.point([1/0,1/0],{dist:1/0}),s=0;return u.flattenEach(e,(function(e){for(var u=l.getCoords(e),p=0;p<u.length-1;p++){var d=c.point(u[p]);d.properties.dist=o.default(t,d,r);var y=c.point(u[p+1]);y.properties.dist=o.default(t,y,r);var h=o.default(d,y,r),g=Math.max(d.properties.dist,y.properties.dist),v=n.default(d,y),b=i.default(t,g,v+90,r),m=i.default(t,g,v-90,r),E=a.default(c.lineString([b.geometry.coordinates,m.geometry.coordinates]),c.lineString([d.geometry.coordinates,y.geometry.coordinates])),P=null;E.features.length>0&&((P=E.features[0]).properties.dist=o.default(t,P,r),P.properties.location=s+o.default(d,P,r)),d.properties.dist<f.properties.dist&&((f=d).properties.index=p,f.properties.location=s),y.properties.dist<f.properties.dist&&((f=y).properties.index=p+1,f.properties.location=s+h),P&&P.properties.dist<f.properties.dist&&((f=P).properties.index=p),s+=h}})),f}},ekYj:function(e,t,r){"use strict";r("pS08"),r("LagC"),r("q8oJ"),r("C9fy"),r("8npG"),r("nWfQ"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.DrawCircleByDiameterMode=void 0;var n=a(r("Mu+0")),o=a(r("j3ZU")),i=r("4R+2");function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(h,e);var t,r,a,u,y=(t=h,function(){var e,r=p(t);if(s()){var n=p(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return f(this,e)});function h(){return c(this,h),y.apply(this,arguments)}return r=h,(a=[{key:"getTwoClickPolygon",value:function(e,t,r){var a=(r||{}).steps,u=void 0===a?64:a,c={steps:u};u<4&&(console.warn("Minimum steps to draw a circle is 4 "),c.steps=4);var l=(0,i.getIntermediatePosition)(e,t),f=Math.max((0,o.default)(e,l),.001);return(0,n.default)(l,f,c)}}])&&l(r.prototype,a),u&&l(r,u),h}(r("MMIt").TwoClickPolygonMode);t.DrawCircleByDiameterMode=y},f9Xn:function(e,t,r){"use strict";r.r(t);r("AqHK"),r("MIFh");var n=r("cqeU"),o=r("QJ+7"),i=r.n(o),a=r("kMLz"),u=(r("sc67"),r("JHok"),{meters:6371008.8,metres:6371008.8,millimeters:6371008800,millimetres:6371008800,centimeters:637100880,centimetres:637100880,kilometers:6371.0088,kilometres:6371.0088,miles:3958.761333810546,nauticalmiles:6371008.8/1852,inches:6371008.8*39.37,yards:6371008.8/1.0936,feet:20902260.511392,radians:1,degrees:6371008.8/111325});function c(e,t,r){if(!d(r=r||{}))throw new Error("options is invalid");var n=r.bbox,o=r.id;if(void 0===e)throw new Error("geometry is required");if(t&&t.constructor!==Object)throw new Error("properties must be an Object");n&&y(n),o&&h(o);var i={type:"Feature"};return o&&(i.id=o),n&&(i.bbox=n),i.properties=t||{},i.geometry=e,i}function l(e,t){if(!d(t=t||{}))throw new Error("options is invalid");var r=t.bbox,n=t.id;if(!e)throw new Error("No features passed");if(!Array.isArray(e))throw new Error("features must be an Array");r&&y(r),n&&h(n);var o={type:"FeatureCollection"};return n&&(o.id=n),r&&(o.bbox=r),o.features=e,o}function f(e,t){if(null==e)throw new Error("radians is required");if(t&&"string"!=typeof t)throw new Error("units must be a string");var r=u[t||"kilometers"];if(!r)throw new Error(t+" units is invalid");return e*r}function s(e,t){if(null==e)throw new Error("distance is required");if(t&&"string"!=typeof t)throw new Error("units must be a string");var r=u[t||"kilometers"];if(!r)throw new Error(t+" units is invalid");return e/r}function p(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}function d(e){return!!e&&e.constructor===Object}function y(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach((function(e){if(!p(e))throw new Error("bbox must only contain numbers")}))}function h(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}function g(e,t,r){if(null!==e)for(var n,o,i,a,u,c,l,f,s=0,p=0,d=e.type,y="FeatureCollection"===d,h="Feature"===d,v=y?e.features.length:1,b=0;b<v;b++){u=(f=!!(l=y?e.features[b].geometry:h?e.geometry:e)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<u;m++){var E=0,P=0;if(null!==(a=f?l.geometries[m]:l)){c=a.coordinates;var w=a.type;switch(s=!r||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===t(c,p,b,E,P))return!1;p++,E++;break;case"LineString":case"MultiPoint":for(n=0;n<c.length;n++){if(!1===t(c[n],p,b,E,P))return!1;p++,"MultiPoint"===w&&E++}"LineString"===w&&E++;break;case"Polygon":case"MultiLineString":for(n=0;n<c.length;n++){for(o=0;o<c[n].length-s;o++){if(!1===t(c[n][o],p,b,E,P))return!1;p++}"MultiLineString"===w&&E++,"Polygon"===w&&P++}"Polygon"===w&&E++;break;case"MultiPolygon":for(n=0;n<c.length;n++){for("MultiPolygon"===w&&(P=0),o=0;o<c[n].length;o++){for(i=0;i<c[n][o].length-s;i++){if(!1===t(c[n][o][i],p,b,E,P))return!1;p++}P++}E++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===g(a.geometries[n],t,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function v(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var r=0;r<e.features.length&&!1!==t(e.features[r],r);r++);}function b(e,t){var r,n,o,i,a,u,c,l,f,s,p=0,d="FeatureCollection"===e.type,y="Feature"===e.type,h=d?e.features.length:1;for(r=0;r<h;r++){for(u=d?e.features[r].geometry:y?e.geometry:e,l=d?e.features[r].properties:y?e.properties:{},f=d?e.features[r].bbox:y?e.bbox:void 0,s=d?e.features[r].id:y?e.id:void 0,a=(c=!!u&&"GeometryCollection"===u.type)?u.geometries.length:1,o=0;o<a;o++)if(null!==(i=c?u.geometries[o]:u))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(i,p,l,f,s))return!1;break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)if(!1===t(i.geometries[n],p,l,f,s))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,p,l,f,s))return!1;p++}}var m=r("KHcG");function E(e,t,r){if(!d(r=r||{}))throw new Error("options is invalid");var n=r.mutate;if(!e)throw new Error("geojson is required");return Array.isArray(e)&&p(e[0])?e="mercator"===t?P(e):w(e):(!0!==n&&(e=Object(m.a)(e)),g(e,(function(e){var r="mercator"===t?P(e):w(e);e[0]=r[0],e[1]=r[1]}))),e}function P(e){var t,r=Math.PI/180,n=6378137,o=20037508.342789244,i=[n*(Math.abs(e[0])<=180?e[0]:e[0]-360*((t=e[0])<0?-1:t>0?1:0))*r,n*Math.log(Math.tan(.25*Math.PI+.5*e[1]*r))];return i[0]>o&&(i[0]=o),i[0]<-o&&(i[0]=-o),i[1]>o&&(i[1]=o),i[1]<-o&&(i[1]=-o),i}function w(e){var t=180/Math.PI,r=6378137;return[e[0]*t/r,(.5*Math.PI-2*Math.atan(Math.exp(-e[1]/r)))*t]}var O=function(){return new _};function _(){this.reset()}_.prototype={constructor:_,reset:function(){this.s=this.t=0},add:function(e){M(S,e,this.t),M(this,S.s,this.s),this.s?this.t+=S.t:this.s=S.t},valueOf:function(){return this.s}};var S=new _;function M(e,t,r){var n=e.s=t+r,o=n-t,i=n-o;e.t=t-i+(r-o)}r("EMED");var j=1e-6,T=Math.PI,x=T/2,C=T/4,R=2*T,D=180/T,k=T/180,I=Math.abs,A=Math.atan,F=Math.atan2,N=Math.cos,G=(Math.ceil,Math.exp),L=(Math.floor,Math.log),q=(Math.pow,Math.sin),Y=(Math.sign,Math.sqrt),H=Math.tan;function J(e){return e>1?0:e<-1?T:Math.acos(e)}function U(e){return e>1?x:e<-1?-x:Math.asin(e)}function B(){}function X(e,t){e&&z.hasOwnProperty(e.type)&&z[e.type](e,t)}var K={Feature:function(e,t){X(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,n=-1,o=r.length;++n<o;)X(r[n].geometry,t)}},z={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var r=e.coordinates,n=-1,o=r.length;++n<o;)e=r[n],t.point(e[0],e[1],e[2])},LineString:function(e,t){W(e.coordinates,t,0)},MultiLineString:function(e,t){for(var r=e.coordinates,n=-1,o=r.length;++n<o;)W(r[n],t,0)},Polygon:function(e,t){Z(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,n=-1,o=r.length;++n<o;)Z(r[n],t)},GeometryCollection:function(e,t){for(var r=e.geometries,n=-1,o=r.length;++n<o;)X(r[n],t)}};function W(e,t,r){var n,o=-1,i=e.length-r;for(t.lineStart();++o<i;)n=e[o],t.point(n[0],n[1],n[2]);t.lineEnd()}function Z(e,t){var r=-1,n=e.length;for(t.polygonStart();++r<n;)W(e[r],t,1);t.polygonEnd()}var V=function(e,t){e&&K.hasOwnProperty(e.type)?K[e.type](e,t):X(e,t)};O(),O();r("zGcK");function Q(e){return[F(e[1],e[0]),U(e[2])]}function $(e){var t=e[0],r=e[1],n=N(r);return[n*N(t),n*q(t),q(r)]}function ee(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function te(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function re(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function ne(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function oe(e){var t=Y(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}O();var ie=function(e,t){function r(r,n){return r=e(r,n),t(r[0],r[1])}return e.invert&&t.invert&&(r.invert=function(r,n){return(r=t.invert(r,n))&&e.invert(r[0],r[1])}),r};function ae(e,t){return[e>T?e-R:e<-T?e+R:e,t]}function ue(e,t,r){return(e%=R)?t||r?ie(le(e),fe(t,r)):le(e):t||r?fe(t,r):ae}function ce(e){return function(t,r){return[(t+=e)>T?t-R:t<-T?t+R:t,r]}}function le(e){var t=ce(e);return t.invert=ce(-e),t}function fe(e,t){var r=N(e),n=q(e),o=N(t),i=q(t);function a(e,t){var a=N(t),u=N(e)*a,c=q(e)*a,l=q(t),f=l*r+u*n;return[F(c*o-f*i,u*r-l*n),U(f*o+c*i)]}return a.invert=function(e,t){var a=N(t),u=N(e)*a,c=q(e)*a,l=q(t),f=l*o-c*i;return[F(c*o+l*i,u*r+f*n),U(f*r-u*n)]},a}ae.invert=ae;function se(e,t,r,n,o,i){if(r){var a=N(t),u=q(t),c=n*r;null==o?(o=t+n*R,i=t-c/2):(o=pe(a,o),i=pe(a,i),(n>0?o<i:o>i)&&(o+=n*R));for(var l,f=o;n>0?f>i:f<i;f-=c)l=Q([a,-u*N(f),-u*q(f)]),e.point(l[0],l[1])}}function pe(e,t){(t=$(t))[0]-=e,oe(t);var r=J(-t[1]);return((-t[2]<0?-r:r)+R-j)%R}var de=function(){var e,t=[];return{point:function(t,r){e.push([t,r])},lineStart:function(){t.push(e=[])},lineEnd:B,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var r=t;return t=[],e=null,r}}},ye=function(e,t){return I(e[0]-t[0])<j&&I(e[1]-t[1])<j};function he(e,t,r,n){this.x=e,this.z=t,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}var ge=function(e,t,r,n,o){var i,a,u=[],c=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,r,n=e[0],a=e[t];if(ye(n,a)){for(o.lineStart(),i=0;i<t;++i)o.point((n=e[i])[0],n[1]);o.lineEnd()}else u.push(r=new he(n,e,null,!0)),c.push(r.o=new he(n,null,r,!1)),u.push(r=new he(a,e,null,!1)),c.push(r.o=new he(a,null,r,!0))}})),u.length){for(c.sort(t),ve(u),ve(c),i=0,a=c.length;i<a;++i)c[i].e=r=!r;for(var l,f,s=u[0];;){for(var p=s,d=!0;p.v;)if((p=p.n)===s)return;l=p.z,o.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(i=0,a=l.length;i<a;++i)o.point((f=l[i])[0],f[1]);else n(p.x,p.n.x,1,o);p=p.n}else{if(d)for(l=p.p.z,i=l.length-1;i>=0;--i)o.point((f=l[i])[0],f[1]);else n(p.x,p.p.x,-1,o);p=p.p}l=(p=p.o).z,d=!d}while(!p.v);o.lineEnd()}}};function ve(e){if(t=e.length){for(var t,r,n=0,o=e[0];++n<t;)o.n=r=e[n],r.p=o,o=r;o.n=r=e[0],r.p=o}}var be=r("vBe5");function me(e,t,r,n){function o(o,i){return e<=o&&o<=r&&t<=i&&i<=n}function i(o,i,u,l){var f=0,s=0;if(null==o||(f=a(o,u))!==(s=a(i,u))||c(o,i)<0^u>0)do{l.point(0===f||3===f?e:r,f>1?n:t)}while((f=(f+u+4)%4)!==s);else l.point(i[0],i[1])}function a(n,o){return I(n[0]-e)<j?o>0?0:3:I(n[0]-r)<j?o>0?2:1:I(n[1]-t)<j?o>0?1:0:o>0?3:2}function u(e,t){return c(e.x,t.x)}function c(e,t){var r=a(e,1),n=a(t,1);return r!==n?r-n:0===r?t[1]-e[1]:1===r?e[0]-t[0]:2===r?e[1]-t[1]:t[0]-e[0]}return function(a){var c,l,f,s,p,d,y,h,g,v,b,m=a,E=de(),P={point:w,lineStart:function(){P.point=O,l&&l.push(f=[]);v=!0,g=!1,y=h=NaN},lineEnd:function(){c&&(O(s,p),d&&g&&E.rejoin(),c.push(E.result()));P.point=w,g&&m.lineEnd()},polygonStart:function(){m=E,c=[],l=[],b=!0},polygonEnd:function(){var t=function(){for(var t=0,r=0,o=l.length;r<o;++r)for(var i,a,u=l[r],c=1,f=u.length,s=u[0],p=s[0],d=s[1];c<f;++c)i=p,a=d,s=u[c],p=s[0],d=s[1],a<=n?d>n&&(p-i)*(n-a)>(d-a)*(e-i)&&++t:d<=n&&(p-i)*(n-a)<(d-a)*(e-i)&&--t;return t}(),r=b&&t,o=(c=Object(be.d)(c)).length;(r||o)&&(a.polygonStart(),r&&(a.lineStart(),i(null,null,1,a),a.lineEnd()),o&&ge(c,u,t,i,a),a.polygonEnd());m=a,c=l=f=null}};function w(e,t){o(e,t)&&m.point(e,t)}function O(i,a){var u=o(i,a);if(l&&f.push([i,a]),v)s=i,p=a,d=u,v=!1,u&&(m.lineStart(),m.point(i,a));else if(u&&g)m.point(i,a);else{var c=[y=Math.max(-1e9,Math.min(1e9,y)),h=Math.max(-1e9,Math.min(1e9,h))],E=[i=Math.max(-1e9,Math.min(1e9,i)),a=Math.max(-1e9,Math.min(1e9,a))];!function(e,t,r,n,o,i){var a,u=e[0],c=e[1],l=0,f=1,s=t[0]-u,p=t[1]-c;if(a=r-u,s||!(a>0)){if(a/=s,s<0){if(a<l)return;a<f&&(f=a)}else if(s>0){if(a>f)return;a>l&&(l=a)}if(a=o-u,s||!(a<0)){if(a/=s,s<0){if(a>f)return;a>l&&(l=a)}else if(s>0){if(a<l)return;a<f&&(f=a)}if(a=n-c,p||!(a>0)){if(a/=p,p<0){if(a<l)return;a<f&&(f=a)}else if(p>0){if(a>f)return;a>l&&(l=a)}if(a=i-c,p||!(a<0)){if(a/=p,p<0){if(a>f)return;a>l&&(l=a)}else if(p>0){if(a<l)return;a<f&&(f=a)}return l>0&&(e[0]=u+l*s,e[1]=c+l*p),f<1&&(t[0]=u+f*s,t[1]=c+f*p),!0}}}}}(c,E,e,t,r,n)?u&&(m.lineStart(),m.point(i,a),b=!1):(g||(m.lineStart(),m.point(c[0],c[1])),m.point(E[0],E[1]),u||m.lineEnd(),b=!1)}y=i,h=a,g=u}return P}}var Ee=O(),Pe=function(e,t){var r=t[0],n=t[1],o=[q(r),-N(r),0],i=0,a=0;Ee.reset();for(var u=0,c=e.length;u<c;++u)if(f=(l=e[u]).length)for(var l,f,s=l[f-1],p=s[0],d=s[1]/2+C,y=q(d),h=N(d),g=0;g<f;++g,p=b,y=E,h=P,s=v){var v=l[g],b=v[0],m=v[1]/2+C,E=q(m),P=N(m),w=b-p,O=w>=0?1:-1,_=O*w,S=_>T,M=y*E;if(Ee.add(F(M*O*q(_),h*P+M*N(_))),i+=S?w+O*R:w,S^p>=r^b>=r){var x=te($(s),$(v));oe(x);var D=te(o,x);oe(D);var k=(S^w>=0?-1:1)*U(D[2]);(n>k||n===k&&(x[0]||x[1]))&&(a+=S^w>=0?1:-1)}}return(i<-j||i<j&&Ee<-j)^1&a};O();r("OeI1");var we=function(e){return e};O(),O();var Oe=1/0,_e=Oe,Se=-Oe,Me=Se;var je={point:function(e,t){e<Oe&&(Oe=e);e>Se&&(Se=e);t<_e&&(_e=t);t>Me&&(Me=t)},lineStart:B,lineEnd:B,polygonStart:B,polygonEnd:B,result:function(){var e=[[Oe,_e],[Se,Me]];return Se=Me=-(_e=Oe=1/0),e}};function Te(e){this._context=e}Te.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,R)}},result:B};O();function xe(){this._string=[]}function Ce(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}xe.prototype={_radius:4.5,_circle:Ce(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=Ce(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}};var Re=function(e,t,r,n){return function(o,i){var a,u,c,l=t(i),f=o.invert(n[0],n[1]),s=de(),p=t(s),d=!1,y={point:h,lineStart:v,lineEnd:b,polygonStart:function(){y.point=m,y.lineStart=E,y.lineEnd=P,u=[],a=[]},polygonEnd:function(){y.point=h,y.lineStart=v,y.lineEnd=b,u=Object(be.d)(u);var e=Pe(a,f);u.length?(d||(i.polygonStart(),d=!0),ge(u,ke,e,r,i)):e&&(d||(i.polygonStart(),d=!0),i.lineStart(),r(null,null,1,i),i.lineEnd()),d&&(i.polygonEnd(),d=!1),u=a=null},sphere:function(){i.polygonStart(),i.lineStart(),r(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(t,r){var n=o(t,r);e(t=n[0],r=n[1])&&i.point(t,r)}function g(e,t){var r=o(e,t);l.point(r[0],r[1])}function v(){y.point=g,l.lineStart()}function b(){y.point=h,l.lineEnd()}function m(e,t){c.push([e,t]);var r=o(e,t);p.point(r[0],r[1])}function E(){p.lineStart(),c=[]}function P(){m(c[0][0],c[0][1]),p.lineEnd();var e,t,r,n,o=p.clean(),l=s.result(),f=l.length;if(c.pop(),a.push(c),c=null,f)if(1&o){if((t=(r=l[0]).length-1)>0){for(d||(i.polygonStart(),d=!0),i.lineStart(),e=0;e<t;++e)i.point((n=r[e])[0],n[1]);i.lineEnd()}}else f>1&&2&o&&l.push(l.pop().concat(l.shift())),u.push(l.filter(De))}return y}};function De(e){return e.length>1}function ke(e,t){return((e=e.x)[0]<0?e[1]-x-j:x-e[1])-((t=t.x)[0]<0?t[1]-x-j:x-t[1])}var Ie=Re((function(){return!0}),(function(e){var t,r=NaN,n=NaN,o=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(i,a){var u=i>0?T:-T,c=I(i-r);I(c-T)<j?(e.point(r,n=(n+a)/2>0?x:-x),e.point(o,n),e.lineEnd(),e.lineStart(),e.point(u,n),e.point(i,n),t=0):o!==u&&c>=T&&(I(r-o)<j&&(r-=o*j),I(i-u)<j&&(i-=u*j),n=function(e,t,r,n){var o,i,a=q(e-r);return I(a)>j?A((q(t)*(i=N(n))*q(r)-q(n)*(o=N(t))*q(e))/(o*i*a)):(t+n)/2}(r,n,i,a),e.point(o,n),e.lineEnd(),e.lineStart(),e.point(u,n),t=0),e.point(r=i,n=a),o=u},lineEnd:function(){e.lineEnd(),r=n=NaN},clean:function(){return 2-t}}}),(function(e,t,r,n){var o;if(null==e)o=r*x,n.point(-T,o),n.point(0,o),n.point(T,o),n.point(T,0),n.point(T,-o),n.point(0,-o),n.point(-T,-o),n.point(-T,0),n.point(-T,o);else if(I(e[0]-t[0])>j){var i=e[0]<t[0]?T:-T;o=r*i/2,n.point(-i,o),n.point(0,o),n.point(i,o)}else n.point(t[0],t[1])}),[-T,-x]);var Ae=function(e,t){var r=N(e),n=r>0,o=I(r)>j;function i(e,t){return N(e)*N(t)>r}function a(e,t,n){var o=[1,0,0],i=te($(e),$(t)),a=ee(i,i),u=i[0],c=a-u*u;if(!c)return!n&&e;var l=r*a/c,f=-r*u/c,s=te(o,i),p=ne(o,l);re(p,ne(i,f));var d=s,y=ee(p,d),h=ee(d,d),g=y*y-h*(ee(p,p)-1);if(!(g<0)){var v=Y(g),b=ne(d,(-y-v)/h);if(re(b,p),b=Q(b),!n)return b;var m,E=e[0],P=t[0],w=e[1],O=t[1];P<E&&(m=E,E=P,P=m);var _=P-E,S=I(_-T)<j;if(!S&&O<w&&(m=w,w=O,O=m),S||_<j?S?w+O>0^b[1]<(I(b[0]-E)<j?w:O):w<=b[1]&&b[1]<=O:_>T^(E<=b[0]&&b[0]<=P)){var M=ne(d,(-y+v)/h);return re(M,p),[b,Q(M)]}}}function u(t,r){var o=n?e:T-e,i=0;return t<-o?i|=1:t>o&&(i|=2),r<-o?i|=4:r>o&&(i|=8),i}return Re(i,(function(e){var t,r,c,l,f;return{lineStart:function(){l=c=!1,f=1},point:function(s,p){var d,y=[s,p],h=i(s,p),g=n?h?0:u(s,p):h?u(s+(s<0?T:-T),p):0;if(!t&&(l=c=h)&&e.lineStart(),h!==c&&(!(d=a(t,y))||ye(t,d)||ye(y,d))&&(y[0]+=j,y[1]+=j,h=i(y[0],y[1])),h!==c)f=0,h?(e.lineStart(),d=a(y,t),e.point(d[0],d[1])):(d=a(t,y),e.point(d[0],d[1]),e.lineEnd()),t=d;else if(o&&t&&n^h){var v;g&r||!(v=a(y,t,!0))||(f=0,n?(e.lineStart(),e.point(v[0][0],v[0][1]),e.point(v[1][0],v[1][1]),e.lineEnd()):(e.point(v[1][0],v[1][1]),e.lineEnd(),e.lineStart(),e.point(v[0][0],v[0][1])))}!h||t&&ye(t,y)||e.point(y[0],y[1]),t=y,c=h,r=g},lineEnd:function(){c&&e.lineEnd(),t=null},clean:function(){return f|(l&&c)<<1}}}),(function(r,n,o,i){se(i,e,t,o,r,n)}),n?[0,-e]:[-T,e-T])};function Fe(e){return function(t){var r=new Ne;for(var n in e)r[n]=e[n];return r.stream=t,r}}function Ne(){}function Ge(e,t,r){var n=t[1][0]-t[0][0],o=t[1][1]-t[0][1],i=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),null!=i&&e.clipExtent(null),V(r,e.stream(je));var a=je.result(),u=Math.min(n/(a[1][0]-a[0][0]),o/(a[1][1]-a[0][1])),c=+t[0][0]+(n-u*(a[1][0]+a[0][0]))/2,l=+t[0][1]+(o-u*(a[1][1]+a[0][1]))/2;return null!=i&&e.clipExtent(i),e.scale(150*u).translate([c,l])}function Le(e,t,r){return Ge(e,[[0,0],t],r)}Ne.prototype={constructor:Ne,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var qe=N(30*k),Ye=function(e,t){return+t?function(e,t){function r(n,o,i,a,u,c,l,f,s,p,d,y,h,g){var v=l-n,b=f-o,m=v*v+b*b;if(m>4*t&&h--){var E=a+p,P=u+d,w=c+y,O=Y(E*E+P*P+w*w),_=U(w/=O),S=I(I(w)-1)<j||I(i-s)<j?(i+s)/2:F(P,E),M=e(S,_),T=M[0],x=M[1],C=T-n,R=x-o,D=b*C-v*R;(D*D/m>t||I((v*C+b*R)/m-.5)>.3||a*p+u*d+c*y<qe)&&(r(n,o,i,a,u,c,T,x,S,E/=O,P/=O,w,h,g),g.point(T,x),r(T,x,S,E,P,w,l,f,s,p,d,y,h,g))}}return function(t){var n,o,i,a,u,c,l,f,s,p,d,y,h={point:g,lineStart:v,lineEnd:m,polygonStart:function(){t.polygonStart(),h.lineStart=E},polygonEnd:function(){t.polygonEnd(),h.lineStart=v}};function g(r,n){r=e(r,n),t.point(r[0],r[1])}function v(){f=NaN,h.point=b,t.lineStart()}function b(n,o){var i=$([n,o]),a=e(n,o);r(f,s,l,p,d,y,f=a[0],s=a[1],l=n,p=i[0],d=i[1],y=i[2],16,t),t.point(f,s)}function m(){h.point=g,t.lineEnd()}function E(){v(),h.point=P,h.lineEnd=w}function P(e,t){b(n=e,t),o=f,i=s,a=p,u=d,c=y,h.point=b}function w(){r(f,s,l,p,d,y,o,i,n,a,u,c,16,t),h.lineEnd=m,m()}return h}}(e,t):function(e){return Fe({point:function(t,r){t=e(t,r),this.stream.point(t[0],t[1])}})}(e)};var He=Fe({point:function(e,t){this.stream.point(e*k,t*k)}});function Je(e){return Ue((function(){return e}))()}function Ue(e){var t,r,n,o,i,a,u,c,l,f,s=150,p=480,d=250,y=0,h=0,g=0,v=0,b=0,m=null,E=Ie,P=null,w=we,O=.5,_=Ye(j,O);function S(e){return[(e=i(e[0]*k,e[1]*k))[0]*s+r,n-e[1]*s]}function M(e){return(e=i.invert((e[0]-r)/s,(n-e[1])/s))&&[e[0]*D,e[1]*D]}function j(e,o){return[(e=t(e,o))[0]*s+r,n-e[1]*s]}function T(){i=ie(o=ue(g,v,b),t);var e=t(y,h);return r=p-e[0]*s,n=d+e[1]*s,x()}function x(){return l=f=null,S}return S.stream=function(e){return l&&f===e?l:l=He(E(o,_(w(f=e))))},S.clipAngle=function(e){return arguments.length?(E=+e?Ae(m=e*k,6*k):(m=null,Ie),x()):m*D},S.clipExtent=function(e){return arguments.length?(w=null==e?(P=a=u=c=null,we):me(P=+e[0][0],a=+e[0][1],u=+e[1][0],c=+e[1][1]),x()):null==P?null:[[P,a],[u,c]]},S.scale=function(e){return arguments.length?(s=+e,T()):s},S.translate=function(e){return arguments.length?(p=+e[0],d=+e[1],T()):[p,d]},S.center=function(e){return arguments.length?(y=e[0]%360*k,h=e[1]%360*k,T()):[y*D,h*D]},S.rotate=function(e){return arguments.length?(g=e[0]%360*k,v=e[1]%360*k,b=e.length>2?e[2]%360*k:0,T()):[g*D,v*D,b*D]},S.precision=function(e){return arguments.length?(_=Ye(j,O=e*e),x()):Y(O)},S.fitExtent=function(e,t){return Ge(S,e,t)},S.fitSize=function(e,t){return Le(S,e,t)},function(){return t=e.apply(this,arguments),S.invert=t.invert&&M,T()}}function Be(e){return function(t,r){var n=N(t),o=N(r),i=e(n*o);return[i*o*q(t),i*q(r)]}}function Xe(e){return function(t,r){var n=Y(t*t+r*r),o=e(n),i=q(o),a=N(o);return[F(t*i,n*a),U(n&&r*i/n)]}}var Ke=Be((function(e){return Y(2/(1+e))}));Ke.invert=Xe((function(e){return 2*U(e/2)}));var ze=Be((function(e){return(e=J(e))&&e/q(e)}));ze.invert=Xe((function(e){return e}));function We(e,t){return[e,L(H((x+t)/2))]}We.invert=function(e,t){return[e,2*A(G(t))-x]};function Ze(e){var t,r,n,o=Je(e),i=o.center,a=o.scale,u=o.translate,c=o.clipExtent,l=null;function f(){var i=T*a(),u=o(function(e){function t(t){return(t=e(t[0]*k,t[1]*k))[0]*=D,t[1]*=D,t}return e=ue(e[0]*k,e[1]*k,e.length>2?e[2]*k:0),t.invert=function(t){return(t=e.invert(t[0]*k,t[1]*k))[0]*=D,t[1]*=D,t},t}(o.rotate()).invert([0,0]));return c(null==l?[[u[0]-i,u[1]-i],[u[0]+i,u[1]+i]]:e===We?[[Math.max(u[0]-i,l),t],[Math.min(u[0]+i,r),n]]:[[l,Math.max(u[1]-i,t)],[r,Math.min(u[1]+i,n)]])}return o.scale=function(e){return arguments.length?(a(e),f()):a()},o.translate=function(e){return arguments.length?(u(e),f()):u()},o.center=function(e){return arguments.length?(i(e),f()):i()},o.clipExtent=function(e){return arguments.length?(null==e?l=t=r=n=null:(l=+e[0][0],t=+e[0][1],r=+e[1][0],n=+e[1][1]),f()):null==l?null:[[l,t],[r,n]]},f()}function Ve(e,t){return[e,t]}Ve.invert=Ve;function Qe(e,t){var r=N(t),n=N(e)*r;return[r*q(e)/n,q(t)/n]}Qe.invert=Xe(A);function $e(e,t){var r=t*t,n=r*r;return[e*(.8707-.131979*r+n*(n*(.003971*r-.001529*n)-.013791)),t*(1.007226+r*(.015085+n*(.028874*r-.044475-.005916*n)))]}$e.invert=function(e,t){var r,n=t,o=25;do{var i=n*n,a=i*i;n-=r=(n*(1.007226+i*(.015085+a*(.028874*i-.044475-.005916*a)))-t)/(1.007226+i*(.045255+a*(.259866*i-.311325-.005916*11*a)))}while(I(r)>j&&--o>0);return[e/(.8707+(i=n*n)*(i*(i*i*i*(.003971-.001529*i)-.013791)-.131979)),n]};function et(e,t){return[N(t)*q(e),q(t)]}et.invert=Xe(U);function tt(e,t){var r=N(t),n=1+N(e)*r;return[r*q(e)/n,q(t)/n]}tt.invert=Xe((function(e){return 2*A(e)}));function rt(e,t){return[L(H((x+t)/2)),-e]}rt.invert=function(e,t){return[-t,2*A(G(e))-x]};function nt(e,t,r,n){var o,u=e.properties||{},p="Feature"===e.type?e.geometry:e;if("GeometryCollection"===p.type){var d=[];return b(e,(function(e){var o=nt(e,t,r,n);o&&d.push(o)})),l(d)}var y=i()(e),h=y[1]>50&&y[3]>50;o=h?{type:p.type,coordinates:ot(p.coordinates,at(p))}:function(e,t){return E(e,"mercator",t)}(p);var g,v=(new a.GeoJSONReader).read(o),m=f(s(t,r),"meters"),P=a.BufferOp.bufferOp(v,m);if(!function e(t){return Array.isArray(t[0])?e(t[0]):isNaN(t[0])}((P=(new a.GeoJSONWriter).write(P)).coordinates))return(g=h?{type:P.type,coordinates:it(P.coordinates,at(p))}:function(e,t){return E(e,"wgs84",t)}(P)).geometry?g:c(g,u)}function ot(e,t){return"object"!=typeof e[0]?t(e):e.map((function(e){return ot(e,t)}))}function it(e,t){return"object"!=typeof e[0]?t.invert(e):e.map((function(e){return it(e,t)}))}function at(e){var t=Object(n.a)(e).geometry.coordinates.reverse(),r=t.map((function(e){return-e}));return function(){var e=Ze(rt),t=e.center,r=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?r([e[0],e[1],e.length>2?e[2]+90:90]):[(e=r())[0],e[1],e[2]-90]},r([0,0,90]).scale(159.155)}().center(t).rotate(r).scale(6371008.8)}t.default=function(e,t,r){var n=(r=r||{}).units,o=r.steps||64;if(!e)throw new Error("geojson is required");if("object"!=typeof r)throw new Error("options must be an object");if("number"!=typeof o)throw new Error("steps must be an number");if(void 0===t)throw new Error("radius is required");if(o<=0)throw new Error("steps must be greater than 0");o=o||64,n=n||"kilometers";var i=[];switch(e.type){case"GeometryCollection":return b(e,(function(e){var r=nt(e,t,n,o);r&&i.push(r)})),l(i);case"FeatureCollection":return v(e,(function(e){var r=nt(e,t,n,o);r&&v(r,(function(e){e&&i.push(e)}))})),l(i)}return nt(e,t,n,o)}},fMhR:function(e,t,r){"use strict";r("pS08"),r("LagC"),r("q8oJ"),r("C9fy"),r("8npG"),r("nWfQ"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.MeasureDistanceMode=void 0;var n=a(r("j3ZU")),o=a(r("HYY4")),i=r("4R+2");function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=[],v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(v,e);var t,r,i,a,u=(t=v,function(){var e,r=d(t);if(p()){var n=d(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return f(this,e)});function v(){var e;c(this,v);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return h(s(e=u.call.apply(u,[this].concat(r))),"startingPoint",null),h(s(e),"endingPoint",null),h(s(e),"endingPointLocked",!1),h(s(e),"_getTooltips",(0,o.default)((function(e){var t=e.modeConfig,r=e.startingPoint,o=e.endingPoint,i=g;if(r&&o){var a,u=t||{},c=u.formatTooltip,l=u.turfOptions,f=u.measurementCallback,s=l&&l.units||"kilometers",p=(0,n.default)(r,o,l);a=c?c(p):"".concat(parseFloat(p).toFixed(2)," ").concat(s),f&&f(p),i=[{position:o.geometry.coordinates,text:a}]}return i}))),e}return r=v,(i=[{key:"_setEndingPoint",value:function(e){this.endingPoint={type:"Feature",properties:{guideType:"editHandle",editHandleType:"existing",featureIndex:-1,positionIndexes:[]},geometry:{type:"Point",coordinates:e}}}},{key:"handleClick",value:function(e,t){!this.startingPoint||this.endingPointLocked?(this.startingPoint={type:"Feature",properties:{guideType:"editHandle",editHandleType:"existing",featureIndex:-1,positionIndexes:[]},geometry:{type:"Point",coordinates:e.mapCoords}},this.endingPoint=null,this.endingPointLocked=!1):this.startingPoint&&(this._setEndingPoint(e.mapCoords),this.endingPointLocked=!0)}},{key:"handlePointerMove",value:function(e,t){this.startingPoint&&!this.endingPointLocked&&this._setEndingPoint(e.mapCoords),t.onUpdateCursor("cell")}},{key:"getGuides",value:function(e){var t={type:"FeatureCollection",features:[]},r=t.features;return this.startingPoint&&r.push(this.startingPoint),this.endingPoint&&r.push(this.endingPoint),this.startingPoint&&this.endingPoint&&r.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[this.startingPoint.geometry.coordinates,this.endingPoint.geometry.coordinates]}}),t}},{key:"getTooltips",value:function(e){return this._getTooltips({modeConfig:e.modeConfig,startingPoint:this.startingPoint,endingPoint:this.endingPoint})}}])&&l(r.prototype,i),a&&l(r,a),v}(i.GeoJsonEditMode);t.MeasureDistanceMode=v},gBT9:function(e,t,r){var n=r("BjK0"),o=Math.floor;e.exports=function(e){return!n(e)&&isFinite(e)&&o(e)===e}},gDik:function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},gbZC:function(e,t,r){"use strict";r("MIFh"),r("sc67"),r("JHok"),r("AqHK");function n(e){if(null==e)throw new Error("radians is required");return 180*(e%(2*Math.PI))/Math.PI}function o(e){if(null==e)throw new Error("degrees is required");return e%360*Math.PI/180}function i(e){return!!e&&e.constructor===Object}function a(e){if(!e)throw new Error("coord is required");if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates;if(Array.isArray(e)&&e.length>=2&&void 0===e[0].length&&void 0===e[1].length)return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function u(e,t){var r=o(e[1]),i=o(t[1]),a=o(t[0]-e[0]);a>Math.PI&&(a-=2*Math.PI),a<-Math.PI&&(a+=2*Math.PI);var u=Math.log(Math.tan(i/2+Math.PI/4)/Math.tan(r/2+Math.PI/4));return(n(Math.atan2(a,u))+360)%360}t.a=function(e,t,r){if(!i(r=r||{}))throw new Error("options is invalid");var n,o=r.final;if(!e)throw new Error("start point is required");if(!t)throw new Error("end point is required");return(n=o?u(a(t),a(e)):u(a(e),a(t)))>180?-(360-n):n}},"hKI/":function(e,t,r){(function(t){r("sC2a"),r("q8oJ"),r("C9fy"),r("8npG");var n=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,a=/^0o[0-7]+$/i,u=parseInt,c="object"==typeof t&&t&&t.Object===Object&&t,l="object"==typeof self&&self&&self.Object===Object&&self,f=c||l||Function("return this")(),s=Object.prototype.toString,p=Math.max,d=Math.min,y=function(){return f.Date.now()};function h(e,t,r){var n,o,i,a,u,c,l=0,f=!1,s=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var r=n,i=o;return n=o=void 0,l=t,a=e.apply(i,r)}function m(e){return l=e,u=setTimeout(P,t),f?b(e):a}function E(e){var r=e-c;return void 0===c||r>=t||r<0||s&&e-l>=i}function P(){var e=y();if(E(e))return w(e);u=setTimeout(P,function(e){var r=t-(e-c);return s?d(r,i-(e-l)):r}(e))}function w(e){return u=void 0,h&&n?b(e):(n=o=void 0,a)}function O(){var e=y(),r=E(e);if(n=arguments,o=this,c=e,r){if(void 0===u)return m(c);if(s)return u=setTimeout(P,t),b(c)}return void 0===u&&(u=setTimeout(P,t)),a}return t=v(t)||0,g(r)&&(f=!!r.leading,i=(s="maxWait"in r)?p(v(r.maxWait)||0,t):i,h="trailing"in r?!!r.trailing:h),O.cancel=function(){void 0!==u&&clearTimeout(u),l=0,n=c=o=u=void 0},O.flush=function(){return void 0===u?a:w(y())},O}function g(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function v(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==s.call(e)}(e))return NaN;if(g(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=g(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var r=i.test(e);return r||a.test(e)?u(e.slice(2),r?2:8):o.test(e)?NaN:+e}e.exports=function(e,t,r){var n=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return g(r)&&(n="leading"in r?!!r.leading:n,o="trailing"in r?!!r.trailing:o),h(e,t,{leading:n,maxWait:t,trailing:o})}}).call(this,r("yLpj"))},hmiN:function(e,t,r){"use strict";r("v9g0"),r("pS08"),r("LagC"),r("nWfQ"),r("MIFh"),r("rzGZ"),r("YbXK"),r("cFtU"),r("pJf4"),r("q8oJ"),r("C9fy"),r("8npG"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.ScaleMode=void 0;var n=g(r("f9Xn")),o=g(r("QJ+7")),i=g(r("sS7t")),a=g(r("qhoL")),u=g(r("UWCo")),c=r("/rf6"),l=r("cWyK"),f=g(r("j3ZU")),s=g(r("dnTh")),p=r("AKIq"),d=r("lVFs"),y=r("4R+2"),h=r("KV4q");function g(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(v,e);var t,r,f,y,g=(t=v,function(){var e,r=S(t);if(_()){var n=S(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return w(this,e)});function v(){var e;E(this,v);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return j(O(e=g.call.apply(g,[this].concat(r))),"_geometryBeingScaled",void 0),j(O(e),"_selectedEditHandle",void 0),j(O(e),"_cornerGuidePoints",void 0),j(O(e),"_cursor",void 0),j(O(e),"_isScaling",!1),j(O(e),"_isSinglePointGeometrySelected",(function(e){var t=(e||{}).features;return!(!Array.isArray(t)||1!==t.length)&&"Point"===(0,p.getGeom)(t[0]).type})),j(O(e),"_getOppositeScaleHandle",(function(t){var r=t&&t.properties&&Array.isArray(t.properties.positionIndexes)&&t.properties.positionIndexes[0];if("number"!=typeof r)return null;var n=e._cornerGuidePoints.length,o=(r+n/2)%n;return e._cornerGuidePoints.find((function(e){return!!Array.isArray(e.properties.positionIndexes)&&e.properties.positionIndexes[0]===o}))})),j(O(e),"_getUpdatedData",(function(e,t){for(var r=new h.ImmutableFeatureCollection(e.data),n=e.selectedIndexes,o=0;o<n.length;o++){var i=n[o],a=t.features[o];r=r.replaceGeometry(i,a.geometry)}return r.getObject()})),j(O(e),"isEditHandleSelcted",(function(){return Boolean(e._selectedEditHandle)})),j(O(e),"getScaleAction",(function(t,r,n,o){if(!e._selectedEditHandle||e._isSinglePointGeometrySelected(e._geometryBeingScaled))return null;var i=e._getOppositeScaleHandle(e._selectedEditHandle),a=(0,p.getCoord)(i),u=x(a,t,r),c=(0,s.default)(e._geometryBeingScaled,u,{origin:a});return{updatedData:e._getUpdatedData(o,c),editType:n,editContext:{featureIndexes:o.selectedIndexes}}})),j(O(e),"updateCursor",(function(t){if(e._selectedEditHandle){e._cursor&&t.onUpdateCursor(e._cursor);var r=e.getSelectedFeaturesAsFeatureCollection(t),n=(0,i.default)(r),o=(0,a.default)(n,e._selectedEditHandle),u=o<0?o+180:o;u>=0&&u<=90||u>=180&&u<=270?(e._cursor="nesw-resize",t.onUpdateCursor("nesw-resize")):(e._cursor="nwse-resize",t.onUpdateCursor("nwse-resize"))}else t.onUpdateCursor(null),e._cursor=null})),e}return r=v,(f=[{key:"handlePointerMove",value:function(e,t){if(!this._isScaling){var r=(0,d.getPickedEditHandle)(e.picks);this._selectedEditHandle=r&&"scale"===r.properties.editHandleType?r:null}this.updateCursor(t)}},{key:"handleStartDragging",value:function(e,t){this._selectedEditHandle&&(this._isScaling=!0,this._geometryBeingScaled=this.getSelectedFeaturesAsFeatureCollection(t))}},{key:"handleDragging",value:function(e,t){if(this._isScaling){var r=this.getScaleAction(e.pointerDownMapCoords,e.mapCoords,"scaling",t);r&&t.onEdit(r),e.cancelPan()}}},{key:"handleStopDragging",value:function(e,t){if(this._isScaling){var r=this.getScaleAction(e.pointerDownMapCoords,e.mapCoords,"scaled",t);r&&t.onEdit(r),this._geometryBeingScaled=null,this._selectedEditHandle=null,this._cursor=null,this._isScaling=!1}}},{key:"getGuides",value:function(e){this._cornerGuidePoints=[];var t=this.getSelectedFeaturesAsFeatureCollection(e),r=this._isSinglePointGeometrySelected(t)?(0,n.default)(t,1):t,i=(0,u.default)((0,o.default)(r));i.properties.mode="scale";var a=[];return(0,l.coordEach)(i,(function(e,t){if(t<4){var r=(0,c.point)(e,{guideType:"editHandle",editHandleType:"scale",positionIndexes:[t]});a.push(r)}})),this._cornerGuidePoints=a,(0,c.featureCollection)([i].concat(b(this._cornerGuidePoints)))}}])&&P(r.prototype,f),y&&P(r,y),v}(y.GeoJsonEditMode);function x(e,t,r){var n=(0,f.default)(e,t);return(0,f.default)(e,r)/n}t.ScaleMode=T},iJqO:function(e,t,r){"use strict";r("pS08"),r("LagC"),r("q8oJ"),r("C9fy"),r("8npG"),r("nWfQ"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.TranslateMode=void 0;var n=l(r("qhoL")),o=l(r("j3ZU")),i=l(r("oDJc")),a=r("/rf6"),u=r("4R+2"),c=r("KV4q");function l(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(m,e);var t,r,u,l,f=(t=m,function(){var e,r=g(t);if(h()){var n=g(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return d(this,e)});function m(){var e;s(this,m);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return b(y(e=f.call.apply(f,[this].concat(r))),"_geometryBeforeTranslate",void 0),b(y(e),"_isTranslatable",void 0),e}return r=m,(u=[{key:"handleDragging",value:function(e,t){if(this._isTranslatable){if(this._geometryBeforeTranslate){var r=this.getTranslateAction(e.pointerDownMapCoords,e.mapCoords,"translating",t);r&&t.onEdit(r)}e.cancelPan()}}},{key:"handlePointerMove",value:function(e,t){this._isTranslatable=this.isSelectionPicked(e.pointerDownPicks||e.picks,t),this.updateCursor(t)}},{key:"handleStartDragging",value:function(e,t){this._isTranslatable&&(this._geometryBeforeTranslate=this.getSelectedFeaturesAsFeatureCollection(t))}},{key:"handleStopDragging",value:function(e,t){if(this._geometryBeforeTranslate){var r=this.getTranslateAction(e.pointerDownMapCoords,e.mapCoords,"translated",t);r&&t.onEdit(r),this._geometryBeforeTranslate=null}}},{key:"updateCursor",value:function(e){this._isTranslatable?e.onUpdateCursor("move"):e.onUpdateCursor(null)}},{key:"getTranslateAction",value:function(e,t,r,u){if(!this._geometryBeforeTranslate)return null;for(var l=(0,a.point)(e),f=(0,a.point)(t),s=(0,o.default)(l,f),p=(0,n.default)(l,f),d=(0,i.default)(this._geometryBeforeTranslate,s,p),y=new c.ImmutableFeatureCollection(u.data),h=u.selectedIndexes,g=0;g<h.length;g++){var v=h[g],b=d.features[g];y=y.replaceGeometry(v,b.geometry)}return{updatedData:y.getObject(),editType:r,editContext:{featureIndexes:h}}}}])&&p(r.prototype,u),l&&p(r,l),m}(u.GeoJsonEditMode);t.TranslateMode=m},iuFa:function(e,t,r){var n=r("P8UN");n(n.S,"Number",{isNaN:function(e){return e!=e}})},j3ZU:function(e,t,r){"use strict";r("R48M"),Object.defineProperty(t,"__esModule",{value:!0});var n=r("AKIq"),o=r("/rf6");t.default=function(e,t,r){void 0===r&&(r={});var i=n.getCoord(e),a=n.getCoord(t),u=o.degreesToRadians(a[1]-i[1]),c=o.degreesToRadians(a[0]-i[0]),l=o.degreesToRadians(i[1]),f=o.degreesToRadians(a[1]),s=Math.pow(Math.sin(u/2),2)+Math.pow(Math.sin(c/2),2)*Math.cos(l)*Math.cos(f);return o.radiansToLength(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)),r.units)}},jWzm:function(e,t,r){"use strict";r("pS08"),r("LagC"),r("q8oJ"),r("C9fy"),r("8npG"),r("nWfQ"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendLineStringMode=void 0;var n=r("4R+2"),o=r("KV4q");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(d,e);var t,r,n,i,p=(t=d,function(){var e,r=f(t);if(l()){var n=f(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return c(this,e)});function d(){return a(this,d),p.apply(this,arguments)}return r=d,(n=[{key:"getSingleSelectedLineString",value:function(e){var t=this.getSelectedGeometry(e);return t&&"LineString"===t.type?t:null}},{key:"handleClick",value:function(e,t){var r=t.selectedIndexes,n=this.getSingleSelectedLineString(t);if(n){var i=[n.coordinates.length],a=t.modeConfig;a&&a.drawAtFront&&(i=[0]);var u=r[0],c=new o.ImmutableFeatureCollection(t.data).addPosition(u,i,e.mapCoords).getObject();t.onEdit({updatedData:c,editType:"addPosition",editContext:{featureIndexes:[u],positionIndexes:i,position:e.mapCoords}})}else console.warn("ExtendLineStringMode only supported for single LineString selection")}},{key:"getGuides",value:function(e){var t={type:"FeatureCollection",features:[]},r=this.getSingleSelectedLineString(e);if(!r)return t;var n=e.lastPointerMoveEvent&&e.lastPointerMoveEvent.mapCoords,o=null,i=e.modeConfig;return o=i&&i.drawAtFront?r.coordinates[0]:r.coordinates[r.coordinates.length-1],t.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[o,n]}}),t}},{key:"handlePointerMove",value:function(e,t){t.onUpdateCursor("cell")}}])&&u(r.prototype,n),i&&u(r,i),d}(n.GeoJsonEditMode);t.ExtendLineStringMode=p},jyar:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return p})),r.d(t,"renderToDom",(function(){return d}));r("E5k/");var n=r("q1tI"),o=r("i8i4"),i=r("+qjn"),a=r("MoSN"),u=r("O3R+"),c=r.n(u);var l=function(e){var t,r;function o(){return e.apply(this,arguments)||this}return r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,o.prototype.render=function(){var e=this.props.polygon,t=e&&c()(e);return n.createElement("div",{className:"control-panel"},n.createElement("h3",null,"Draw Polygon"),e&&n.createElement("p",null,t," ",n.createElement("br",null),"square meters"),n.createElement("div",{className:"source-link"},n.createElement("a",{href:"https://github.com/visgl/react-map-gl/tree/5.2-release/examples/draw-polygon",target:"_new"},"View Code ")))},o}(n.PureComponent);function f(e){e.feature;switch(e.state){case a.RENDER_STATE.SELECTED:case a.RENDER_STATE.HOVERED:case a.RENDER_STATE.UNCOMMITTED:return{fill:"rgb(251, 176, 59)",fillOpacity:1,stroke:"rgb(255, 255, 255)",strokeWidth:2,r:7};default:return{fill:"rgb(251, 176, 59)",fillOpacity:1,stroke:"rgb(255, 255, 255)",strokeWidth:2,r:5}}}function s(e){e.feature,e.index;switch(e.state){case a.RENDER_STATE.SELECTED:case a.RENDER_STATE.HOVERED:case a.RENDER_STATE.UNCOMMITTED:case a.RENDER_STATE.CLOSING:return{stroke:"rgb(251, 176, 59)",strokeWidth:2,fill:"rgb(251, 176, 59)",fillOpacity:.3,strokeDasharray:"4,2"};default:return{stroke:"rgb(60, 178, 208)",strokeWidth:2,fill:"rgb(60, 178, 208)",fillOpacity:.1}}}var p=function(e){var t,r;function o(t){var r;return(r=e.call(this,t)||this)._updateViewport=function(e){r.setState({viewport:e})},r._onSelect=function(e){r.setState({selectedFeatureIndex:e&&e.selectedFeatureIndex})},r._onDelete=function(){var e=r.state.selectedFeatureIndex;null!==e&&e>=0&&r._editorRef.deleteFeatures(e)},r._onUpdate=function(e){"addFeature"===e.editType&&r.setState({mode:new a.EditingMode})},r._renderDrawTools=function(){return n.createElement("div",{className:"mapboxgl-ctrl-top-left"},n.createElement("div",{className:"mapboxgl-ctrl-group mapboxgl-ctrl"},n.createElement("button",{className:"mapbox-gl-draw_ctrl-draw-btn mapbox-gl-draw_polygon",title:"Polygon tool (p)",onClick:function(){return r.setState({mode:new a.DrawPolygonMode})}}),n.createElement("button",{className:"mapbox-gl-draw_ctrl-draw-btn mapbox-gl-draw_trash",title:"Delete",onClick:r._onDelete})))},r._renderControlPanel=function(){var e=r._editorRef&&r._editorRef.getFeatures(),t=r.state.selectedFeatureIndex;e&&null===t&&(t=e.length-1);var o=e&&e.length?e[t]:null;return n.createElement(l,{containerComponent:r.props.containerComponent,polygon:o})},r._editorRef=null,r.state={viewport:{longitude:-91.874,latitude:42.76,zoom:12},mode:null,selectedFeatureIndex:null},r}return r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,o.prototype.render=function(){var e=this,t=this.state,r=t.viewport,o=t.mode;return n.createElement(i.default,Object.assign({},r,{width:"100%",height:"100%",mapStyle:"mapbox://styles/mapbox/satellite-v9",mapboxApiAccessToken:"",onViewportChange:this._updateViewport}),n.createElement(a.Editor,{ref:function(t){return e._editorRef=t},style:{width:"100%",height:"100%"},clickRadius:12,mode:o,onSelect:this._onSelect,onUpdate:this._onUpdate,editHandleShape:"circle",featureStyle:s,editHandleStyle:f}),this._renderDrawTools(),this._renderControlPanel())},o}(n.Component);function d(e){Object(o.render)(n.createElement(p,null),e)}},"lF+Y":function(e,t,r){"use strict";r("gu/5"),r("eoYm"),r("v9g0"),r("pS08"),r("LagC"),r("q8oJ"),r("C9fy"),r("nWfQ"),r("ELYx"),r("+ar0"),r("xtjI"),r("JHok"),r("OeI1"),r("rzGZ"),r("Dq+y"),r("8npG"),r("Ggvi"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.TransformMode=void 0;var n=r("/rf6"),o=r("iJqO"),i=r("hmiN"),a=r("7it9");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function p(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(b,e);var t,r,u,g,v=(t=b,function(){var e,r=y(t);if(d()){var n=y(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return p(this,e)});function b(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),v.call(this,[new o.TranslateMode,new i.ScaleMode,new a.RotateMode])}return r=b,(u=[{key:"handlePointerMove",value:function(e,t){var r=null;s(y(b.prototype),"handlePointerMove",this).call(this,e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{onUpdateCursor:function(e){r=e||r}})),t.onUpdateCursor(r)}},{key:"handleStartDragging",value:function(e,t){var r=null,n=null,a=[];this._modes.forEach((function(e){e instanceof o.TranslateMode?n=e:(e instanceof i.ScaleMode&&(r=e),a.push(e))})),r instanceof i.ScaleMode&&!r.isEditHandleSelcted()&&a.push(n),a.filter(Boolean).forEach((function(r){return r.handleStartDragging(e,t)}))}},{key:"getGuides",value:function(e){var t=s(y(b.prototype),"getGuides",this).call(this,e),r=(this._modes||[]).find((function(e){return e instanceof a.RotateMode}));if(r instanceof a.RotateMode){var o=t.features.filter((function(e){var t=e.properties||{},n=t.editHandleType,o=[t.mode];return r.getIsRotating()&&o.push(n),!o.includes("scale")}));t=(0,n.featureCollection)(o)}return t}}])&&f(r.prototype,u),g&&f(r,g),b}(r("PfwA").CompositeMode);t.TransformMode=g},lVFs:function(e,t,r){"use strict";r("OeI1"),r("v9g0"),r("JHok"),r("AqHK"),r("YbXK"),r("cFtU"),r("pJf4"),r("q8oJ"),r("C9fy"),r("8npG"),r("MIFh"),r("rzGZ"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.toDeckColor=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[255,0,0,255];if(!Array.isArray(e))return t;return[255*e[0],255*e[1],255*e[2],255*e[3]]},t.recursivelyTraverseNestedArrays=function e(t,r,n){if(!Array.isArray(t[0]))return!0;for(var o=0;o<t.length;o++)if(e(t[o],[].concat(f(r),[o]),n)){n(t,r);break}return!1},t.generatePointsParallelToLinePoints=function(e,t,r){var u={type:"LineString",coordinates:[e,t]},c=(0,a.point)(r),l=(0,i.default)(c,u),f=(0,o.default)(e,t),s=(r[0]-e[0])*(t[1]-e[1])-(r[1]-e[1])*(t[0]-e[0])<0?f-90:f-270,p=(0,n.default)(t,l,s),d=(0,n.default)(e,l,s);return[p.geometry.coordinates,d.geometry.coordinates]},t.distance2d=d,t.mix=y,t.nearestPointOnProjectedLine=function(e,t,r){var n=new u.default(r),o=e.geometry.coordinates.map((function(e){var t=l(e,3),r=t[0],o=t[1],i=t[2],a=void 0===i?0:i;return n.project([r,o,a])})),i=l(n.project(t.geometry.coordinates),2),a=i[0],c=i[1],f=1/0,s={};o.forEach((function(e,t){var r=l(e,2),n=r[0],i=r[1];if(0!==t){var u=l(o[t-1],2),p=u[0],d=u[1],y=d-i,h=n-p,g=p*i-n*d,v=y*y+h*h,b=Math.abs(y*a+h*c+g)/Math.sqrt(v);b<f&&(f=b,s={index:t,x0:(h*(h*a-y*c)-y*g)/v,y0:(y*(-h*a+y*c)-h*g)/v})}}));var p=s,h=p.index,g=p.x0,v=p.y0,b=l(o[h-1],3),m=b[0],E=b[1],P=b[2],w=void 0===P?0:P,O=l(o[h],3),_=O[0],S=O[1],M=O[2],j=void 0===M?0:M,T=d(m,E,_,S),x=d(m,E,g,v),C=y(w,j,x/T);return{type:"Feature",geometry:{type:"Point",coordinates:n.unproject([g,v,C])},properties:{dist:f,index:h-1}}},t.getPickedEditHandle=function(e){var t=h(e);return t.length?t[0]:null},t.getPickedSnapSourceEditHandle=function(e){return h(e).find((function(e){return"snap-source"===e.properties.editHandleType}))},t.getNonGuidePicks=function(e){return e&&e.filter((function(e){return!e.isGuide}))},t.getPickedExistingEditHandle=function(e){return h(e).find((function(e){var t=e.properties;return t.featureIndex>=0&&"existing"===t.editHandleType}))},t.getPickedIntermediateEditHandle=function(e){return h(e).find((function(e){var t=e.properties;return t.featureIndex>=0&&"intermediate"===t.editHandleType}))},t.getPickedEditHandles=h,t.getEditHandlesForGeometry=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"existing",n=[];switch(e.type){case"Point":n=[{type:"Feature",properties:{guideType:"editHandle",editHandleType:r,positionIndexes:[],featureIndex:t},geometry:{type:"Point",coordinates:e.coordinates}}];break;case"MultiPoint":case"LineString":n=n.concat(g(e.coordinates,[],t,r));break;case"Polygon":case"MultiLineString":for(var o=0;o<e.coordinates.length;o++)n=n.concat(g(e.coordinates[o],[o],t,r)),"Polygon"===e.type&&(n=n.slice(0,-1));break;case"MultiPolygon":for(var i=0;i<e.coordinates.length;i++)for(var a=0;a<e.coordinates[i].length;a++)n=(n=n.concat(g(e.coordinates[i][a],[i,a],t,r))).slice(0,-1);break;default:throw Error("Unhandled geometry type: ".concat(e.type))}return n};var n=c(r("Yeox")),o=c(r("qhoL")),i=c(r("masN")),a=r("/rf6"),u=c(r("1I81"));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){o=!0,i=c}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t,r,n){var o=e-r,i=t-n;return Math.sqrt(o*o+i*i)}function y(e,t,r){return t*r+e*(1-r)}function h(e){return e&&e.filter((function(e){return e.isGuide&&"editHandle"===e.object.properties.guideType})).map((function(e){return e.object}))||[]}function g(e,t,r){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"existing",o=[],i=0;i<e.length;i++){var a=e[i];o.push({type:"Feature",properties:{guideType:"editHandle",positionIndexes:[].concat(f(t),[i]),featureIndex:r,editHandleType:n},geometry:{type:"Point",coordinates:a}})}return o}},luXc:function(e,t,r){"use strict";r.r(t);r("sc67"),r("JHok"),r("AqHK"),r("MIFh");function n(e,t,r){if(!a(r=r||{}))throw new Error("options is invalid");var n=r.bbox,o=r.id;if(void 0===e)throw new Error("geometry is required");if(t&&t.constructor!==Object)throw new Error("properties must be an Object");n&&u(n),o&&c(o);var i={type:"Feature"};return o&&(i.id=o),n&&(i.bbox=n),i.properties=t||{},i.geometry=e,i}function o(e,t,r){if(!e)throw new Error("coordinates is required");for(var o=0;o<e.length;o++){var a=e[o];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var u=0;u<a[a.length-1].length;u++){if(0===o&&0===u&&!i(a[0][0])||!i(a[0][1]))throw new Error("coordinates must contain numbers");if(a[a.length-1][u]!==a[0][u])throw new Error("First and last Position are not equivalent.")}}return n({type:"Polygon",coordinates:e},t,r)}function i(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}function a(e){return!!e&&e.constructor===Object}function u(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach((function(e){if(!i(e))throw new Error("bbox must only contain numbers")}))}function c(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}var l=r("bRXx"),f=r("Jgsv");function s(e){if(!e)throw new Error("coord is required");if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates;if(Array.isArray(e)&&e.length>=2&&void 0===e[0].length&&void 0===e[1].length)return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function p(e){var t=e*Math.PI/180;return Math.tan(t)}t.default=function(e,t,r,n){var u=(n=n||{}).steps||64,c=n.units||"kilometers",d=n.angle||0,y=n.pivot||e,h=n.properties||e.properties||{};if(!e)throw new Error("center is required");if(!t)throw new Error("xSemiAxis is required");if(!r)throw new Error("ySemiAxis is required");if(!a(n))throw new Error("options must be an object");if(!i(u))throw new Error("steps must be a number");if(!i(d))throw new Error("angle must be a number");var g=s(e);if("degrees"===c)var v=function(e){if(null==e)throw new Error("degrees is required");return e%360*Math.PI/180}(d);else t=Object(l.a)(e,t,90,{units:c}),r=Object(l.a)(e,r,0,{units:c}),t=s(t)[0]-g[0],r=s(r)[1]-g[1];for(var b=[],m=0;m<u;m+=1){var E=-360*m/u,P=t*r/Math.sqrt(Math.pow(r,2)+Math.pow(t,2)*Math.pow(p(E),2)),w=t*r/Math.sqrt(Math.pow(t,2)+Math.pow(r,2)/Math.pow(p(E),2));if(E<-90&&E>=-270&&(P=-P),E<-180&&E>=-360&&(w=-w),"degrees"===c){var O=P*Math.cos(v)+w*Math.sin(v),_=w*Math.cos(v)-P*Math.sin(v);P=O,w=_}b.push([P+g[0],w+g[1]])}return b.push(b[0]),"degrees"===c?o([b],h):Object(f.default)(o([b],h),d,{pivot:y})}},mOTV:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r("pS08"),r("LagC"),r("q8oJ"),r("C9fy"),r("8npG"),r("nWfQ"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.ThreeClickPolygonMode=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(p,e);var t,r,n,f,s=(t=p,function(){var e,r=c(t);if(u()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)});function p(){return o(this,p),s.apply(this,arguments)}return r=p,(n=[{key:"handleClick",value:function(e,t){this.addClickSequence(e);var r=this.getClickSequence(),n=this.getTentativeGuide(t);if(r.length>2&&n&&"Polygon"===n.geometry.type){var o=this.getAddFeatureOrBooleanPolygonAction(n.geometry,t);this.resetClickSequence(),o&&t.onEdit(o)}}},{key:"getGuides",value:function(e){var t=e.lastPointerMoveEvent,r=e.modeConfig,n=this.getClickSequence(),o={type:"FeatureCollection",features:[]};if(0===n.length)return o;var i=t.mapCoords;if(1===n.length)o.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[n[0],i]}});else{var a=this.getThreeClickPolygon(n[0],n[1],i,r);a&&o.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:a.geometry})}return o}},{key:"getThreeClickPolygon",value:function(e,t,r,n){return null}},{key:"handlePointerMove",value:function(e,t){t.onUpdateCursor("cell")}}])&&i(r.prototype,n),f&&i(r,f),p}(r("4R+2").GeoJsonEditMode);t.ThreeClickPolygonMode=f},masN:function(e,t,r){"use strict";r("MIFh"),r("R48M");var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r("j3ZU")),i=r("/rf6"),a=r("AKIq"),u=r("cWyK"),c=n(r("SnY6"));function l(e,t){return e[0]*t[0]+e[1]*t[1]}function f(e,t,r){return"planar"===r.method?c.default(e,t,r):o.default(e,t,r)}t.default=function(e,t,r){if(void 0===r&&(r={}),r.method||(r.method="geodesic"),r.units||(r.units="kilometers"),!e)throw new Error("pt is required");if(Array.isArray(e)?e=i.point(e):"Point"===e.type?e=i.feature(e):a.featureOf(e,"Point","point"),!t)throw new Error("line is required");Array.isArray(t)?t=i.lineString(t):"LineString"===t.type?t=i.feature(t):a.featureOf(t,"LineString","line");var n=1/0,o=e.geometry.coordinates;return u.segmentEach(t,(function(e){var t=e.geometry.coordinates[0],i=e.geometry.coordinates[1],a=function(e,t,r,n){var o=[r[0]-t[0],r[1]-t[1]],i=l([e[0]-t[0],e[1]-t[1]],o);if(i<=0)return f(e,t,{method:n.method,units:"degrees"});var a=l(o,o);if(a<=i)return f(e,r,{method:n.method,units:"degrees"});var u=i/a,c=[t[0]+u*o[0],t[1]+u*o[1]];return f(e,c,{method:n.method,units:"degrees"})}(o,t,i,r);a<n&&(n=a)})),i.convertLength(n,"degrees",r.units)}},n0hJ:function(e,t,r){var n=r("P8UN");n(n.P,"Array",{fill:r("Y++M")}),r("Dq1/")("fill")},nB0O:function(e,t,r){var n=r("P8UN"),o=r("AC7V");n(n.S+n.F*(Number.parseFloat!=o),"Number",{parseFloat:o})},nWfQ:function(e,t,r){var n=r("P8UN"),o=r("nsRs"),i=r("nONw"),a=r("1a8y"),u=r("BjK0"),c=r("96qb"),l=r("16Xr"),f=(r("emib").Reflect||{}).construct,s=c((function(){function e(){}return!(f((function(){}),[],e)instanceof e)})),p=!c((function(){f((function(){}))}));n(n.S+n.F*(s||p),"Reflect",{construct:function(e,t){i(e),a(t);var r=arguments.length<3?e:i(arguments[2]);if(p&&!s)return f(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(l.apply(e,n))}var c=r.prototype,d=o(u(c)?c:Object.prototype),y=Function.apply.call(e,d,t);return u(y)?y:d}})},nlv9:function(e,t,r){"use strict";r("JHok"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0});var n=r("/rf6"),o=r("AKIq");function i(e,t){void 0===t&&(t={});var r=o.getGeom(e);r.type;return u(r.coordinates,t.properties?t.properties:"Feature"===e.type?e.properties:{})}function a(e,t){void 0===t&&(t={});var r=o.getGeom(e),i=(r.type,r.coordinates),a=t.properties?t.properties:"Feature"===e.type?e.properties:{},c=[];return i.forEach((function(e){c.push(u(e,a))})),n.featureCollection(c)}function u(e,t){return e.length>1?n.multiLineString(e,t):n.lineString(e[0],t)}t.default=function(e,t){void 0===t&&(t={});var r=o.getGeom(e);switch(t.properties||"Feature"!==e.type||(t.properties=e.properties),r.type){case"Polygon":return i(r,t);case"MultiPolygon":return a(r,t);default:throw new Error("invalid poly")}},t.polygonToLine=i,t.multiPolygonToLine=a,t.coordsToLine=u},oDJc:function(e,t,r){"use strict";r.r(t);r("sc67"),r("JHok"),r("AqHK"),r("MIFh");function n(e){return!!e&&e.constructor===Object}function o(e,t,r){if(null!==e)for(var n,i,a,u,c,l,f,s,p=0,d=0,y=e.type,h="FeatureCollection"===y,g="Feature"===y,v=h?e.features.length:1,b=0;b<v;b++){c=(s=!!(f=h?e.features[b].geometry:g?e.geometry:e)&&"GeometryCollection"===f.type)?f.geometries.length:1;for(var m=0;m<c;m++){var E=0,P=0;if(null!==(u=s?f.geometries[m]:f)){l=u.coordinates;var w=u.type;switch(p=!r||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===t(l,d,b,E,P))return!1;d++,E++;break;case"LineString":case"MultiPoint":for(n=0;n<l.length;n++){if(!1===t(l[n],d,b,E,P))return!1;d++,"MultiPoint"===w&&E++}"LineString"===w&&E++;break;case"Polygon":case"MultiLineString":for(n=0;n<l.length;n++){for(i=0;i<l[n].length-p;i++){if(!1===t(l[n][i],d,b,E,P))return!1;d++}"MultiLineString"===w&&E++,"Polygon"===w&&P++}"Polygon"===w&&E++;break;case"MultiPolygon":for(n=0;n<l.length;n++){for("MultiPolygon"===w&&(P=0),i=0;i<l[n].length;i++){for(a=0;a<l[n][i].length-p;a++){if(!1===t(l[n][i][a],d,b,E,P))return!1;d++}P++}E++}break;case"GeometryCollection":for(n=0;n<u.geometries.length;n++)if(!1===o(u.geometries[n],t,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}var i=r("KHcG"),a=r("bRXx");t.default=function(e,t,r,u){if(!n(u=u||{}))throw new Error("options is invalid");var c=u.units,l=u.zTranslation,f=u.mutate;if(!e)throw new Error("geojson is required");if(null==t||isNaN(t))throw new Error("distance is required");if(l&&"number"!=typeof l&&isNaN(l))throw new Error("zTranslation is not a number");if(l=void 0!==l?l:0,0===t&&0===l)return e;if(null==r||isNaN(r))throw new Error("direction is required");return t<0&&(t=-t,r=-r),!1!==f&&void 0!==f||(e=Object(i.a)(e)),o(e,(function(e){var n=function(e){if(!e)throw new Error("coords is required");if("Feature"===e.type&&null!==e.geometry)return e.geometry.coordinates;if(e.coordinates)return e.coordinates;if(Array.isArray(e))return e;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}(Object(a.a)(e,t,r,{units:c}));e[0]=n[0],e[1]=n[1],l&&3===e.length&&(e[2]+=l)})),e}},pLGD:function(e,t,r){"use strict";r("E5k/"),r("pS08"),r("LagC"),r("q8oJ"),r("C9fy"),r("8npG"),r("nWfQ"),r("ELYx"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.ElevationMode=void 0;var n=r("lVFs");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=e.pointerDownScreenCoords,r=e.screenCoords;return 10*(t[1]-r[1])}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(h,e);var t,r,o,d,y=(t=h,function(){var e,r=f(t);if(l()){var n=f(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return c(this,e)});function h(){return i(this,h),y.apply(this,arguments)}return r=h,d=[{key:"calculateElevationChangeWithViewport",value:function(e,t){var r=t.pointerDownScreenCoords,n=t.screenCoords;return 156543.03392*Math.cos(e.latitude*Math.PI/180)/Math.pow(2,e.zoom)*(r[1]-n[1])/2}}],(o=[{key:"makeElevatedEvent",value:function(e,t,r){var n=r.modeConfig||{},o=n.minElevation,i=void 0===o?0:o,a=n.maxElevation,u=void 0===a?2e4:a,c=n.calculateElevationChange,l=void 0===c?p:c;if(!e.pointerDownScreenCoords)return e;var f=3===t.length?t[2]:0;return f+=l({pointerDownScreenCoords:e.pointerDownScreenCoords,screenCoords:e.screenCoords}),f=Math.min(f,u),f=Math.max(f,i),Object.assign({},e,{mapCoords:[t[0],t[1],f]})}},{key:"handlePointerMove",value:function(e,t){var r=(0,n.getPickedEditHandle)(e.pointerDownPicks),o=r?r.geometry.coordinates:e.mapCoords;u(f(h.prototype),"handlePointerMove",this).call(this,this.makeElevatedEvent(e,o,t),t)}},{key:"handleStopDragging",value:function(e,t){var r=(0,n.getPickedEditHandle)(e.picks),o=r?r.geometry.coordinates:e.mapCoords;u(f(h.prototype),"handleStopDragging",this).call(this,this.makeElevatedEvent(e,o,t),t)}},{key:"getCursor",value:function(e){var t=u(f(h.prototype),"getCursor",this).call(this,e);return"cell"===t&&(t="ns-resize"),t}}])&&a(r.prototype,o),d&&a(r,d),h}(r("9/d+").ModifyMode);t.ElevationMode=d},pTud:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r("pS08"),r("LagC"),r("q8oJ"),r("C9fy"),r("8npG"),r("nWfQ"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.DrawPointMode=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(p,e);var t,r,n,f,s=(t=p,function(){var e,r=c(t);if(u()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)});function p(){return o(this,p),s.apply(this,arguments)}return r=p,(n=[{key:"handleClick",value:function(e,t){var r={type:"Point",coordinates:e.mapCoords};t.onEdit(this.getAddFeatureAction(r,t.data))}},{key:"handlePointerMove",value:function(e,t){t.onUpdateCursor("cell")}}])&&i(r.prototype,n),f&&i(r,f),p}(r("4R+2").GeoJsonEditMode);t.DrawPointMode=f},pncC:function(e,t,r){var n=r("P8UN");n(n.S,"Number",{isInteger:r("gBT9")})},qhoL:function(e,t,r){"use strict";r("R48M"),Object.defineProperty(t,"__esModule",{value:!0});var n=r("/rf6"),o=r("AKIq");function i(e,t,r){if(void 0===r&&(r={}),!0===r.final)return function(e,t){var r=i(t,e);return r=(r+180)%360}(e,t);var a=o.getCoord(e),u=o.getCoord(t),c=n.degreesToRadians(a[0]),l=n.degreesToRadians(u[0]),f=n.degreesToRadians(a[1]),s=n.degreesToRadians(u[1]),p=Math.sin(l-c)*Math.cos(s),d=Math.cos(f)*Math.sin(s)-Math.sin(f)*Math.cos(s)*Math.cos(l-c);return n.radiansToDegrees(Math.atan2(p,d))}t.default=i},sS7t:function(e,t,r){"use strict";r("R48M"),Object.defineProperty(t,"__esModule",{value:!0});var n=r("cWyK"),o=r("/rf6");t.default=function(e,t){void 0===t&&(t={});var r=0,i=0,a=0;return n.coordEach(e,(function(e){r+=e[0],i+=e[1],a++})),o.point([r/a,i/a],t.properties)}},sk2A:function(e,t,r){"use strict";r("sPse"),r("R48M");var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r("/rf6"),i=r("AKIq"),a=n(r("+mSJ")),u=r("cWyK"),c=n(r("aZEm"));function l(e,t){var r=i.getCoords(e),n=i.getCoords(t);if(2!==r.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==n.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var a=r[0][0],u=r[0][1],c=r[1][0],l=r[1][1],f=n[0][0],s=n[0][1],p=n[1][0],d=n[1][1],y=(d-s)*(c-a)-(p-f)*(l-u),h=(p-f)*(u-s)-(d-s)*(a-f),g=(c-a)*(u-s)-(l-u)*(a-f);if(0===y)return null;var v=h/y,b=g/y;if(v>=0&&v<=1&&b>=0&&b<=1){var m=a+v*(c-a),E=u+v*(l-u);return o.point([m,E])}return null}t.default=function(e,t){var r={},n=[];if("LineString"===e.type&&(e=o.feature(e)),"LineString"===t.type&&(t=o.feature(t)),"Feature"===e.type&&"Feature"===t.type&&null!==e.geometry&&null!==t.geometry&&"LineString"===e.geometry.type&&"LineString"===t.geometry.type&&2===e.geometry.coordinates.length&&2===t.geometry.coordinates.length){var f=l(e,t);return f&&n.push(f),o.featureCollection(n)}var s=c.default();return s.load(a.default(t)),u.featureEach(a.default(e),(function(e){u.featureEach(s.search(e),(function(t){var o=l(e,t);if(o){var a=i.getCoords(o).join(",");r[a]||(r[a]=!0,n.push(o))}}))})),o.featureCollection(n)}},tHzR:function(e,t,r){},u779:function(e,t,r){"use strict";r("pS08"),r("LagC"),r("nWfQ"),r("+ar0"),r("xtjI"),r("JHok"),r("OeI1"),r("Dq+y"),r("Ggvi"),r("MIFh"),r("rzGZ"),r("YbXK"),r("cFtU"),r("pJf4"),r("q8oJ"),r("C9fy"),r("8npG"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r("xDdU")),o=r("1Y5v"),i=r("wHih");function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(a,e);var t,r=(t=a,function(){var e,r=g(t);if(h()){var n=g(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return d(this,e)});function a(){var e;p(this,a);for(var t=arguments.length,u=new Array(t),l=0;l<t;l++)u[l]=arguments[l];return b(y(e=r.call.apply(r,[this].concat(u))),"handleClick",(function(t,r){var n=t.picks&&t.picks[0];if(e.getTentativeFeature()){var o=n&&n.object;o&&0===o.index?e._commitTentativeFeature(t,r):e._updateTentativeFeature(t,r)}else e._initTentativeFeature(t,r)})),b(y(e),"handleDblClick",(function(t,r){e.getTentativeFeature()&&e._commitTentativeFeature(t,r)})),b(y(e),"getGuides",(function(t){var r=e.getTentativeFeature(),n=(0,i.getFeatureCoordinates)(r);if(!n)return null;var a=t.lastPointerMoveEvent,u=e.getEditHandlesFromFeature(r)||[],l={type:"Feature",properties:{guideType:o.GUIDE_TYPE.CURSOR_EDIT_HANDLE,renderType:o.RENDER_TYPE.POLYGON,positionIndexes:[u.length]},geometry:{type:o.GEOJSON_TYPE.POINT,coordinates:[a.mapCoords]}};return u.push(l),{tentativeFeature:r=s({},r,{geometry:{type:o.GEOJSON_TYPE.LINE_STRING,coordinates:[].concat(c(n),[a.mapCoords])}}),editHandles:u}})),b(y(e),"_updateTentativeFeature",(function(t,r){var n=e.getTentativeFeature();n&&n.geometry&&(n=s({},n,{geometry:{type:o.GEOJSON_TYPE.LINE_STRING,coordinates:[].concat(c(n.geometry.coordinates),[t.mapCoords])}}),e.setTentativeFeature(n),r.onEdit({editType:o.EDIT_TYPE.ADD_POSITION,updatedData:r.data.getObject(),editContext:[{feature:n,featureIndex:null,editHandleIndex:n.geometry.coordinates.length-1,screenCoords:t.screenCoords,mapCoords:t.mapCoords}]}))})),b(y(e),"_commitTentativeFeature",(function(t,r){var n=e.getTentativeFeature(),i=r.data;e.setTentativeFeature(null);var a=i.addFeature(E(n)).getObject();r.onEdit({editType:o.EDIT_TYPE.ADD_FEATURE,updatedData:a,editContext:null})})),b(y(e),"_initTentativeFeature",(function(t,r){e.setTentativeFeature({type:"Feature",properties:{id:(0,n.default)(),renderType:o.RENDER_TYPE.POLYGON,guideType:o.GUIDE_TYPE.TENTATIVE},geometry:{type:o.GEOJSON_TYPE.POINT,coordinates:[t.mapCoords]}})})),e}return a}(a(r("KER3")).default);function E(e){var t=(0,i.getFeatureCoordinates)(e);if(t)return t.push(t[0]),{type:"Feature",properties:{id:e.properties.id,renderType:o.RENDER_TYPE.POLYGON},geometry:{type:o.GEOJSON_TYPE.POLYGON,coordinates:[t]}}}t.default=m},vBe5:function(e,t,r){"use strict";r.d(t,"b",(function(){return u})),r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return b})),r.d(t,"e",(function(){return v})),r.d(t,"f",(function(){return f})),r.d(t,"i",(function(){return y})),r.d(t,"g",(function(){return h})),r.d(t,"h",(function(){return g}));var n=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},o=function(e){var t;return 1===e.length&&(t=e,e=function(e,r){return n(t(e),r)}),{left:function(t,r,n,o){for(null==n&&(n=0),null==o&&(o=t.length);n<o;){var i=n+o>>>1;e(t[i],r)<0?n=i+1:o=i}return n},right:function(t,r,n,o){for(null==n&&(n=0),null==o&&(o=t.length);n<o;){var i=n+o>>>1;e(t[i],r)>0?o=i:n=i+1}return n}}};var i=o(n),a=i.right,u=(i.left,a);var c=function(e){return null===e?NaN:+e},l=(r("MIFh"),r("AqHK"),Array.prototype),f=(l.slice,l.map,function(e,t,r){e=+e,t=+t,r=(o=arguments.length)<2?(t=e,e=0,1):o<3?1:+r;for(var n=-1,o=0|Math.max(0,Math.ceil((t-e)/r)),i=new Array(o);++n<o;)i[n]=e+n*r;return i}),s=Math.sqrt(50),p=Math.sqrt(10),d=Math.sqrt(2),y=function(e,t,r){var n,o,i,a,u=-1;if(r=+r,(e=+e)===(t=+t)&&r>0)return[e];if((n=t<e)&&(o=e,e=t,t=o),0===(a=h(e,t,r))||!isFinite(a))return[];if(a>0)for(e=Math.ceil(e/a),t=Math.floor(t/a),i=new Array(o=Math.ceil(t-e+1));++u<o;)i[u]=(e+u)*a;else for(e=Math.floor(e*a),t=Math.ceil(t*a),i=new Array(o=Math.ceil(e-t+1));++u<o;)i[u]=(e-u)/a;return n&&i.reverse(),i};function h(e,t,r){var n=(t-e)/Math.max(0,r),o=Math.floor(Math.log(n)/Math.LN10),i=n/Math.pow(10,o);return o>=0?(i>=s?10:i>=p?5:i>=d?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(i>=s?10:i>=p?5:i>=d?2:1)}function g(e,t,r){var n=Math.abs(t-e)/Math.max(0,r),o=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),i=n/o;return i>=s?o*=10:i>=p?o*=5:i>=d&&(o*=2),t<e?-o:o}r("zGcK");var v=function(e,t,r){if(null==r&&(r=c),n=e.length){if((t=+t)<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,o=(n-1)*t,i=Math.floor(o),a=+r(e[i],i,e);return a+(+r(e[i+1],i+1,e)-a)*(o-i)}},b=function(e){for(var t,r,n,o=e.length,i=-1,a=0;++i<o;)a+=e[i].length;for(r=new Array(a);--o>=0;)for(t=(n=e[o]).length;--t>=0;)r[--a]=n[t];return r}},vNvi:function(e,t,r){"use strict";r("AqHK"),r("pS08"),r("LagC"),r("nWfQ"),r("MIFh"),r("rzGZ"),r("YbXK"),r("cFtU"),r("pJf4"),r("q8oJ"),r("C9fy"),r("8npG"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.MeasureAngleMode=void 0;var n=u(r("qhoL")),o=u(r("d7SH")),i=u(r("HYY4")),a=r("4R+2");function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=[],E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(f,e);var t,r,a,u,c=(t=f,function(){var e,r=g(t);if(h()){var n=g(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return d(this,e)});function f(){var e;s(this,f);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return b(y(e=c.call.apply(c,[this].concat(r))),"_getTooltips",(0,i.default)((function(e){var t=e.modeConfig,r=e.vertex,i=e.point1,a=e.point2,u=m;if(r&&i&&a){var c,l=t||{},f=l.formatTooltip,s=l.measurementCallback,p=(0,n.default)(r,i),d=(0,n.default)(r,a),y=Math.abs(p-d);y>180&&(y=360-y),c=f?f(y):"".concat(parseFloat(y).toFixed(2)," ").concat("deg"),s&&s(y),u=[{position:(0,o.default)({type:"FeatureCollection",features:[i,a].map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:e}}}))}).geometry.coordinates,text:c}]}return u}))),e}return r=f,(a=[{key:"handleClick",value:function(e,t){this.getClickSequence().length>=3&&this.resetClickSequence(),this.addClickSequence(e)}},{key:"handlePointerMove",value:function(e,t){t.onUpdateCursor("cell")}},{key:"getPoints",value:function(e){var t=this.getClickSequence(),r=l(t);return t.length<3&&e.lastPointerMoveEvent&&r.push(e.lastPointerMoveEvent.mapCoords),r}},{key:"getGuides",value:function(e){var t={type:"FeatureCollection",features:[]},r=t.features,n=this.getPoints(e);return n.length>2?r.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[n[1],n[0],n[2]]}}):n.length>1&&r.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[n[1],n[0]]}}),t}},{key:"getTooltips",value:function(e){var t=this.getPoints(e);return this._getTooltips({modeConfig:e.modeConfig,vertex:t[0],point1:t[1],point2:t[2]})}}])&&p(r.prototype,a),u&&p(r,u),f}(a.GeoJsonEditMode);t.MeasureAngleMode=E},vhGx:function(e,t,r){"use strict";r("YBKJ"),r("sc67"),r("JHok"),r("AqHK"),r("MIFh");var n={meters:6371008.8,metres:6371008.8,millimeters:6371008800,millimetres:6371008800,centimeters:637100880,centimetres:637100880,kilometers:6371.0088,kilometres:6371.0088,miles:3958.761333810546,nauticalmiles:6371008.8/1852,inches:6371008.8*39.37,yards:6371008.8/1.0936,feet:20902260.511392,radians:1,degrees:6371008.8/111325};function o(e,t){if(null==e)throw new Error("distance is required");if(t&&"string"!=typeof t)throw new Error("units must be a string");var r=n[t||"kilometers"];if(!r)throw new Error(t+" units is invalid");return e/r}function i(e,t,r){if(null==e)throw new Error("length is required");if(!(e>=0))throw new Error("length must be a positive number");return function(e,t){if(null==e)throw new Error("radians is required");if(t&&"string"!=typeof t)throw new Error("units must be a string");var r=n[t||"kilometers"];if(!r)throw new Error(t+" units is invalid");return e*r}(o(e,t),r||"kilometers")}function a(e){return!!e&&e.constructor===Object}function u(e){if(!e)throw new Error("coord is required");if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates;if(Array.isArray(e)&&e.length>=2&&void 0===e[0].length&&void 0===e[1].length)return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}t.a=function(e,t,r){if(!a(r=r||{}))throw new Error("options is invalid");var n=r.units;if(!e)throw new Error("from point is required");if(!t)throw new Error("to point is required");var o=u(e),c=u(t);return c[0]+=c[0]-o[0]>180?-360:o[0]-c[0]>180?360:0,i(function(e,t,r){var n=r=void 0===r?6371008.8:Number(r),o=e[1]*Math.PI/180,i=t[1]*Math.PI/180,a=i-o,u=Math.abs(t[0]-e[0])*Math.PI/180;u>Math.PI&&(u-=2*Math.PI);var c=Math.log(Math.tan(i/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),l=Math.abs(c)>1e-11?a/c:Math.cos(o);return Math.sqrt(a*a+l*l*u*u)*n}(o,c),"meters",n)}},wHih:function(e,t,r){"use strict";r("YBKJ"),r("MIFh"),r("rzGZ"),r("m210"),r("4DPX"),r("YbXK"),r("cFtU"),r("pJf4"),r("q8oJ"),r("C9fy"),r("8npG"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.isNumeric=a,t.parseEventElement=function(e){var t=e.target;if(!t||!t.dataset||!t.dataset.type)return null;var r=t.dataset.type,n=t.dataset.featureIndex,o=t.dataset.index;return{object:{type:r,index:a(o)?Number(o):void 0,featureIndex:a(n)?Number(n):void 0},index:o}},t.getScreenCoords=function(e){var t=e.offsetCenter,r=t.x,n=t.y;return[Number(r),Number(n)]},t.findClosestPointOnLineSegment=function(e,t,r){var n=(t[1]-e[1])/(t[0]-e[0]),o=e[1]-n*e[0];if(!isFinite(n)){var i=[e[0],r[1]];return c(e,t,i)?i:null}if(r[0]*n+o-r[1]==0)return c(e,t,r)?r:null;var a=(n*r[1]+r[0]-n*o)/(n*n+1),u=n*a+o;return c(e,t,[a,u])?[a,u]:null},t.getFeatureCoordinates=u,t.updateRectanglePosition=function(e,t,r){var i=u(e);if(!i)return null;var a=i.slice(0,4);a[t%4]=r;var c=a[(t+2)%4],l=a[t%4];return a[(t+1)%4]=[l[0],c[1]],a[(t+3)%4]=[c[0],l[1]],e.geometry.type===n.GEOJSON_TYPE.POLYGON?[[].concat(o(a),[a[0]])]:a};var n=r("1Y5v");function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e){return!Array.isArray(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function u(e){var t=e&&e.geometry&&e.geometry.coordinates;return t?e.geometry.type===n.GEOJSON_TYPE.POLYGON?t[0]:t:null}function c(e,t,r){var n=[Math.min(e[0],t[0]),Math.max(e[0],t[0]),Math.min(e[1],t[1]),Math.max(e[1],t[1])];return r[0]>=n[0]&&r[0]<=n[1]&&r[1]>=n[2]&&r[1]<=n[3]}},xDdU:function(e,t,r){var n,o,i=r("4fRq"),a=r("I2ZF"),u=0,c=0;e.exports=function(e,t,r){var l=t&&r||0,f=t||[],s=(e=e||{}).node||n,p=void 0!==e.clockseq?e.clockseq:o;if(null==s||null==p){var d=i();null==s&&(s=n=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==p&&(p=o=16383&(d[6]<<8|d[7]))}var y=void 0!==e.msecs?e.msecs:(new Date).getTime(),h=void 0!==e.nsecs?e.nsecs:c+1,g=y-u+(h-c)/1e4;if(g<0&&void 0===e.clockseq&&(p=p+1&16383),(g<0||y>u)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=y,c=h,o=p;var v=(1e4*(268435455&(y+=122192928e5))+h)%4294967296;f[l++]=v>>>24&255,f[l++]=v>>>16&255,f[l++]=v>>>8&255,f[l++]=255&v;var b=y/4294967296*1e4&268435455;f[l++]=b>>>8&255,f[l++]=255&b,f[l++]=b>>>24&15|16,f[l++]=b>>>16&255,f[l++]=p>>>8|128,f[l++]=255&p;for(var m=0;m<6;++m)f[l+m]=s[m];return t||a(f)}},yRTG:function(e,t,r){"use strict";r("pS08"),r("LagC"),r("q8oJ"),r("C9fy"),r("8npG"),r("nWfQ"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.DrawEllipseByBoundingBoxMode=void 0;var n=c(r("UWCo")),o=c(r("j3ZU")),i=c(r("luXc")),a=r("/rf6"),u=r("4R+2");function c(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(v,e);var t,r,c,l,g=(t=v,function(){var e,r=y(t);if(d()){var n=y(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return p(this,e)});function v(){return f(this,v),g.apply(this,arguments)}return r=v,(c=[{key:"getTwoClickPolygon",value:function(e,t,r){var c=Math.min(e[0],t[0]),l=Math.min(e[1],t[1]),f=Math.max(e[0],t[0]),s=Math.max(e[1],t[1]),p=(0,n.default)([c,l,f,s]).geometry.coordinates[0],d=(0,u.getIntermediatePosition)(e,t),y=Math.max((0,o.default)((0,a.point)(p[0]),(0,a.point)(p[1])),.001),h=Math.max((0,o.default)((0,a.point)(p[0]),(0,a.point)(p[3])),.001);return(0,i.default)(d,y,h)}}])&&s(r.prototype,c),l&&s(r,l),v}(r("MMIt").TwoClickPolygonMode);t.DrawEllipseByBoundingBoxMode=g},zTTH:function(e,t,r){"use strict";var n=r("P8UN"),o=r("Wadk")(6),i="findIndex",a=!0;i in[]&&Array(1)[i]((function(){a=!1})),n(n.P+n.F*a,"Array",{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),r("Dq1/")(i)},zx9D:function(e,t,r){"use strict";r("pS08"),r("LagC"),r("q8oJ"),r("C9fy"),r("8npG"),r("nWfQ"),r("m210"),r("4DPX"),r("R48M"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r("1Y5v"),i=(n=r("KER3"))&&n.__esModule?n:{default:n},a=r("wHih");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(y,e);var t,r,n,i,u=(t=y,function(){var e,r=p(t);if(s()){var n=p(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return f(this,e)});function y(){return c(this,y),u.apply(this,arguments)}return r=y,(n=[{key:"handleClick",value:function(e,t){var r=e.mapCoords,n=e.screenCoords,i=e.picks&&e.picks[0]&&e.picks[0].object;if(i&&(0,a.isNumeric)(i.featureIndex)){var u=i.featureIndex,c=this.getSelectedFeature(t,u);t.onSelect({selectedFeature:c,selectedFeatureIndex:u,selectedEditHandleIndex:i.type===o.ELEMENT_TYPE.EDIT_HANDLE?i.index:null,mapCoords:r,screenCoords:n})}else t.onSelect({selectedFeature:null,selectedFeatureIndex:null,selectedEditHandleIndex:null,mapCoords:r,screenCoords:n})}}])&&l(r.prototype,n),i&&l(r,i),y}(i.default);t.default=y}}]);