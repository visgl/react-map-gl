(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[5754],{9778:(t,e,o)=>{var n=o(7628);function r(t){var e=0;if(t&&t.length>0){e+=Math.abs(i(t[0]));for(var o=1;o<t.length;o++)e-=Math.abs(i(t[o]))}return e}function i(t){var e,o,r,i,a,c,u=0,l=t.length;if(l>2){for(c=0;c<l;c++)c===l-2?(r=l-2,i=l-1,a=0):c===l-1?(r=l-1,i=0,a=1):(r=c,i=c+1,a=c+2),e=t[r],o=t[i],u+=(s(t[a][0])-s(e[0]))*Math.sin(s(o[1]));u=u*n.RADIUS*n.RADIUS/2}return u}function s(t){return t*Math.PI/180}t.exports.geometry=function t(e){var o,n=0;switch(e.type){case"Polygon":return r(e.coordinates);case"MultiPolygon":for(o=0;o<e.coordinates.length;o++)n+=r(e.coordinates[o]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(o=0;o<e.geometries.length;o++)n+=t(e.geometries[o]);return n}},t.exports.ring=i},8186:t=>{t.exports=function(t){if(!t||!t.type)return null;var o=e[t.type];if(!o)return null;if("geometry"===o)return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]};if("feature"===o)return{type:"FeatureCollection",features:[t]};if("featurecollection"===o)return t};var e={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},4748:t=>{"use strict";function e(t,e){this.x=t,this.y=e}t.exports=e,e.prototype={clone:function(){return new e(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,o=t.y-this.y;return e*e+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,o=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=o,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),o=Math.sin(t),n=e*this.x-o*this.y,r=o*this.x+e*this.y;return this.x=n,this.y=r,this},_rotateAround:function(t,e){var o=Math.cos(t),n=Math.sin(t),r=e.x+o*(this.x-e.x)-n*(this.y-e.y),i=e.y+n*(this.x-e.x)+o*(this.y-e.y);return this.x=r,this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},e.convert=function(t){return t instanceof e?t:Array.isArray(t)?new e(t[0],t[1]):t}},2017:t=>{"use strict";t.exports=function t(e,o){if(e===o)return!0;if(e&&o&&"object"==typeof e&&"object"==typeof o){if(e.constructor!==o.constructor)return!1;var n,r,i;if(Array.isArray(e)){if((n=e.length)!=o.length)return!1;for(r=n;0!=r--;)if(!t(e[r],o[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===o.source&&e.flags===o.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===o.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===o.toString();if((n=(i=Object.keys(e)).length)!==Object.keys(o).length)return!1;for(r=n;0!=r--;)if(!Object.prototype.hasOwnProperty.call(o,i[r]))return!1;for(r=n;0!=r--;){var s=i[r];if(!t(e[s],o[s]))return!1}return!0}return e!=e&&o!=o}},7628:t=>{t.exports.RADIUS=6378137,t.exports.FLATTENING=1/298.257223563,t.exports.POLAR_RADIUS=6356752.3142},4604:(t,e,o)=>{"use strict";o.d(e,{A:()=>pe});var n={};o.r(n),o.d(n,{LAT_MAX:()=>v,LAT_MIN:()=>C,LAT_RENDERED_MAX:()=>I,LAT_RENDERED_MIN:()=>T,LNG_MAX:()=>S,LNG_MIN:()=>_,activeStates:()=>y,classes:()=>c,cursors:()=>l,events:()=>f,geojsonTypes:()=>p,interactions:()=>E,meta:()=>m,modes:()=>h,sources:()=>u,types:()=>d,updateActions:()=>g});var r={};o.r(r),o.d(r,{isActiveFeature:()=>Tt,isEnterKey:()=>Lt,isEscapeKey:()=>Mt,isFeature:()=>_t,isInactiveFeature:()=>vt,isOfMetaType:()=>Et,isShiftDown:()=>Ot,isShiftMousedown:()=>Ct,isTrue:()=>Nt,isVertex:()=>St,noTarget:()=>It});var i={};o.r(i),o.d(i,{CommonSelectors:()=>r,ModeHandler:()=>s,StringSet:()=>x,constrainFeatureMovement:()=>Bt,createMidPoint:()=>At,createSupplementaryPoints:()=>Ft,createVertex:()=>Pt,doubleClickZoom:()=>Rt,euclideanDistance:()=>w,featuresAt:()=>A,getFeatureAtAndSetCursors:()=>R,isClick:()=>V,isEventAtCoordinates:()=>Kt,isTap:()=>J,mapEventToBoundingBox:()=>N,moveFeatures:()=>Jt,sortFeatures:()=>L,stringSetsAreEqual:()=>ce,theme:()=>yt,toDenseArray:()=>ct});const s=function(t,e){const o={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},n={on(t,e,n){if(void 0===o[t])throw new Error(`Invalid event type: ${t}`);o[t].push({selector:e,fn:n})},render(t){e.store.featureChanged(t)}},r=function(t,r){const i=o[t];let s=i.length;for(;s--;){const t=i[s];if(t.selector(r)){t.fn.call(n,r)||e.store.render(),e.ui.updateMapClasses();break}}};return t.start.call(n),{render:t.render,stop(){t.stop&&t.stop()},trash(){t.trash&&(t.trash(),e.store.render())},combineFeatures(){t.combineFeatures&&t.combineFeatures()},uncombineFeatures(){t.uncombineFeatures&&t.uncombineFeatures()},drag(t){r("drag",t)},click(t){r("click",t)},mousemove(t){r("mousemove",t)},mousedown(t){r("mousedown",t)},mouseup(t){r("mouseup",t)},mouseout(t){r("mouseout",t)},keydown(t){r("keydown",t)},keyup(t){r("keyup",t)},touchstart(t){r("touchstart",t)},touchmove(t){r("touchmove",t)},touchend(t){r("touchend",t)},tap(t){r("tap",t)}}};var a=o(9778);const c={CANVAS:"mapboxgl-canvas",CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},u={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},l={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},d={POLYGON:"polygon",LINE:"line_string",POINT:"point"},p={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},h={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select"},f={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},g={MOVE:"move",CHANGE_PROPERTIES:"change_properties",CHANGE_COORDINATES:"change_coordinates"},m={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},y={ACTIVE:"true",INACTIVE:"false"},E=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],C=-90,T=-85,v=90,I=85,_=-270,S=270,O={Point:0,LineString:1,MultiLineString:1,Polygon:2};function M(t,e){const o=O[t.geometry.type]-O[e.geometry.type];return 0===o&&t.geometry.type===p.POLYGON?t.area-e.area:o}const L=function(t){return t.map((t=>(t.geometry.type===p.POLYGON&&(t.area=a.geometry({type:p.FEATURE,property:{},geometry:t.geometry})),t))).sort(M).map((t=>(delete t.area,t)))};const N=function(t,e=0){return[[t.point.x-e,t.point.y-e],[t.point.x+e,t.point.y+e]]};function b(t){if(this._items={},this._nums={},this._length=t?t.length:0,t)for(let e=0,o=t.length;e<o;e++)this.add(t[e]),void 0!==t[e]&&("string"==typeof t[e]?this._items[t[e]]=e:this._nums[t[e]]=e)}b.prototype.add=function(t){return this.has(t)||(this._length++,"string"==typeof t?this._items[t]=this._length:this._nums[t]=this._length),this},b.prototype.delete=function(t){return!1===this.has(t)||(this._length--,delete this._items[t],delete this._nums[t]),this},b.prototype.has=function(t){return("string"==typeof t||"number"==typeof t)&&(void 0!==this._items[t]||void 0!==this._nums[t])},b.prototype.values=function(){const t=[];return Object.keys(this._items).forEach((e=>{t.push({k:e,v:this._items[e]})})),Object.keys(this._nums).forEach((e=>{t.push({k:JSON.parse(e),v:this._nums[e]})})),t.sort(((t,e)=>t.v-e.v)).map((t=>t.k))},b.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};const x=b,P=[m.FEATURE,m.MIDPOINT,m.VERTEX],A={click:function(t,e,o){return F(t,e,o,o.options.clickBuffer)},touch:function(t,e,o){return F(t,e,o,o.options.touchBuffer)}};function F(t,e,o,n){if(null===o.map)return[];const r=t?N(t,n):e,i={};o.options.styles&&(i.layers=o.options.styles.map((t=>t.id)).filter((t=>null!=o.map.getLayer(t))));const s=o.map.queryRenderedFeatures(r,i).filter((t=>-1!==P.indexOf(t.properties.meta))),a=new x,c=[];return s.forEach((t=>{const e=t.properties.id;a.has(e)||(a.add(e),c.push(t))})),L(c)}function R(t,e){const o=A.click(t,null,e),n={mouse:l.NONE};return o[0]&&(n.mouse=o[0].properties.active===y.ACTIVE?l.MOVE:l.POINTER,n.feature=o[0].properties.meta),-1!==e.events.currentModeName().indexOf("draw")&&(n.mouse=l.ADD),e.ui.queueMapClasses(n),e.ui.updateMapClasses(),o[0]}function w(t,e){const o=t.x-e.x,n=t.y-e.y;return Math.sqrt(o*o+n*n)}const D=4,U=12,k=500;function V(t,e,o={}){const n=null!=o.fineTolerance?o.fineTolerance:D,r=null!=o.grossTolerance?o.grossTolerance:U,i=null!=o.interval?o.interval:k;t.point=t.point||e.point,t.time=t.time||e.time;const s=w(t.point,e.point);return s<n||s<r&&e.time-t.time<i}const G=25,B=250;function J(t,e,o={}){const n=null!=o.tolerance?o.tolerance:G,r=null!=o.interval?o.interval:B;t.point=t.point||e.point,t.time=t.time||e.time;return w(t.point,e.point)<n&&e.time-t.time<r}const j=((t,e=21)=>(o=e)=>{let n="",r=0|o;for(;r--;)n+=t[Math.random()*t.length|0];return n})("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",32);function $(){return j()}const Y=function(t,e){this.ctx=t,this.properties=e.properties||{},this.coordinates=e.geometry.coordinates,this.id=e.id||$(),this.type=e.geometry.type};Y.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},Y.prototype.incomingCoords=function(t){this.setCoordinates(t)},Y.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},Y.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},Y.prototype.setProperty=function(t,e){this.properties[t]=e},Y.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:p.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},Y.prototype.internal=function(t){const e={id:this.id,meta:m.FEATURE,"meta:type":this.type,active:y.INACTIVE,mode:t};if(this.ctx.options.userProperties)for(const o in this.properties)e[`user_${o}`]=this.properties[o];return{type:p.FEATURE,properties:e,geometry:{coordinates:this.getCoordinates(),type:this.type}}};const H=Y,X=function(t,e){H.call(this,t,e)};(X.prototype=Object.create(H.prototype)).isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1]},X.prototype.updateCoordinate=function(t,e,o){this.coordinates=3===arguments.length?[e,o]:[t,e],this.changed()},X.prototype.getCoordinate=function(){return this.getCoordinates()};const q=X,Z=function(t,e){H.call(this,t,e)};(Z.prototype=Object.create(H.prototype)).isValid=function(){return this.coordinates.length>1},Z.prototype.addCoordinate=function(t,e,o){this.changed();const n=parseInt(t,10);this.coordinates.splice(n,0,[e,o])},Z.prototype.getCoordinate=function(t){const e=parseInt(t,10);return JSON.parse(JSON.stringify(this.coordinates[e]))},Z.prototype.removeCoordinate=function(t){this.changed(),this.coordinates.splice(parseInt(t,10),1)},Z.prototype.updateCoordinate=function(t,e,o){const n=parseInt(t,10);this.coordinates[n]=[e,o],this.changed()};const W=Z,K=function(t,e){H.call(this,t,e),this.coordinates=this.coordinates.map((t=>t.slice(0,-1)))};(K.prototype=Object.create(H.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every((t=>t.length>2))},K.prototype.incomingCoords=function(t){this.coordinates=t.map((t=>t.slice(0,-1))),this.changed()},K.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},K.prototype.addCoordinate=function(t,e,o){this.changed();const n=t.split(".").map((t=>parseInt(t,10)));this.coordinates[n[0]].splice(n[1],0,[e,o])},K.prototype.removeCoordinate=function(t){this.changed();const e=t.split(".").map((t=>parseInt(t,10))),o=this.coordinates[e[0]];o&&(o.splice(e[1],1),o.length<3&&this.coordinates.splice(e[0],1))},K.prototype.getCoordinate=function(t){const e=t.split(".").map((t=>parseInt(t,10))),o=this.coordinates[e[0]];return JSON.parse(JSON.stringify(o[e[1]]))},K.prototype.getCoordinates=function(){return this.coordinates.map((t=>t.concat([t[0]])))},K.prototype.updateCoordinate=function(t,e,o){this.changed();const n=t.split("."),r=parseInt(n[0],10),i=parseInt(n[1],10);void 0===this.coordinates[r]&&(this.coordinates[r]=[]),this.coordinates[r][i]=[e,o]};const z=K,Q={MultiPoint:q,MultiLineString:W,MultiPolygon:z},tt=(t,e,o,n,r)=>{const i=o.split("."),s=parseInt(i[0],10),a=i[1]?i.slice(1).join("."):null;return t[s][e](a,n,r)},et=function(t,e){if(H.call(this,t,e),delete this.coordinates,this.model=Q[e.geometry.type],void 0===this.model)throw new TypeError(`${e.geometry.type} is not a valid type`);this.features=this._coordinatesToFeatures(e.geometry.coordinates)};(et.prototype=Object.create(H.prototype))._coordinatesToFeatures=function(t){const e=this.model.bind(this);return t.map((t=>new e(this.ctx,{id:$(),type:p.FEATURE,properties:{},geometry:{coordinates:t,type:this.type.replace("Multi","")}})))},et.prototype.isValid=function(){return this.features.every((t=>t.isValid()))},et.prototype.setCoordinates=function(t){this.features=this._coordinatesToFeatures(t),this.changed()},et.prototype.getCoordinate=function(t){return tt(this.features,"getCoordinate",t)},et.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map((t=>t.type===p.POLYGON?t.getCoordinates():t.coordinates))))},et.prototype.updateCoordinate=function(t,e,o){tt(this.features,"updateCoordinate",t,e,o),this.changed()},et.prototype.addCoordinate=function(t,e,o){tt(this.features,"addCoordinate",t,e,o),this.changed()},et.prototype.removeCoordinate=function(t){tt(this.features,"removeCoordinate",t),this.changed()},et.prototype.getFeatures=function(){return this.features};const ot=et;function nt(t){this.map=t.map,this.drawConfig=JSON.parse(JSON.stringify(t.options||{})),this._ctx=t}nt.prototype.setSelected=function(t){return this._ctx.store.setSelected(t)},nt.prototype.setSelectedCoordinates=function(t){this._ctx.store.setSelectedCoordinates(t),t.reduce(((t,e)=>(void 0===t[e.feature_id]&&(t[e.feature_id]=!0,this._ctx.store.get(e.feature_id).changed()),t)),{})},nt.prototype.getSelected=function(){return this._ctx.store.getSelected()},nt.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},nt.prototype.isSelected=function(t){return this._ctx.store.isSelected(t)},nt.prototype.getFeature=function(t){return this._ctx.store.get(t)},nt.prototype.select=function(t){return this._ctx.store.select(t)},nt.prototype.deselect=function(t){return this._ctx.store.deselect(t)},nt.prototype.deleteFeature=function(t,e={}){return this._ctx.store.delete(t,e)},nt.prototype.addFeature=function(t,e={}){return this._ctx.store.add(t,e)},nt.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},nt.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},nt.prototype.setActionableState=function(t={}){const e={trash:t.trash||!1,combineFeatures:t.combineFeatures||!1,uncombineFeatures:t.uncombineFeatures||!1};return this._ctx.events.actionable(e)},nt.prototype.changeMode=function(t,e={},o={}){return this._ctx.events.changeMode(t,e,o)},nt.prototype.fire=function(t,e){return this._ctx.events.fire(t,e)},nt.prototype.updateUIClasses=function(t){return this._ctx.ui.queueMapClasses(t)},nt.prototype.activateUIButton=function(t){return this._ctx.ui.setActiveButton(t)},nt.prototype.featuresAt=function(t,e,o="click"){if("click"!==o&&"touch"!==o)throw new Error("invalid buffer type");return A[o](t,e,this._ctx)},nt.prototype.newFeature=function(t){const e=t.geometry.type;return e===p.POINT?new q(this._ctx,t):e===p.LINE_STRING?new W(this._ctx,t):e===p.POLYGON?new z(this._ctx,t):new ot(this._ctx,t)},nt.prototype.isInstanceOf=function(t,e){if(t===p.POINT)return e instanceof q;if(t===p.LINE_STRING)return e instanceof W;if(t===p.POLYGON)return e instanceof z;if("MultiFeature"===t)return e instanceof ot;throw new Error(`Unknown feature class: ${t}`)},nt.prototype.doRender=function(t){return this._ctx.store.featureChanged(t)};const rt=nt;nt.prototype.onSetup=function(){},nt.prototype.onDrag=function(){},nt.prototype.onClick=function(){},nt.prototype.onMouseMove=function(){},nt.prototype.onMouseDown=function(){},nt.prototype.onMouseUp=function(){},nt.prototype.onMouseOut=function(){},nt.prototype.onKeyUp=function(){},nt.prototype.onKeyDown=function(){},nt.prototype.onTouchStart=function(){},nt.prototype.onTouchMove=function(){},nt.prototype.onTouchEnd=function(){},nt.prototype.onTap=function(){},nt.prototype.onStop=function(){},nt.prototype.onTrash=function(){},nt.prototype.onCombineFeature=function(){},nt.prototype.onUncombineFeature=function(){},nt.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};const it={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},st=Object.keys(it);function at(t){const e=Object.keys(t);return function(o,n={}){let r={};const i=e.reduce(((e,o)=>(e[o]=t[o],e)),new rt(o));return{start(){r=i.onSetup(n),st.forEach((e=>{const o=it[e];let n=()=>!1;var s;t[o]&&(n=()=>!0),this.on(e,n,(s=o,t=>i[s](r,t)))}))},stop(){i.onStop(r)},trash(){i.onTrash(r)},combineFeatures(){i.onCombineFeatures(r)},uncombineFeatures(){i.onUncombineFeatures(r)},render(t,e){i.toDisplayFeatures(r,t,e)}}}}const ct=function(t){return[].concat(t).filter((t=>void 0!==t))};function ut(){const t=this;if(!(t.ctx.map&&void 0!==t.ctx.map.getSource(u.HOT)))return a();const e=t.ctx.events.currentModeName();t.ctx.ui.queueMapClasses({mode:e});let o=[],n=[];t.isDirty?n=t.getAllIds():(o=t.getChangedIds().filter((e=>void 0!==t.get(e))),n=t.sources.hot.filter((e=>e.properties.id&&-1===o.indexOf(e.properties.id)&&void 0!==t.get(e.properties.id))).map((t=>t.properties.id))),t.sources.hot=[];const r=t.sources.cold.length;t.sources.cold=t.isDirty?[]:t.sources.cold.filter((t=>{const e=t.properties.id||t.properties.parent;return-1===o.indexOf(e)}));const i=r!==t.sources.cold.length||n.length>0;function s(o,n){const r=t.get(o).internal(e);t.ctx.events.currentModeRender(r,(o=>{o.properties.mode=e,t.sources[n].push(o)}))}function a(){t.isDirty=!1,t.clearChangedIds()}o.forEach((t=>s(t,"hot"))),n.forEach((t=>s(t,"cold"))),i&&t.ctx.map.getSource(u.COLD).setData({type:p.FEATURE_COLLECTION,features:t.sources.cold}),t.ctx.map.getSource(u.HOT).setData({type:p.FEATURE_COLLECTION,features:t.sources.hot}),a()}function lt(t){let e;this._features={},this._featureIds=new x,this._selectedFeatureIds=new x,this._selectedCoordinates=[],this._changedFeatureIds=new x,this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=t,this.sources={hot:[],cold:[]},this.render=()=>{e||(e=requestAnimationFrame((()=>{e=null,ut.call(this),this._emitSelectionChange&&(this.ctx.events.fire(f.SELECTION_CHANGE,{features:this.getSelected().map((t=>t.toGeoJSON())),points:this.getSelectedCoordinates().map((t=>({type:p.FEATURE,properties:{},geometry:{type:p.POINT,coordinates:t.coordinates}})))}),this._emitSelectionChange=!1),this.ctx.events.fire(f.RENDER,{})})))},this.isDirty=!1}function dt(t,e={}){const o=t._selectedCoordinates.filter((e=>t._selectedFeatureIds.has(e.feature_id)));t._selectedCoordinates.length===o.length||e.silent||(t._emitSelectionChange=!0),t._selectedCoordinates=o}lt.prototype.createRenderBatch=function(){const t=this.render;let e=0;return this.render=function(){e++},()=>{this.render=t,e>0&&this.render()}},lt.prototype.setDirty=function(){return this.isDirty=!0,this},lt.prototype.featureCreated=function(t,e={}){this._changedFeatureIds.add(t);if(!0!==(null!=e.silent?e.silent:this.ctx.options.suppressAPIEvents)){const e=this.get(t);this.ctx.events.fire(f.CREATE,{features:[e.toGeoJSON()]})}return this},lt.prototype.featureChanged=function(t,e={}){this._changedFeatureIds.add(t);return!0!==(null!=e.silent?e.silent:this.ctx.options.suppressAPIEvents)&&this.ctx.events.fire(f.UPDATE,{action:e.action?e.action:g.CHANGE_COORDINATES,features:[this.get(t).toGeoJSON()]}),this},lt.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},lt.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},lt.prototype.getAllIds=function(){return this._featureIds.values()},lt.prototype.add=function(t,e={}){return this._features[t.id]=t,this._featureIds.add(t.id),this.featureCreated(t.id,{silent:e.silent}),this},lt.prototype.delete=function(t,e={}){const o=[];return ct(t).forEach((t=>{this._featureIds.has(t)&&(this._featureIds.delete(t),this._selectedFeatureIds.delete(t),e.silent||-1===o.indexOf(this._features[t])&&o.push(this._features[t].toGeoJSON()),delete this._features[t],this.isDirty=!0)})),o.length&&this.ctx.events.fire(f.DELETE,{features:o}),dt(this,e),this},lt.prototype.get=function(t){return this._features[t]},lt.prototype.getAll=function(){return Object.keys(this._features).map((t=>this._features[t]))},lt.prototype.select=function(t,e={}){return ct(t).forEach((t=>{this._selectedFeatureIds.has(t)||(this._selectedFeatureIds.add(t),this._changedFeatureIds.add(t),e.silent||(this._emitSelectionChange=!0))})),this},lt.prototype.deselect=function(t,e={}){return ct(t).forEach((t=>{this._selectedFeatureIds.has(t)&&(this._selectedFeatureIds.delete(t),this._changedFeatureIds.add(t),e.silent||(this._emitSelectionChange=!0))})),dt(this,e),this},lt.prototype.clearSelected=function(t={}){return this.deselect(this._selectedFeatureIds.values(),{silent:t.silent}),this},lt.prototype.setSelected=function(t,e={}){return t=ct(t),this.deselect(this._selectedFeatureIds.values().filter((e=>-1===t.indexOf(e))),{silent:e.silent}),this.select(t.filter((t=>!this._selectedFeatureIds.has(t))),{silent:e.silent}),this},lt.prototype.setSelectedCoordinates=function(t){return this._selectedCoordinates=t,this._emitSelectionChange=!0,this},lt.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},lt.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},lt.prototype.getSelected=function(){return this.getSelectedIds().map((t=>this.get(t)))},lt.prototype.getSelectedCoordinates=function(){return this._selectedCoordinates.map((t=>({coordinates:this.get(t.feature_id).getCoordinate(t.coord_path)})))},lt.prototype.isSelected=function(t){return this._selectedFeatureIds.has(t)},lt.prototype.setFeatureProperty=function(t,e,o,n={}){this.get(t).setProperty(e,o),this.featureChanged(t,{silent:n.silent,action:g.CHANGE_PROPERTIES})},lt.prototype.storeMapConfig=function(){E.forEach((t=>{this.ctx.map[t]&&(this._mapInitialConfig[t]=this.ctx.map[t].isEnabled())}))},lt.prototype.restoreMapConfig=function(){Object.keys(this._mapInitialConfig).forEach((t=>{this._mapInitialConfig[t]?this.ctx.map[t].enable():this.ctx.map[t].disable()}))},lt.prototype.getInitialConfigValue=function(t){return void 0===this._mapInitialConfig[t]||this._mapInitialConfig[t]};const pt=["mode","feature","mouse"];function ht(t){let e=null,o=null;const n={onRemove(){return t.map.off("load",n.connect),clearInterval(o),n.removeLayers(),t.store.restoreMapConfig(),t.ui.removeButtons(),t.events.removeEventListeners(),t.ui.clearMapClasses(),t.boxZoomInitial&&t.map.boxZoom.enable(),t.map=null,t.container=null,t.store=null,e&&e.parentNode&&e.parentNode.removeChild(e),e=null,this},connect(){t.map.off("load",n.connect),clearInterval(o),n.addLayers(),t.store.storeMapConfig(),t.events.addEventListeners()},onAdd(r){if(t.map=r,t.events=function(t){const e=Object.keys(t.options.modes).reduce(((e,o)=>(e[o]=at(t.options.modes[o]),e)),{});let o={},n={};const r={};let i=null,a=null;r.drag=function(e,o){o({point:e.point,time:(new Date).getTime()})?(t.ui.queueMapClasses({mouse:l.DRAG}),a.drag(e)):e.originalEvent.stopPropagation()},r.mousedrag=function(t){r.drag(t,(t=>!V(o,t)))},r.touchdrag=function(t){r.drag(t,(t=>!J(n,t)))},r.mousemove=function(e){if(1===(void 0!==e.originalEvent.buttons?e.originalEvent.buttons:e.originalEvent.which))return r.mousedrag(e);const o=R(e,t);e.featureTarget=o,a.mousemove(e)},r.mousedown=function(e){o={time:(new Date).getTime(),point:e.point};const n=R(e,t);e.featureTarget=n,a.mousedown(e)},r.mouseup=function(e){const n=R(e,t);e.featureTarget=n,V(o,{point:e.point,time:(new Date).getTime()})?a.click(e):a.mouseup(e)},r.mouseout=function(t){a.mouseout(t)},r.touchstart=function(e){if(!t.options.touchEnabled)return;n={time:(new Date).getTime(),point:e.point};const o=A.touch(e,null,t)[0];e.featureTarget=o,a.touchstart(e)},r.touchmove=function(e){if(t.options.touchEnabled)return a.touchmove(e),r.touchdrag(e)},r.touchend=function(e){if(e.originalEvent.preventDefault(),!t.options.touchEnabled)return;const o=A.touch(e,null,t)[0];e.featureTarget=o,J(n,{time:(new Date).getTime(),point:e.point})?a.tap(e):a.touchend(e)};const u=t=>!(8===t||46===t||t>=48&&t<=57);function d(o,n,r={}){a.stop();const c=e[o];if(void 0===c)throw new Error(`${o} is not valid`);i=o;const u=c(t,n);a=s(u,t),r.silent||t.map.fire(f.MODE_CHANGE,{mode:o}),t.store.setDirty(),t.store.render()}r.keydown=function(e){(e.srcElement||e.target).classList.contains(c.CANVAS)&&(8!==e.keyCode&&46!==e.keyCode||!t.options.controls.trash?u(e.keyCode)?a.keydown(e):49===e.keyCode&&t.options.controls.point?d(h.DRAW_POINT):50===e.keyCode&&t.options.controls.line_string?d(h.DRAW_LINE_STRING):51===e.keyCode&&t.options.controls.polygon&&d(h.DRAW_POLYGON):(e.preventDefault(),a.trash()))},r.keyup=function(t){u(t.keyCode)&&a.keyup(t)},r.zoomend=function(){t.store.changeZoom()},r.data=function(e){if("style"===e.dataType){const{setup:e,map:o,options:n,store:r}=t;n.styles.some((t=>o.getLayer(t.id)))||(e.addLayers(),r.setDirty(),r.render())}};const p={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start(){i=t.options.defaultMode,a=s(e[i](t),t)},changeMode:d,actionable:function(e){let o=!1;Object.keys(e).forEach((t=>{if(void 0===p[t])throw new Error("Invalid action type");p[t]!==e[t]&&(o=!0),p[t]=e[t]})),o&&t.map.fire(f.ACTIONABLE,{actions:p})},currentModeName:()=>i,currentModeRender:(t,e)=>a.render(t,e),fire(e,o){t.map&&t.map.fire(e,o)},addEventListeners(){t.map.on("mousemove",r.mousemove),t.map.on("mousedown",r.mousedown),t.map.on("mouseup",r.mouseup),t.map.on("data",r.data),t.map.on("touchmove",r.touchmove),t.map.on("touchstart",r.touchstart),t.map.on("touchend",r.touchend),t.container.addEventListener("mouseout",r.mouseout),t.options.keybindings&&(t.container.addEventListener("keydown",r.keydown),t.container.addEventListener("keyup",r.keyup))},removeEventListeners(){t.map.off("mousemove",r.mousemove),t.map.off("mousedown",r.mousedown),t.map.off("mouseup",r.mouseup),t.map.off("data",r.data),t.map.off("touchmove",r.touchmove),t.map.off("touchstart",r.touchstart),t.map.off("touchend",r.touchend),t.container.removeEventListener("mouseout",r.mouseout),t.options.keybindings&&(t.container.removeEventListener("keydown",r.keydown),t.container.removeEventListener("keyup",r.keyup))},trash(t){a.trash(t)},combineFeatures(){a.combineFeatures()},uncombineFeatures(){a.uncombineFeatures()},getMode:()=>i}}(t),t.ui=function(t){const e={};let o=null,n={mode:null,feature:null,mouse:null},r={mode:null,feature:null,mouse:null};function i(t){r=Object.assign(r,t)}function s(){if(!t.container)return;const e=[],o=[];pt.forEach((t=>{r[t]!==n[t]&&(e.push(`${t}-${n[t]}`),null!==r[t]&&o.push(`${t}-${r[t]}`))})),e.length>0&&t.container.classList.remove(...e),o.length>0&&t.container.classList.add(...o),n=Object.assign(n,r)}function a(t,e={}){const n=document.createElement("button");return n.className=`${c.CONTROL_BUTTON} ${e.className}`,n.setAttribute("title",e.title),e.container.appendChild(n),n.addEventListener("click",(n=>{if(n.preventDefault(),n.stopPropagation(),n.target===o)return u(),void e.onDeactivate();l(t),e.onActivate()}),!0),n}function u(){o&&(o.classList.remove(c.ACTIVE_BUTTON),o=null)}function l(t){u();const n=e[t];n&&n&&"trash"!==t&&(n.classList.add(c.ACTIVE_BUTTON),o=n)}return{setActiveButton:l,queueMapClasses:i,updateMapClasses:s,clearMapClasses:function(){i({mode:null,feature:null,mouse:null}),s()},addButtons:function(){const o=t.options.controls,n=document.createElement("div");return n.className=`${c.CONTROL_GROUP} ${c.CONTROL_BASE}`,o?(o[d.LINE]&&(e[d.LINE]=a(d.LINE,{container:n,className:c.CONTROL_BUTTON_LINE,title:"LineString tool "+(t.options.keybindings?"(l)":""),onActivate:()=>t.events.changeMode(h.DRAW_LINE_STRING),onDeactivate:()=>t.events.trash()})),o[d.POLYGON]&&(e[d.POLYGON]=a(d.POLYGON,{container:n,className:c.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(t.options.keybindings?"(p)":""),onActivate:()=>t.events.changeMode(h.DRAW_POLYGON),onDeactivate:()=>t.events.trash()})),o[d.POINT]&&(e[d.POINT]=a(d.POINT,{container:n,className:c.CONTROL_BUTTON_POINT,title:"Marker tool "+(t.options.keybindings?"(m)":""),onActivate:()=>t.events.changeMode(h.DRAW_POINT),onDeactivate:()=>t.events.trash()})),o.trash&&(e.trash=a("trash",{container:n,className:c.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:()=>{t.events.trash()}})),o.combine_features&&(e.combine_features=a("combineFeatures",{container:n,className:c.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:()=>{t.events.combineFeatures()}})),o.uncombine_features&&(e.uncombine_features=a("uncombineFeatures",{container:n,className:c.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:()=>{t.events.uncombineFeatures()}})),n):n},removeButtons:function(){Object.keys(e).forEach((t=>{const o=e[t];o.parentNode&&o.parentNode.removeChild(o),delete e[t]}))}}}(t),t.container=r.getContainer(),t.store=new lt(t),e=t.ui.addButtons(),t.options.boxSelect){t.boxZoomInitial=r.boxZoom.isEnabled(),r.boxZoom.disable();const e=r.dragPan.isEnabled();r.dragPan.disable(),r.dragPan.enable(),e||r.dragPan.disable()}return r.loaded()?n.connect():(r.on("load",n.connect),o=setInterval((()=>{r.loaded()&&n.connect()}),16)),t.events.start(),e},addLayers(){t.map.addSource(u.COLD,{data:{type:p.FEATURE_COLLECTION,features:[]},type:"geojson"}),t.map.addSource(u.HOT,{data:{type:p.FEATURE_COLLECTION,features:[]},type:"geojson"}),t.options.styles.forEach((e=>{t.map.addLayer(e)})),t.store.setDirty(!0),t.store.render()},removeLayers(){t.options.styles.forEach((e=>{t.map.getLayer(e.id)&&t.map.removeLayer(e.id)})),t.map.getSource(u.COLD)&&t.map.removeSource(u.COLD),t.map.getSource(u.HOT)&&t.map.removeSource(u.HOT)}};return t.setup=n,n}const ft="#3bb2d0",gt="#fbb03b",mt="#fff",yt=[{id:"gl-draw-polygon-fill",type:"fill",filter:["all",["==","$type","Polygon"]],paint:{"fill-color":["case",["==",["get","active"],"true"],gt,ft],"fill-opacity":.1}},{id:"gl-draw-lines",type:"line",filter:["any",["==","$type","LineString"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["case",["==",["get","active"],"true"],gt,ft],"line-dasharray":["case",["==",["get","active"],"true"],[.2,2],[2,0]],"line-width":2}},{id:"gl-draw-point-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":mt}},{id:"gl-draw-point-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":["case",["==",["get","active"],"true"],gt,ft]}},{id:"gl-draw-vertex-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":mt}},{id:"gl-draw-vertex-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":gt}},{id:"gl-draw-midpoint",type:"circle",filter:["all",["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":gt}}];function Et(t){return function(e){const o=e.featureTarget;return!!o&&(!!o.properties&&o.properties.meta===t)}}function Ct(t){return!!t.originalEvent&&(!!t.originalEvent.shiftKey&&0===t.originalEvent.button)}function Tt(t){return!!t.featureTarget&&(!!t.featureTarget.properties&&(t.featureTarget.properties.active===y.ACTIVE&&t.featureTarget.properties.meta===m.FEATURE))}function vt(t){return!!t.featureTarget&&(!!t.featureTarget.properties&&(t.featureTarget.properties.active===y.INACTIVE&&t.featureTarget.properties.meta===m.FEATURE))}function It(t){return void 0===t.featureTarget}function _t(t){return!!t.featureTarget&&(!!t.featureTarget.properties&&t.featureTarget.properties.meta===m.FEATURE)}function St(t){const e=t.featureTarget;return!!e&&(!!e.properties&&e.properties.meta===m.VERTEX)}function Ot(t){return!!t.originalEvent&&!0===t.originalEvent.shiftKey}function Mt(t){return 27===t.keyCode}function Lt(t){return 13===t.keyCode}function Nt(){return!0}var bt=o(4748);const xt=function(t,e){const o=e.getBoundingClientRect();return new bt(t.clientX-o.left-(e.clientLeft||0),t.clientY-o.top-(e.clientTop||0))};function Pt(t,e,o,n){return{type:p.FEATURE,properties:{meta:m.VERTEX,parent:t,coord_path:o,active:n?y.ACTIVE:y.INACTIVE},geometry:{type:p.POINT,coordinates:e}}}function At(t,e,o){const n=e.geometry.coordinates,r=o.geometry.coordinates;if(n[1]>I||n[1]<T||r[1]>I||r[1]<T)return null;const i={lng:(n[0]+r[0])/2,lat:(n[1]+r[1])/2};return{type:p.FEATURE,properties:{meta:m.MIDPOINT,parent:t,lng:i.lng,lat:i.lat,coord_path:o.properties.coord_path},geometry:{type:p.POINT,coordinates:[i.lng,i.lat]}}}const Ft=function t(e,o={},n=null){const{type:r,coordinates:i}=e.geometry,s=e.properties&&e.properties.id;let a=[];function c(t,e){let n="",r=null;t.forEach(((t,i)=>{const c=null!=e?`${e}.${i}`:String(i),l=Pt(s,t,c,u(c));if(o.midpoints&&r){const t=At(s,r,l);t&&a.push(t)}r=l;const d=JSON.stringify(t);n!==d&&a.push(l),0===i&&(n=d)}))}function u(t){return!!o.selectedPaths&&-1!==o.selectedPaths.indexOf(t)}return r===p.POINT?a.push(Pt(s,i,n,u(n))):r===p.POLYGON?i.forEach(((t,e)=>{c(t,null!==n?`${n}.${e}`:String(e))})):r===p.LINE_STRING?c(i,n):0===r.indexOf(p.MULTI_PREFIX)&&function(){const n=r.replace(p.MULTI_PREFIX,"");i.forEach(((r,i)=>{const s={type:p.FEATURE,properties:e.properties,geometry:{type:n,coordinates:r}};a=a.concat(t(s,o,i))}))}(),a},Rt={enable(t){setTimeout((()=>{t.map&&t.map.doubleClickZoom&&t._ctx&&t._ctx.store&&t._ctx.store.getInitialConfigValue&&t._ctx.store.getInitialConfigValue("doubleClickZoom")&&t.map.doubleClickZoom.enable()}),0)},disable(t){setTimeout((()=>{t.map&&t.map.doubleClickZoom&&t.map.doubleClickZoom.disable()}),0)}},{LAT_MIN:wt,LAT_MAX:Dt,LAT_RENDERED_MIN:Ut,LAT_RENDERED_MAX:kt,LNG_MIN:Vt,LNG_MAX:Gt}=n;function Bt(t,e){let o=wt,n=Dt,r=wt,i=Dt,s=Gt,a=Vt;t.forEach((t=>{const e=function(t){const e={Point:0,LineString:1,Polygon:2,MultiPoint:1,MultiLineString:2,MultiPolygon:3}[t.geometry.type],o=[t.geometry.coordinates].flat(e),n=o.map((t=>t[0])),r=o.map((t=>t[1])),i=t=>Math.min.apply(null,t),s=t=>Math.max.apply(null,t);return[i(n),i(r),s(n),s(r)]}(t),c=e[1],u=e[3],l=e[0],d=e[2];c>o&&(o=c),u<n&&(n=u),u>r&&(r=u),c<i&&(i=c),l<s&&(s=l),d>a&&(a=d)}));const c=e;return o+c.lat>kt&&(c.lat=kt-o),r+c.lat>Dt&&(c.lat=Dt-r),n+c.lat<Ut&&(c.lat=Ut-n),i+c.lat<wt&&(c.lat=wt-i),s+c.lng<=Vt&&(c.lng+=360*Math.ceil(Math.abs(c.lng)/360)),a+c.lng>=Gt&&(c.lng-=360*Math.ceil(Math.abs(c.lng)/360)),c}function Jt(t,e){const o=Bt(t.map((t=>t.toGeoJSON())),e);t.forEach((t=>{const e=t.getCoordinates(),n=t=>{const e={lng:t[0]+o.lng,lat:t[1]+o.lat};return[e.lng,e.lat]},r=t=>t.map((t=>n(t))),i=t=>t.map((t=>r(t)));let s;t.type===p.POINT?s=n(e):t.type===p.LINE_STRING||t.type===p.MULTI_POINT?s=e.map(n):t.type===p.POLYGON||t.type===p.MULTI_LINE_STRING?s=e.map(r):t.type===p.MULTI_POLYGON&&(s=e.map(i)),t.incomingCoords(s)}))}const jt={onSetup:function(t){const e={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initialDragPanState:this.map.dragPan.isEnabled(),initiallySelectedFeatureIds:t.featureIds||[]};return this.setSelected(e.initiallySelectedFeatureIds.filter((t=>void 0!==this.getFeature(t)))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),e},fireUpdate:function(){this.fire(f.UPDATE,{action:g.MOVE,features:this.getSelected().map((t=>t.toGeoJSON()))})},fireActionable:function(){const t=this.getSelected(),e=t.filter((t=>this.isInstanceOf("MultiFeature",t)));let o=!1;if(t.length>1){o=!0;const e=t[0].type.replace("Multi","");t.forEach((t=>{t.type.replace("Multi","")!==e&&(o=!1)}))}const n=e.length>0,r=t.length>0;this.setActionableState({combineFeatures:o,uncombineFeatures:n,trash:r})},getUniqueIds:function(t){if(!t.length)return[];return t.map((t=>t.properties.id)).filter((t=>void 0!==t)).reduce(((t,e)=>(t.add(e),t)),new x).values()},stopExtendedInteractions:function(t){t.boxSelectElement&&(t.boxSelectElement.parentNode&&t.boxSelectElement.parentNode.removeChild(t.boxSelectElement),t.boxSelectElement=null),(t.canDragMove||t.canBoxSelect)&&!0===t.initialDragPanState&&this.map.dragPan.enable(),t.boxSelecting=!1,t.canBoxSelect=!1,t.dragMoving=!1,t.canDragMove=!1},onStop:function(){Rt.enable(this)},onMouseMove:function(t,e){return _t(e)&&t.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(t),!0},onMouseOut:function(t){return!t.dragMoving||this.fireUpdate()}};jt.onTap=jt.onClick=function(t,e){return It(e)?this.clickAnywhere(t,e):Et(m.VERTEX)(e)?this.clickOnVertex(t,e):_t(e)?this.clickOnFeature(t,e):void 0},jt.clickAnywhere=function(t){const e=this.getSelectedIds();e.length&&(this.clearSelectedFeatures(),e.forEach((t=>this.doRender(t)))),Rt.enable(this),this.stopExtendedInteractions(t)},jt.clickOnVertex=function(t,e){this.changeMode(h.DIRECT_SELECT,{featureId:e.featureTarget.properties.parent,coordPath:e.featureTarget.properties.coord_path,startPos:e.lngLat}),this.updateUIClasses({mouse:l.MOVE})},jt.startOnActiveFeature=function(t,e){this.stopExtendedInteractions(t),this.map.dragPan.disable(),this.doRender(e.featureTarget.properties.id),t.canDragMove=!0,t.dragMoveLocation=e.lngLat},jt.clickOnFeature=function(t,e){Rt.disable(this),this.stopExtendedInteractions(t);const o=Ot(e),n=this.getSelectedIds(),r=e.featureTarget.properties.id,i=this.isSelected(r);if(!o&&i&&this.getFeature(r).type!==p.POINT)return this.changeMode(h.DIRECT_SELECT,{featureId:r});i&&o?(this.deselect(r),this.updateUIClasses({mouse:l.POINTER}),1===n.length&&Rt.enable(this)):!i&&o?(this.select(r),this.updateUIClasses({mouse:l.MOVE})):i||o||(n.forEach((t=>this.doRender(t))),this.setSelected(r),this.updateUIClasses({mouse:l.MOVE})),this.doRender(r)},jt.onMouseDown=function(t,e){return t.initialDragPanState=this.map.dragPan.isEnabled(),Tt(e)?this.startOnActiveFeature(t,e):this.drawConfig.boxSelect&&Ct(e)?this.startBoxSelect(t,e):void 0},jt.startBoxSelect=function(t,e){this.stopExtendedInteractions(t),this.map.dragPan.disable(),t.boxSelectStartLocation=xt(e.originalEvent,this.map.getContainer()),t.canBoxSelect=!0},jt.onTouchStart=function(t,e){if(Tt(e))return this.startOnActiveFeature(t,e)},jt.onDrag=function(t,e){return t.canDragMove?this.dragMove(t,e):this.drawConfig.boxSelect&&t.canBoxSelect?this.whileBoxSelect(t,e):void 0},jt.whileBoxSelect=function(t,e){t.boxSelecting=!0,this.updateUIClasses({mouse:l.ADD}),t.boxSelectElement||(t.boxSelectElement=document.createElement("div"),t.boxSelectElement.classList.add(c.BOX_SELECT),this.map.getContainer().appendChild(t.boxSelectElement));const o=xt(e.originalEvent,this.map.getContainer()),n=Math.min(t.boxSelectStartLocation.x,o.x),r=Math.max(t.boxSelectStartLocation.x,o.x),i=Math.min(t.boxSelectStartLocation.y,o.y),s=Math.max(t.boxSelectStartLocation.y,o.y),a=`translate(${n}px, ${i}px)`;t.boxSelectElement.style.transform=a,t.boxSelectElement.style.WebkitTransform=a,t.boxSelectElement.style.width=r-n+"px",t.boxSelectElement.style.height=s-i+"px"},jt.dragMove=function(t,e){t.dragMoving=!0,e.originalEvent.stopPropagation();const o={lng:e.lngLat.lng-t.dragMoveLocation.lng,lat:e.lngLat.lat-t.dragMoveLocation.lat};Jt(this.getSelected(),o),t.dragMoveLocation=e.lngLat},jt.onTouchEnd=jt.onMouseUp=function(t,e){if(t.dragMoving)this.fireUpdate();else if(t.boxSelecting){const o=[t.boxSelectStartLocation,xt(e.originalEvent,this.map.getContainer())],n=this.featuresAt(null,o,"click"),r=this.getUniqueIds(n).filter((t=>!this.isSelected(t)));r.length&&(this.select(r),r.forEach((t=>this.doRender(t))),this.updateUIClasses({mouse:l.MOVE}))}this.stopExtendedInteractions(t)},jt.toDisplayFeatures=function(t,e,o){e.properties.active=this.isSelected(e.properties.id)?y.ACTIVE:y.INACTIVE,o(e),this.fireActionable(),e.properties.active===y.ACTIVE&&e.geometry.type!==p.POINT&&Ft(e).forEach(o)},jt.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},jt.onCombineFeatures=function(){const t=this.getSelected();if(0===t.length||t.length<2)return;const e=[],o=[],n=t[0].type.replace("Multi","");for(let r=0;r<t.length;r++){const i=t[r];if(i.type.replace("Multi","")!==n)return;i.type.includes("Multi")?i.getCoordinates().forEach((t=>{e.push(t)})):e.push(i.getCoordinates()),o.push(i.toGeoJSON())}if(o.length>1){const t=this.newFeature({type:p.FEATURE,properties:o[0].properties,geometry:{type:`Multi${n}`,coordinates:e}});this.addFeature(t),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([t.id]),this.fire(f.COMBINE_FEATURES,{createdFeatures:[t.toGeoJSON()],deletedFeatures:o})}this.fireActionable()},jt.onUncombineFeatures=function(){const t=this.getSelected();if(0===t.length)return;const e=[],o=[];for(let n=0;n<t.length;n++){const r=t[n];this.isInstanceOf("MultiFeature",r)&&(r.getFeatures().forEach((t=>{this.addFeature(t),t.properties=r.properties,e.push(t.toGeoJSON()),this.select([t.id])})),this.deleteFeature(r.id,{silent:!0}),o.push(r.toGeoJSON()))}e.length>1&&this.fire(f.UNCOMBINE_FEATURES,{createdFeatures:e,deletedFeatures:o}),this.fireActionable()};const $t=jt,Yt=Et(m.VERTEX),Ht=Et(m.MIDPOINT),Xt={fireUpdate:function(){this.fire(f.UPDATE,{action:g.CHANGE_COORDINATES,features:this.getSelected().map((t=>t.toGeoJSON()))})},fireActionable:function(t){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:t.selectedCoordPaths.length>0})},startDragging:function(t,e){t.initialDragPanState=this.map.dragPan.isEnabled(),this.map.dragPan.disable(),t.canDragMove=!0,t.dragMoveLocation=e.lngLat},stopDragging:function(t){t.canDragMove&&!0===t.initialDragPanState&&this.map.dragPan.enable(),t.dragMoving=!1,t.canDragMove=!1,t.dragMoveLocation=null},onVertex:function(t,e){this.startDragging(t,e);const o=e.featureTarget.properties,n=t.selectedCoordPaths.indexOf(o.coord_path);Ot(e)||-1!==n?Ot(e)&&-1===n&&t.selectedCoordPaths.push(o.coord_path):t.selectedCoordPaths=[o.coord_path];const r=this.pathsToCoordinates(t.featureId,t.selectedCoordPaths);this.setSelectedCoordinates(r)},onMidpoint:function(t,e){this.startDragging(t,e);const o=e.featureTarget.properties;t.feature.addCoordinate(o.coord_path,o.lng,o.lat),this.fireUpdate(),t.selectedCoordPaths=[o.coord_path]},pathsToCoordinates:function(t,e){return e.map((e=>({feature_id:t,coord_path:e})))},onFeature:function(t,e){0===t.selectedCoordPaths.length?this.startDragging(t,e):this.stopDragging(t)},dragFeature:function(t,e,o){Jt(this.getSelected(),o),t.dragMoveLocation=e.lngLat},dragVertex:function(t,e,o){const n=t.selectedCoordPaths.map((e=>t.feature.getCoordinate(e))),r=Bt(n.map((t=>({type:p.FEATURE,properties:{},geometry:{type:p.POINT,coordinates:t}}))),o);for(let i=0;i<n.length;i++){const e=n[i];t.feature.updateCoordinate(t.selectedCoordPaths[i],e[0]+r.lng,e[1]+r.lat)}},clickNoTarget:function(){this.changeMode(h.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(h.SIMPLE_SELECT)},clickActiveFeature:function(t){t.selectedCoordPaths=[],this.clearSelectedCoordinates(),t.feature.changed()},onSetup:function(t){const e=t.featureId,o=this.getFeature(e);if(!o)throw new Error("You must provide a featureId to enter direct_select mode");if(o.type===p.POINT)throw new TypeError("direct_select mode doesn't handle point features");const n={featureId:e,feature:o,dragMoveLocation:t.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:t.coordPath?[t.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(e,n.selectedCoordPaths)),this.setSelected(e),Rt.disable(this),this.setActionableState({trash:!0}),n},onStop:function(){Rt.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(t,e,o){t.featureId===e.properties.id?(e.properties.active=y.ACTIVE,o(e),Ft(e,{map:this.map,midpoints:!0,selectedPaths:t.selectedCoordPaths}).forEach(o)):(e.properties.active=y.INACTIVE,o(e)),this.fireActionable(t)},onTrash:function(t){t.selectedCoordPaths.sort(((t,e)=>e.localeCompare(t,"en",{numeric:!0}))).forEach((e=>t.feature.removeCoordinate(e))),this.fireUpdate(),t.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(t),!1===t.feature.isValid()&&(this.deleteFeature([t.featureId]),this.changeMode(h.SIMPLE_SELECT,{}))},onMouseMove:function(t,e){const o=Tt(e),n=Yt(e),r=Ht(e),i=0===t.selectedCoordPaths.length;o&&i||n&&!i?this.updateUIClasses({mouse:l.MOVE}):this.updateUIClasses({mouse:l.NONE});return(n||o||r)&&t.dragMoving&&this.fireUpdate(),this.stopDragging(t),!0},onMouseOut:function(t){return t.dragMoving&&this.fireUpdate(),!0}};Xt.onTouchStart=Xt.onMouseDown=function(t,e){return Yt(e)?this.onVertex(t,e):Tt(e)?this.onFeature(t,e):Ht(e)?this.onMidpoint(t,e):void 0},Xt.onDrag=function(t,e){if(!0!==t.canDragMove)return;t.dragMoving=!0,e.originalEvent.stopPropagation();const o={lng:e.lngLat.lng-t.dragMoveLocation.lng,lat:e.lngLat.lat-t.dragMoveLocation.lat};t.selectedCoordPaths.length>0?this.dragVertex(t,e,o):this.dragFeature(t,e,o),t.dragMoveLocation=e.lngLat},Xt.onClick=function(t,e){return It(e)?this.clickNoTarget(t,e):Tt(e)?this.clickActiveFeature(t,e):vt(e)?this.clickInactive(t,e):void this.stopDragging(t)},Xt.onTap=function(t,e){return It(e)?this.clickNoTarget(t,e):Tt(e)?this.clickActiveFeature(t,e):vt(e)?this.clickInactive(t,e):void 0},Xt.onTouchEnd=Xt.onMouseUp=function(t){t.dragMoving&&this.fireUpdate(),this.stopDragging(t)};const qt=Xt,Zt={onSetup:function(){const t=this.newFeature({type:p.FEATURE,properties:{},geometry:{type:p.POINT,coordinates:[]}});return this.addFeature(t),this.clearSelectedFeatures(),this.updateUIClasses({mouse:l.ADD}),this.activateUIButton(d.POINT),this.setActionableState({trash:!0}),{point:t}},stopDrawingAndRemove:function(t){this.deleteFeature([t.point.id],{silent:!0}),this.changeMode(h.SIMPLE_SELECT)}};Zt.onTap=Zt.onClick=function(t,e){this.updateUIClasses({mouse:l.MOVE}),t.point.updateCoordinate("",e.lngLat.lng,e.lngLat.lat),this.fire(f.CREATE,{features:[t.point.toGeoJSON()]}),this.changeMode(h.SIMPLE_SELECT,{featureIds:[t.point.id]})},Zt.onStop=function(t){this.activateUIButton(),t.point.getCoordinate().length||this.deleteFeature([t.point.id],{silent:!0})},Zt.toDisplayFeatures=function(t,e,o){const n=e.properties.id===t.point.id;if(e.properties.active=n?y.ACTIVE:y.INACTIVE,!n)return o(e)},Zt.onTrash=Zt.stopDrawingAndRemove,Zt.onKeyUp=function(t,e){if(Mt(e)||Lt(e))return this.stopDrawingAndRemove(t,e)};const Wt=Zt;const Kt=function(t,e){return!!t.lngLat&&(t.lngLat.lng===e[0]&&t.lngLat.lat===e[1])},zt={onSetup:function(){const t=this.newFeature({type:p.FEATURE,properties:{},geometry:{type:p.POLYGON,coordinates:[[]]}});return this.addFeature(t),this.clearSelectedFeatures(),Rt.disable(this),this.updateUIClasses({mouse:l.ADD}),this.activateUIButton(d.POLYGON),this.setActionableState({trash:!0}),{polygon:t,currentVertexPosition:0}},clickAnywhere:function(t,e){if(t.currentVertexPosition>0&&Kt(e,t.polygon.coordinates[0][t.currentVertexPosition-1]))return this.changeMode(h.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:l.ADD}),t.polygon.updateCoordinate(`0.${t.currentVertexPosition}`,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++,t.polygon.updateCoordinate(`0.${t.currentVertexPosition}`,e.lngLat.lng,e.lngLat.lat)},clickOnVertex:function(t){return this.changeMode(h.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},onMouseMove:function(t,e){t.polygon.updateCoordinate(`0.${t.currentVertexPosition}`,e.lngLat.lng,e.lngLat.lat),St(e)&&this.updateUIClasses({mouse:l.POINTER})}};zt.onTap=zt.onClick=function(t,e){return St(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},zt.onKeyUp=function(t,e){Mt(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(h.SIMPLE_SELECT)):Lt(e)&&this.changeMode(h.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},zt.onStop=function(t){this.updateUIClasses({mouse:l.NONE}),Rt.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.removeCoordinate(`0.${t.currentVertexPosition}`),t.polygon.isValid()?this.fire(f.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(h.SIMPLE_SELECT,{},{silent:!0})))},zt.toDisplayFeatures=function(t,e,o){const n=e.properties.id===t.polygon.id;if(e.properties.active=n?y.ACTIVE:y.INACTIVE,!n)return o(e);if(0===e.geometry.coordinates.length)return;const r=e.geometry.coordinates[0].length;if(!(r<3)){if(e.properties.meta=m.FEATURE,o(Pt(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1)),r>3){const n=e.geometry.coordinates[0].length-3;o(Pt(t.polygon.id,e.geometry.coordinates[0][n],`0.${n}`,!1))}if(r<=4){const t=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(o({type:p.FEATURE,properties:e.properties,geometry:{coordinates:t,type:p.LINE_STRING}}),3===r)return}return o(e)}},zt.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(h.SIMPLE_SELECT)};const Qt=zt,te={onSetup:function(t){const e=(t=t||{}).featureId;let o,n,r="forward";if(e){if(o=this.getFeature(e),!o)throw new Error("Could not find a feature with the provided featureId");let i=t.from;if(i&&"Feature"===i.type&&i.geometry&&"Point"===i.geometry.type&&(i=i.geometry),i&&"Point"===i.type&&i.coordinates&&2===i.coordinates.length&&(i=i.coordinates),!i||!Array.isArray(i))throw new Error("Please use the `from` property to indicate which point to continue the line from");const s=o.coordinates.length-1;if(o.coordinates[s][0]===i[0]&&o.coordinates[s][1]===i[1])n=s+1,o.addCoordinate(n,...o.coordinates[s]);else{if(o.coordinates[0][0]!==i[0]||o.coordinates[0][1]!==i[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");r="backwards",n=0,o.addCoordinate(n,...o.coordinates[0])}}else o=this.newFeature({type:p.FEATURE,properties:{},geometry:{type:p.LINE_STRING,coordinates:[]}}),n=0,this.addFeature(o);return this.clearSelectedFeatures(),Rt.disable(this),this.updateUIClasses({mouse:l.ADD}),this.activateUIButton(d.LINE),this.setActionableState({trash:!0}),{line:o,currentVertexPosition:n,direction:r}},clickAnywhere:function(t,e){if(t.currentVertexPosition>0&&Kt(e,t.line.coordinates[t.currentVertexPosition-1])||"backwards"===t.direction&&Kt(e,t.line.coordinates[t.currentVertexPosition+1]))return this.changeMode(h.SIMPLE_SELECT,{featureIds:[t.line.id]});this.updateUIClasses({mouse:l.ADD}),t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),"forward"===t.direction?(t.currentVertexPosition++,t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)):t.line.addCoordinate(0,e.lngLat.lng,e.lngLat.lat)},clickOnVertex:function(t){return this.changeMode(h.SIMPLE_SELECT,{featureIds:[t.line.id]})},onMouseMove:function(t,e){t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),St(e)&&this.updateUIClasses({mouse:l.POINTER})}};te.onTap=te.onClick=function(t,e){if(St(e))return this.clickOnVertex(t,e);this.clickAnywhere(t,e)},te.onKeyUp=function(t,e){Lt(e)?this.changeMode(h.SIMPLE_SELECT,{featureIds:[t.line.id]}):Mt(e)&&(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(h.SIMPLE_SELECT))},te.onStop=function(t){Rt.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.line.id)&&(t.line.removeCoordinate(`${t.currentVertexPosition}`),t.line.isValid()?this.fire(f.CREATE,{features:[t.line.toGeoJSON()]}):(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(h.SIMPLE_SELECT,{},{silent:!0})))},te.onTrash=function(t){this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(h.SIMPLE_SELECT)},te.toDisplayFeatures=function(t,e,o){const n=e.properties.id===t.line.id;if(e.properties.active=n?y.ACTIVE:y.INACTIVE,!n)return o(e);e.geometry.coordinates.length<2||(e.properties.meta=m.FEATURE,o(Pt(t.line.id,e.geometry.coordinates["forward"===t.direction?e.geometry.coordinates.length-2:1],""+("forward"===t.direction?e.geometry.coordinates.length-2:1),!1)),o(e))};const ee={simple_select:$t,direct_select:qt,draw_point:Wt,draw_polygon:Qt,draw_line_string:te},oe={defaultMode:h.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:yt,modes:ee,controls:{},userProperties:!1,suppressAPIEvents:!0},ne={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},re={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function ie(t,e){return t.map((t=>t.source?t:Object.assign({},t,{id:`${t.id}.${e}`,source:"hot"===e?u.HOT:u.COLD})))}var se=o(2017),ae=o(8186);function ce(t,e){return t.length===e.length&&JSON.stringify(t.map((t=>t)).sort())===JSON.stringify(e.map((t=>t)).sort())}const ue={Polygon:z,LineString:W,Point:q,MultiPolygon:ot,MultiLineString:ot,MultiPoint:ot};const le=function(t,e){const o={options:t=function(t={}){let e=Object.assign({},t);return t.controls||(e.controls={}),!1===t.displayControlsDefault?e.controls=Object.assign({},re,t.controls):e.controls=Object.assign({},ne,t.controls),e=Object.assign({},oe,e),e.styles=ie(e.styles,"cold").concat(ie(e.styles,"hot")),e}(t)};e=function(t,e){e.modes=h;const o=void 0===t.options.suppressAPIEvents||!!t.options.suppressAPIEvents;return e.getFeatureIdsAt=function(e){return A.click({point:e},null,t).map((t=>t.properties.id))},e.getSelectedIds=function(){return t.store.getSelectedIds()},e.getSelected=function(){return{type:p.FEATURE_COLLECTION,features:t.store.getSelectedIds().map((e=>t.store.get(e))).map((t=>t.toGeoJSON()))}},e.getSelectedPoints=function(){return{type:p.FEATURE_COLLECTION,features:t.store.getSelectedCoordinates().map((t=>({type:p.FEATURE,properties:{},geometry:{type:p.POINT,coordinates:t.coordinates}})))}},e.set=function(o){if(void 0===o.type||o.type!==p.FEATURE_COLLECTION||!Array.isArray(o.features))throw new Error("Invalid FeatureCollection");const n=t.store.createRenderBatch();let r=t.store.getAllIds().slice();const i=e.add(o),s=new x(i);return r=r.filter((t=>!s.has(t))),r.length&&e.delete(r),n(),i},e.add=function(e){const n=JSON.parse(JSON.stringify(ae(e))).features.map((e=>{if(e.id=e.id||$(),null===e.geometry)throw new Error("Invalid geometry: null");if(void 0===t.store.get(e.id)||t.store.get(e.id).type!==e.geometry.type){const n=ue[e.geometry.type];if(void 0===n)throw new Error(`Invalid geometry type: ${e.geometry.type}.`);const r=new n(t,e);t.store.add(r,{silent:o})}else{const n=t.store.get(e.id),r=n.properties;n.properties=e.properties,se(r,e.properties)||t.store.featureChanged(n.id,{silent:o}),se(n.getCoordinates(),e.geometry.coordinates)||n.incomingCoords(e.geometry.coordinates)}return e.id}));return t.store.render(),n},e.get=function(e){const o=t.store.get(e);if(o)return o.toGeoJSON()},e.getAll=function(){return{type:p.FEATURE_COLLECTION,features:t.store.getAll().map((t=>t.toGeoJSON()))}},e.delete=function(n){return t.store.delete(n,{silent:o}),e.getMode()!==h.DIRECT_SELECT||t.store.getSelectedIds().length?t.store.render():t.events.changeMode(h.SIMPLE_SELECT,void 0,{silent:o}),e},e.deleteAll=function(){return t.store.delete(t.store.getAllIds(),{silent:o}),e.getMode()===h.DIRECT_SELECT?t.events.changeMode(h.SIMPLE_SELECT,void 0,{silent:o}):t.store.render(),e},e.changeMode=function(n,r={}){return n===h.SIMPLE_SELECT&&e.getMode()===h.SIMPLE_SELECT?(ce(r.featureIds||[],t.store.getSelectedIds())||(t.store.setSelected(r.featureIds,{silent:o}),t.store.render()),e):(n===h.DIRECT_SELECT&&e.getMode()===h.DIRECT_SELECT&&r.featureId===t.store.getSelectedIds()[0]||t.events.changeMode(n,r,{silent:o}),e)},e.getMode=function(){return t.events.getMode()},e.trash=function(){return t.events.trash({silent:o}),e},e.combineFeatures=function(){return t.events.combineFeatures({silent:o}),e},e.uncombineFeatures=function(){return t.events.uncombineFeatures({silent:o}),e},e.setFeatureProperty=function(n,r,i){return t.store.setFeatureProperty(n,r,i,{silent:o}),e},e}(o,e),o.api=e;const n=ht(o);return e.onAdd=n.onAdd,e.onRemove=n.onRemove,e.types=d,e.options=t,e};function de(t){le(t,this)}de.modes=ee,de.constants=n,de.lib=i;const pe=de},999:(t,e,o)=>{"use strict";o.d(e,{A:()=>i});var n=o(2820),r=6378137;function i(t){return(0,n.jE)(t,(function(t,e){return t+function(t){var e,o=0;switch(t.type){case"Polygon":return s(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)o+=s(t.coordinates[e]);return o;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)}),0)}function s(t){var e=0;if(t&&t.length>0){e+=Math.abs(a(t[0]));for(var o=1;o<t.length;o++)e-=Math.abs(a(t[o]))}return e}function a(t){var e,o,n,i,s,a,u=0,l=t.length;if(l>2){for(a=0;a<l;a++)a===l-2?(n=l-2,i=l-1,s=0):a===l-1?(n=l-1,i=0,s=1):(n=a,i=a+1,s=a+2),e=t[n],o=t[i],u+=(c(t[s][0])-c(e[0]))*Math.sin(c(o[1]));u=u*r*r/2}return u}function c(t){return t*Math.PI/180}}}]);