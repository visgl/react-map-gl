!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("point-geometry"),require("react"),require("assert"),require("viewport-mercator-project"),require("immutable"),require("mapbox-gl"),require("earcut"),require("react-addons-shallow-compare"),require("base64-js"),require("bowser"),require("canvas-composite-types"),require("d3-array"),require("d3-geo"),require("d3-scale"),require("d3-selection"),require("gl-matrix"),require("ieee754"),require("isarray"),require("min-document"),require("quickselect"),require("svg-transform"),require("tinyqueue"),require("unitbezier"),require("whoots-js")):"function"==typeof define&&define.amd?define(["point-geometry","react","assert","viewport-mercator-project","immutable","mapbox-gl","earcut","react-addons-shallow-compare","base64-js","bowser","canvas-composite-types","d3-array","d3-geo","d3-scale","d3-selection","gl-matrix","ieee754","isarray","min-document","quickselect","svg-transform","tinyqueue","unitbezier","whoots-js"],e):"object"==typeof exports?exports["react-map-gl"]=e(require("point-geometry"),require("react"),require("assert"),require("viewport-mercator-project"),require("immutable"),require("mapbox-gl"),require("earcut"),require("react-addons-shallow-compare"),require("base64-js"),require("bowser"),require("canvas-composite-types"),require("d3-array"),require("d3-geo"),require("d3-scale"),require("d3-selection"),require("gl-matrix"),require("ieee754"),require("isarray"),require("min-document"),require("quickselect"),require("svg-transform"),require("tinyqueue"),require("unitbezier"),require("whoots-js")):t["react-map-gl"]=e(t["point-geometry"],t.react,t.assert,t["viewport-mercator-project"],t.immutable,t["mapbox-gl"],t.earcut,t["react-addons-shallow-compare"],t["base64-js"],t.bowser,t["canvas-composite-types"],t["d3-array"],t["d3-geo"],t["d3-scale"],t["d3-selection"],t["gl-matrix"],t.ieee754,t.isarray,t["min-document"],t.quickselect,t["svg-transform"],t.tinyqueue,t.unitbezier,t["whoots-js"])}(this,function(t,e,r,n,i,o,a,s,u,h,p,l,c,f,y,d,g,m,v,x,b,w,_,P){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.i=function(t){return t},e.d=function(exports,t,r){e.o(exports,t)||Object.defineProperty(exports,t,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=74)}([function(t,exports,e){"use strict";var r=e(72),n=e(10);exports.easeCubicInOut=function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,r=e*t;return 4*(t<.5?r:3*(t-e)+r-.75)},exports.bezier=function(t,e,n,i){var o=new r(t,e,n,i);return function(t){return o.solve(t)}},exports.ease=exports.bezier(.25,.1,.25,1),exports.clamp=function(t,e,r){return Math.min(r,Math.max(e,t))},exports.wrap=function(t,e,r){var n=r-e,i=((t-e)%n+n)%n+e;return i===e?r:i},exports.coalesce=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t];if(null!==e&&void 0!==e)return e}},exports.asyncAll=function(t,e,r){if(!t.length)return r(null,[]);var n=t.length,i=new Array(t.length),o=null;t.forEach(function(t,a){e(t,function(t,e){t&&(o=t),i[a]=e,0===--n&&r(o,i)})})},exports.keysDifference=function(t,e){var r=[];for(var n in t)n in e||r.push(n);return r},exports.extend=function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t},exports.extendAll=function(t,e){for(var r in e)Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r));return t},exports.inherit=function(t,e){var r="function"==typeof t?t.prototype:t,n=Object.create(r);return exports.extendAll(n,e),n},exports.pick=function(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n];i in t&&(r[i]=t[i])}return r};var i=1;exports.uniqueId=function(){return i++},exports.debounce=function(t,e){var r,n;return function(){n=arguments,clearTimeout(r),r=setTimeout(function(){t.apply(null,n)},e)}},exports.bindAll=function(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})},exports.bindHandlers=function(t){for(var e in t)"function"==typeof t[e]&&0===e.indexOf("_on")&&(t[e]=t[e].bind(t))},exports.setOptions=function(t,e){t.hasOwnProperty("options")||(t.options=t.options?Object.create(t.options):{});for(var r in e)t.options[r]=e[r];return t.options},exports.getCoordinatesCenter=function(t){for(var e=1/0,r=1/0,i=-(1/0),o=-(1/0),a=0;a<t.length;a++)e=Math.min(e,t[a].column),r=Math.min(r,t[a].row),i=Math.max(i,t[a].column),o=Math.max(o,t[a].row);var s=i-e,u=o-r,h=Math.max(s,u);return new n((e+i)/2,(r+o)/2,0).zoomTo(Math.floor(-Math.log(h)/Math.LN2))},exports.endsWith=function(t,e){return t.indexOf(e,t.length-e.length)!==-1},exports.startsWith=function(t,e){return 0===t.indexOf(e)},exports.mapObject=function(t,e,r){var n={};for(var i in t)n[i]=e.call(r||this,t[i],i,t);return n},exports.filterObject=function(t,e,r){var n={};for(var i in t)e.call(r||this,t[i],i,t)&&(n[i]=t[i]);return n},exports.deepEqual=function(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!exports.deepEqual(t[r],e[r]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;var n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(var i in t)if(!exports.deepEqual(t[i],e[i]))return!1;return!0}return t===e},exports.clone=function(t){return Array.isArray(t)?t.map(exports.clone):"object"==typeof t?exports.mapObject(t,exports.clone):t},exports.arraysIntersect=function(t,e){for(var r=0;r<t.length;r++)if(e.indexOf(t[r])>=0)return!0;return!1};var o={};exports.warnOnce=function(t){o[t]||("undefined"!=typeof console,o[t]=!0)},exports.isCounterClockwise=function(t,e,r){return(r.y-t.y)*(e.x-t.x)>(e.y-t.y)*(r.x-t.x)},exports.calculateSignedArea=function(t){for(var e,r,n=0,i=0,o=t.length,a=o-1;i<o;a=i++)e=t[i],r=t[a],n+=(r.x-e.x)*(e.y+r.y);return n},exports.isClosedPolygon=function(t){if(t.length<4)return!1;var e=t[0],r=t[t.length-1];return!(Math.abs(e.x-r.x)>0||Math.abs(e.y-r.y)>0)&&Math.abs(exports.calculateSignedArea(t))>.01},exports.sphericalToCartesian=function(t){var e=t[0],r=t[1],n=t[2];return r+=90,r*=Math.PI/180,n*=Math.PI/180,[e*Math.cos(r)*Math.sin(n),e*Math.sin(r)*Math.sin(n),e*Math.cos(n)]}},function(e,exports){e.exports=t},function(t,exports){t.exports=e},function(t,exports,e){"use strict";function r(t){if(this.zoom=t.zoom,this.overscaling=t.overscaling,this.layer=t.layer,this.childLayers=t.childLayers,this.type=this.layer.type,this.features=[],this.id=this.layer.id,this.index=t.index,this.sourceLayer=this.layer.sourceLayer,this.sourceLayerIndex=t.sourceLayerIndex,this.minZoom=this.layer.minzoom,this.maxZoom=this.layer.maxzoom,this.paintAttributes=n(this),t.arrays){var e=this.programInterfaces;this.bufferGroups=u.mapObject(t.arrays,function(r,n){var i=e[n],o=t.paintVertexArrayTypes[n];return r.map(function(t){return new s(t,{layoutVertexArrayType:i.layoutVertexArrayType.serialize(),elementArrayType:i.elementArrayType&&i.elementArrayType.serialize(),elementArrayType2:i.elementArrayType2&&i.elementArrayType2.serialize(),paintVertexArrayTypes:o})})})}}function n(t){var e={};for(var r in t.programInterfaces){for(var n=e[r]={},a=0;a<t.childLayers.length;a++){var s=t.childLayers[a];n[s.id]={attributes:[],uniforms:[],defines:[],vertexPragmas:{define:{},initialize:{}},fragmentPragmas:{define:{},initialize:{}}}}var h=t.programInterfaces[r];if(h.paintAttributes)for(var l="{precision}",c="{type}",f=0;f<h.paintAttributes.length;f++){var y=h.paintAttributes[f];y.multiplier=y.multiplier||1;for(var d=0;d<t.childLayers.length;d++){var g=t.childLayers[d],m=n[g.id],v=y.name;p("a_"===y.name.slice(0,2));var x,b=y.name.slice(2);if(m.fragmentPragmas.initialize[b]="",g.isPaintValueFeatureConstant(y.paintProperty))m.uniforms.push(y),m.fragmentPragmas.define[b]=m.vertexPragmas.define[b]=["uniform",l,c,v].join(" ")+";",m.fragmentPragmas.initialize[b]=m.vertexPragmas.initialize[b]=[l,c,b,"=",v].join(" ")+";\n";else if(g.isPaintValueZoomConstant(y.paintProperty)){m.attributes.push(u.extend({},y,{name:v})),x=["varying",l,c,b].join(" ")+";\n";var w=[m.fragmentPragmas.define[b],"attribute",l,c,v].join(" ")+";\n";m.fragmentPragmas.define[b]=x,m.vertexPragmas.define[b]=x+w,m.vertexPragmas.initialize[b]=[b,"=",v,"/",y.multiplier.toFixed(1)].join(" ")+";\n"}else{for(var _="u_"+v.slice(2)+"_t",P=g.getPaintValueStopZoomLevels(y.paintProperty),A=0;A<P.length&&P[A]<t.zoom;)A++;for(var T=Math.max(0,Math.min(P.length-4,A-2)),M=[],E=0;E<4;E++)M.push(P[Math.min(T+E,P.length-1)]);x=["varying",l,c,b].join(" ")+";\n",m.vertexPragmas.define[b]=x+["uniform","lowp","float",_].join(" ")+";\n",m.fragmentPragmas.define[b]=x,m.uniforms.push(u.extend({},y,{name:_,getValue:o(y,T),components:1}));var S=y.components;if(1===S)m.attributes.push(u.extend({},y,{getValue:i(y,M),isFunction:!0,components:4*S})),m.vertexPragmas.define[b]+=["attribute",l,"vec4",v].join(" ")+";\n",m.vertexPragmas.initialize[b]=[b,"=","evaluate_zoom_function_1("+v+", "+_+")","/",y.multiplier.toFixed(1)].join(" ")+";\n";else{for(var R=[],I=0;I<4;I++)R.push(v+I),m.attributes.push(u.extend({},y,{getValue:i(y,[M[I]]),isFunction:!0,name:v+I})),m.vertexPragmas.define[b]+=["attribute",l,c,v+I].join(" ")+";\n";m.vertexPragmas.initialize[b]=[b," = ","evaluate_zoom_function_4("+R.join(", ")+", "+_+")","/",y.multiplier.toFixed(1)].join(" ")+";\n"}}}}}return e}function i(t,e){return function(r,n,i){if(1===e.length)return t.getValue(r,u.extend({},n,{zoom:e[0]}),i);for(var o=[],a=0;a<e.length;a++){var s=e[a];o.push(t.getValue(r,u.extend({},n,{zoom:s}),i)[0])}return o}}function o(t,e){return function(r,n){var i=r.getPaintInterpolationT(t.paintProperty,n.zoom);return[Math.max(0,Math.min(4,i-e))]}}var a=e(35),s=e(42),u=e(0),h=e(57),p=e(4);t.exports=r,r.create=function(t){var r={fill:e(37),fillextrusion:e(38),line:e(39),circle:e(36),symbol:e(40)},n=t.layer.type;return"fill"!==n||t.layer.isPaintValueFeatureConstant("fill-extrude-height")&&t.layer.isPaintValueZoomConstant("fill-extrude-height")&&0===t.layer.getPaintValue("fill-extrude-height")||(n="fillextrusion"),new r[n](t)},r.EXTENT=8192,r.prototype.populateArrays=function(){this.createArrays(),this.recalculateStyleLayers();for(var t=0;t<this.features.length;t++)this.addFeature(this.features[t]);this.trimArrays()},r.prototype.prepareArrayGroup=function(t,e){var r=this.arrayGroups[t],n=r.length&&r[r.length-1];return n&&n.hasCapacityFor(e)||(n=new a({layoutVertexArrayType:this.programInterfaces[t].layoutVertexArrayType,elementArrayType:this.programInterfaces[t].elementArrayType,elementArrayType2:this.programInterfaces[t].elementArrayType2,paintVertexArrayTypes:this.paintVertexArrayTypes[t]}),n.index=r.length,r.push(n)),n},r.prototype.createArrays=function(){this.arrayGroups={},this.paintVertexArrayTypes={};for(var t in this.programInterfaces){this.arrayGroups[t]=[];var e=this.paintVertexArrayTypes[t]={},n=this.paintAttributes[t];for(var i in n)e[i]=new r.VertexArrayType(n[i].attributes)}},r.prototype.destroy=function(){for(var t in this.bufferGroups)for(var e=this.bufferGroups[t],r=0;r<e.length;r++)e[r].destroy()},r.prototype.trimArrays=function(){for(var t in this.arrayGroups)for(var e=this.arrayGroups[t],r=0;r<e.length;r++)e[r].trim()},r.prototype.isEmpty=function(){for(var t in this.arrayGroups)for(var e=this.arrayGroups[t],r=0;r<e.length;r++)if(!e[r].isEmpty())return!1;return!0},r.prototype.getTransferables=function(t){for(var e in this.arrayGroups)for(var r=this.arrayGroups[e],n=0;n<r.length;n++)r[n].getTransferables(t)},r.prototype.setUniforms=function(t,e,r,n,i){for(var o=this.paintAttributes[e][n.id].uniforms,a=0;a<o.length;a++){var s=o[a],u=r[s.name];t["uniform"+s.components+"fv"](u,s.getValue(n,i))}},r.prototype.serialize=function(){return{layerId:this.layer.id,zoom:this.zoom,arrays:u.mapObject(this.arrayGroups,function(t){return t.map(function(t){return t.serialize()})}),paintVertexArrayTypes:u.mapObject(this.paintVertexArrayTypes,function(t){return u.mapObject(t,function(t){return t.serialize()})}),childLayerIds:this.childLayers.map(function(t){return t.id})}};var l={lastIntegerZoom:1/0,lastIntegerZoomTime:0,lastZoom:0};r.prototype.recalculateStyleLayers=function(){for(var t=0;t<this.childLayers.length;t++)this.childLayers[t].recalculate(this.zoom,l)},r.prototype.populatePaintArrays=function(t,e,r,n,i){for(var o=0;o<this.childLayers.length;o++)for(var a=this.childLayers[o],s=this.arrayGroups[t],u=n.index;u<s.length;u++){var h=s[u],p=h.layoutVertexArray.length,l=h.paintVertexArrays[a.id];l.resize(p);for(var c=this.paintAttributes[t][a.id].attributes,f=0;f<c.length;f++)for(var y=c[f],d=y.getValue(a,e,r),g=y.multiplier||1,m=y.components||1,v=u===n.index?i:0,x=v;x<p;x++)for(var b=l.get(x),w=0;w<m;w++){var _=m>1?y.name+w:y.name;b[_]=d[w]*g}}},r.VertexArrayType=function(t){return new h({members:t,alignment:4})},r.ElementArrayType=function(t){return new h({members:[{type:"Uint16",name:"vertices",components:t||3}]})}},function(t,exports){t.exports=r},function(t,exports){t.exports=n},function(t,exports,e){"use strict";function r(t){return{min:-1*Math.pow(2,t-1),max:Math.pow(2,t-1)-1}}var n=e(0),i=e(3).EXTENT,o=e(4),a={15:r(15),16:r(16)};t.exports=function(t,e){var r=a[e||16];o(r);for(var s=i/t.extent,u=t.loadGeometry(),h=0;h<u.length;h++)for(var p=u[h],l=0;l<p.length;l++){var c=p[l];c.x=Math.round(c.x*s),c.y=Math.round(c.y*s),(c.x<r.min||c.x>r.max||c.y<r.min||c.y>r.max)&&n.warnOnce("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return u}},function(t,exports){t.exports=i},function(t,exports,e){(function(e){"undefined"!=typeof window?t.exports=window:"undefined"!=typeof e?t.exports=e:"undefined"!=typeof self?t.exports=self:t.exports={}}).call(exports,e(12))},function(t,exports,e){"use strict";function r(t){for(var e=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(e),n=0,i=r;n<i.length;n+=1){var o=i[n];"function"==typeof t[o]&&(t[o]=t[o].bind(t))}}exports.a=r},function(t,exports,e){"use strict";function r(t,e,r){this.column=t,this.row=e,this.zoom=r}t.exports=r,r.prototype={clone:function(){return new r(this.column,this.row,this.zoom)},zoomTo:function(t){return this.clone()._zoomTo(t)},sub:function(t){return this.clone()._sub(t)},_zoomTo:function(t){var e=Math.pow(2,t-this.zoom);return this.column*=e,this.row*=e,this.zoom=t,this},_sub:function(t){return t=t.zoomTo(this.zoom),this.column-=t.column,this.row-=t.row,this}}},function(t,exports,e){"use strict";function r(t,e){return e.area-t.area}var n=e(69),i=e(0).calculateSignedArea;t.exports=function(t,e){var o=t.length;if(o<=1)return[t];for(var a,s,u=[],h=0;h<o;h++){var p=i(t[h]);0!==p&&(t[h].area=Math.abs(p),void 0===s&&(s=p<0),s===p<0?(a&&u.push(a),a=[t[h]]):a.push(t[h]))}if(a&&u.push(a),e>1)for(var l=0;l<u.length;l++)u[l].length<=e||(n(u[l],e,1,u[l].length-1,r),u[l]=u[l].slice(0,e));return u}},function(t,exports){var e;e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,exports){t.exports=o},function(t,exports,e){"use strict";var r=e(59),n=e.n(r),i=n.a.webkit||n.a.blink?"-webkit-":n.a.gecko?"-moz-":"";exports.a={DEFAULTS:{},MAPBOX_API_ACCESS_TOKEN:null,CURSOR:{GRABBING:i+"grabbing",GRAB:i+"grab",POINTER:"pointer"}}},function(t,exports,e){"use strict";function r(t,e){var r=t%e;return r<0?e+r:r}function n(t,e){return t.pointLocation(s.Point.convert(e))}function i(t){var e=new a.a(t._minZoom,t._maxZoom);return e.latRange=t.latRange,e.width=t.width,e.height=t.height,e.zoom=t.zoom,e.center=t.center,e.angle=t.angle,e.altitude=t.altitude,e.pitch=t.pitch,e.bearing=t.bearing,e.altitude=t.altitude,e}var o=e(44),a=e.n(o);e.d(exports,"a",function(){return a.a});var s=e(13);e.n(s);exports.b=r,exports.c=n,exports.d=i},function(t,exports,e){(function(r){var n="undefined"!=typeof r?r:"undefined"!=typeof window?window:{},i=e(68);if("undefined"!=typeof document)t.exports=document;else{var o=n["__GLOBAL_DOCUMENT_CACHE@4"];o||(o=n["__GLOBAL_DOCUMENT_CACHE@4"]=i),t.exports=o}}).call(exports,e(12))},function(t,exports,e){"use strict";function r(t,e,r,n){this.x=t,this.y=e,this.angle=r,void 0!==n&&(this.segment=n)}var n=e(1);t.exports=r,r.prototype=Object.create(n.prototype),r.prototype.clone=function(){return new r(this.x,this.y,this.angle,this.segment)}},function(t,exports,e){"use strict";function r(t,e,r){return t*(1-r)+e*r}t.exports=r,r.number=r,r.vec2=function(t,e,n){return[r(t[0],e[0],n),r(t[1],e[1],n)]},r.color=function(t,e,n){return[r(t[0],e[0],n),r(t[1],e[1],n),r(t[2],e[2],n),r(t[3],e[3],n)]},r.array=function(t,e,n){return t.map(function(t,i){return r(t,e[i],n)})}},function(t,exports,e){"use strict";function r(t,e){return e.replace(/{([^{}]+)}/g,function(e,r){return r in t?t[r]:""})}t.exports=r},function(t,exports){t.exports=a},function(t,exports){t.exports=s},function(t,exports,e){"use strict";function r(){}var n=e(2),i=e.n(n),o=e(9),a=e(21),s=e.n(a),u=e(13),h=e.n(u),p=e(64),l=(e.n(p),e(7)),c=e.n(l),f=e(4),y=e.n(f),d=e(25),g=e(14),m=e(33),v=e(32),x=e(15),b=60,w=20,_=1.2,P={latitude:n.PropTypes.number.isRequired,longitude:n.PropTypes.number.isRequired,zoom:n.PropTypes.number.isRequired,mapStyle:n.PropTypes.oneOfType([n.PropTypes.string,n.PropTypes.instanceOf(c.a.Map)]),mapboxApiAccessToken:n.PropTypes.string,onChangeViewport:n.PropTypes.func,width:n.PropTypes.number.isRequired,height:n.PropTypes.number.isRequired,isDragging:n.PropTypes.bool,startDragLngLat:n.PropTypes.array,onHoverFeatures:n.PropTypes.func,ignoreEmptyFeatures:n.PropTypes.bool,attributionControl:n.PropTypes.bool,onClick:n.PropTypes.func,onClickFeatures:n.PropTypes.func,clickRadius:n.PropTypes.number,preserveDrawingBuffer:n.PropTypes.bool,preventStyleDiffing:n.PropTypes.bool,perspectiveEnabled:n.PropTypes.bool,bearing:i.a.PropTypes.number,pitch:i.a.PropTypes.number,altitude:i.a.PropTypes.number},A={mapStyle:"mapbox://styles/mapbox/light-v8",onChangeViewport:null,mapboxApiAccessToken:g.a.DEFAULTS.MAPBOX_API_ACCESS_TOKEN,preserveDrawingBuffer:!1,attributionControl:!0,ignoreEmptyFeatures:!0,bearing:0,pitch:0,altitude:1.5,clickRadius:15},T=function(t){function n(n){t.call(this,n),this.state={isSupported:h.a.supported(),isDragging:!1,isHovering:!1,startDragLngLat:null,startBearing:null,startPitch:null},this._queryParams={},h.a.accessToken=n.mapboxApiAccessToken,this.state.isSupported||(this.componentDidMount=r,this.componentWillReceiveProps=r,this.componentDidUpdate=r),e.i(o.a)(this)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.supported=function(){return h.a.supported()},n.prototype.shouldComponentUpdate=function(t,e){return s()(this,t,e)},n.prototype.componentDidMount=function(){var t=c.a.Map.isMap(this.props.mapStyle)?this.props.mapStyle.toJS():this.props.mapStyle,r=new h.a.Map({container:this.refs.mapboxMap,center:[this.props.longitude,this.props.latitude],zoom:this.props.zoom,pitch:this.props.pitch,bearing:this.props.bearing,style:t,interactive:!1,preserveDrawingBuffer:this.props.preserveDrawingBuffer});e.i(p.select)(r.getCanvas()).style("outline","none"),this._map=r,this._updateMapViewport({},this.props),this._callOnChangeViewport(r.transform),this._updateQueryParams(t)},n.prototype.componentWillReceiveProps=function(t){this._updateStateFromProps(this.props,t),this._updateMapViewport(this.props,t),this._updateMapStyle(this.props,t),this.setState({width:this.props.width,height:this.props.height})},n.prototype.componentDidUpdate=function(){this._updateMapSize(this.state,this.props)},n.prototype.componentWillUnmount=function(){this._map&&this._map.remove()},n.prototype._getMap=function(){return this._map},n.prototype._getCursor=function(){var t=this.props.onChangeViewport||this.props.onClickFeature||this.props.onHoverFeatures;return t?this.props.isDragging?g.a.CURSOR.GRABBING:this.state.isHovering?g.a.CURSOR.POINTER:g.a.CURSOR.GRAB:"inherit"},n.prototype._updateStateFromProps=function(t,e){h.a.accessToken=e.mapboxApiAccessToken;var r=e.startDragLngLat;this.setState({startDragLngLat:r&&r.slice()})},n.prototype._updateQueryParams=function(t){var r=e.i(m.a)(t);this._queryParams=0===r.length?{}:{layers:r}},n.prototype._updateSource=function(t,e){var r=e.source.toJS();if("geojson"===r.type){var n=t.getSource(e.id);if("geojson"===n.type){var i=n.workerOptions;if(!(void 0!==r.maxzoom&&r.maxzoom!==i.geojsonVtOptions.maxZoom||void 0!==r.buffer&&r.buffer!==i.geojsonVtOptions.buffer||void 0!==r.tolerance&&r.tolerance!==i.geojsonVtOptions.tolerance||void 0!==r.cluster&&r.cluster!==i.cluster||void 0!==r.clusterRadius&&r.clusterRadius!==i.superclusterOptions.radius||void 0!==r.clusterMaxZoom&&r.clusterMaxZoom!==i.superclusterOptions.maxZoom))return void n.setData(r.data)}}t.removeSource(e.id),t.addSource(e.id,r)},n.prototype._setDiffStyle=function(t,r){function n(t){return t.map(function(){return!0}).delete("layers").delete("sources").toJS()}function i(){var e=Object.keys(a),n=Object.keys(s);return e.length!==n.length||!!n.some(function(e){return t.get(e)!==r.get(e)})}var o=this,a=t&&n(t)||{},s=n(r),u=this._map;if(!t||i())return void u.setStyle(r.toJS());var h=e.i(v.a)(t,r),p=h.sourcesDiff,l=h.layersDiff;if(l.updates.some(function(t){return t.layer.get("ref")}))return void u.setStyle(r.toJS());for(var c=0,f=p.enter;c<f.length;c+=1){var y=f[c];u.addSource(y.id,y.source.toJS())}for(var d=0,g=p.update;d<g.length;d+=1){var m=g[d];o._updateSource(u,m)}for(var x=0,b=p.exit;x<b.length;x+=1){var w=b[x];u.removeSource(w.id)}for(var _=0,P=l.exiting;_<P.length;_+=1){var A=P[_];u.style.getLayer(A.id)&&u.removeLayer(A.id)}for(var T=0,M=l.updates;T<M.length;T+=1){var E=M[T];E.enter||u.removeLayer(E.id),u.addLayer(E.layer.toJS(),E.before)}},n.prototype._updateMapStyle=function(t,e){var r=e.mapStyle,n=t.mapStyle;r!==n&&(c.a.Map.isMap(r)?this.props.preventStyleDiffing?this._map.setStyle(r.toJS()):this._setDiffStyle(n,r):this._map.setStyle(r),this._updateQueryParams(r))},n.prototype._updateMapViewport=function(t,e){var r=e.latitude!==t.latitude||e.longitude!==t.longitude||e.zoom!==t.zoom||e.pitch!==t.pitch||e.zoom!==t.bearing||e.altitude!==t.altitude;r&&(this._map.jumpTo({center:[e.longitude,e.latitude],zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.altitude!==t.altitude&&(this._map.transform.altitude=e.altitude))},n.prototype._updateMapSize=function(t,e){var r=t.width!==e.width||t.height!==e.height;r&&(this._map.resize(),this._callOnChangeViewport(this._map.transform))},n.prototype._calculateNewPitchAndBearing=function(t){var e=t.pos,r=t.startPos,n=t.startBearing,i=t.startPitch,o=e[0]-r[0],a=n+180*o/this.props.width,s=i,u=e[1]-r[1];if(u>0){if(Math.abs(this.props.height-r[1])>w){var h=u/(this.props.height-r[1]);s=(1-h)*_*i}}else if(u<0&&r.y>w){var p=1-e[1]/r[1];s=i+p*(b-i)}return{pitch:Math.max(Math.min(s,b),0),bearing:a}},n.prototype._callOnChangeViewport=function(t,r){void 0===r&&(r={}),this.props.onChangeViewport&&this.props.onChangeViewport(Object.assign({},{latitude:t.center.lat,longitude:e.i(x.b)(t.center.lng+180,360)-180,zoom:t.zoom,pitch:t.pitch,bearing:e.i(x.b)(t.bearing+180,360)-180,isDragging:this.props.isDragging,startDragLngLat:this.props.startDragLngLat,startBearing:this.props.startBearing,startPitch:this.props.startPitch},r))},n.prototype._onTouchStart=function(t){this._onMouseDown(t)},n.prototype._onTouchDrag=function(t){this._onMouseDrag(t)},n.prototype._onTouchRotate=function(t){this._onMouseRotate(t)},n.prototype._onTouchEnd=function(t){this._onMouseUp(t)},n.prototype._onTouchTap=function(t){this._onMouseClick(t)},n.prototype._onMouseDown=function(t){var r=t.pos,n=this._map,i=n.transform,o=e.i(x.c)(i,new(Function.prototype.bind.apply(u.Point,[null].concat(r))));this._callOnChangeViewport(i,{isDragging:!0,startDragLngLat:[o.lng,o.lat],startBearing:i.bearing,startPitch:i.pitch})},n.prototype._onMouseDrag=function(t){var r=t.pos;if(this.props.onChangeViewport){y()(this.props.startDragLngLat,"`startDragLngLat` prop is required for mouse drag behavior to calculate where to position the map.");var n=e.i(x.d)(this._map.transform);n.setLocationAtPoint(this.props.startDragLngLat,new(Function.prototype.bind.apply(u.Point,[null].concat(r)))),this._callOnChangeViewport(n,{isDragging:!0})}},n.prototype._onMouseRotate=function(t){var r=t.pos,n=t.startPos;if(this.props.onChangeViewport&&this.props.perspectiveEnabled){var i=this.props,o=i.startBearing,a=i.startPitch;y()("number"==typeof o,"`startBearing` prop is required for mouse rotate behavior"),y()("number"==typeof a,"`startPitch` prop is required for mouse rotate behavior");var s=this._calculateNewPitchAndBearing({pos:r,startPos:n,startBearing:o,startPitch:a}),u=s.pitch,h=s.bearing,p=e.i(x.d)(this._map.transform);p.bearing=h,p.pitch=u,this._callOnChangeViewport(p,{isDragging:!0})}},n.prototype._onMouseMove=function(t){var e=t.pos;if(this.props.onHoverFeatures){var r=this._map.queryRenderedFeatures(new(Function.prototype.bind.apply(u.Point,[null].concat(e))),this._queryParams);!r.length&&this.props.ignoreEmptyFeatures||(this.setState({isHovering:r.length>0}),this.props.onHoverFeatures(r))}},n.prototype._onMouseUp=function(t){this._callOnChangeViewport(this._map.transform,{isDragging:!1,startDragLngLat:null,startBearing:null,startPitch:null})},n.prototype._onMouseClick=function(t){var e=t.pos;if(this.props.onClickFeatures||this.props.onClick){if(this.props.onClick){var r=new(Function.prototype.bind.apply(u.Point,[null].concat(e))),n=this._map.unproject(r);this.props.onClick(n,r)}if(this.props.onClickFeatures){var i=this.props.clickRadius,o=[[e[0]-i,e[1]-i],[e[0]+i,e[1]+i]],a=this._map.queryRenderedFeatures(o,this._queryParams);if(!a.length&&this.props.ignoreEmptyFeatures)return;this.props.onClickFeatures(a)}}},n.prototype._onZoom=function(t){var r=t.pos,n=t.scale,i=new(Function.prototype.bind.apply(u.Point,[null].concat(r))),o=e.i(x.d)(this._map.transform),a=e.i(x.c)(o,i);o.zoom=o.scaleZoom(this._map.transform.scale*n),o.setLocationAtPoint(a,i),this._callOnChangeViewport(o,{isDragging:!0})},n.prototype._onZoomEnd=function(){this._callOnChangeViewport(this._map.transform,{isDragging:!1})},n.prototype.render=function(){var t=this.props,e=t.className,r=t.width,n=t.height,o=t.style,a=Object.assign({},o,{width:r,height:n,cursor:this._getCursor()}),s=[i.a.createElement("div",{key:"map",ref:"mapboxMap",style:a,className:e}),i.a.createElement("div",{key:"overlays",className:"overlays",style:{position:"absolute",left:0,top:0}},this.props.children)];return this.state.isSupported&&this.props.onChangeViewport&&(s=i.a.createElement(d.a,{onMouseDown:this._onMouseDown,onMouseDrag:this._onMouseDrag,onMouseRotate:this._onMouseRotate,onMouseUp:this._onMouseUp,onMouseMove:this._onMouseMove,onMouseClick:this._onMouseClick,onTouchStart:this._onTouchStart,onTouchDrag:this._onTouchDrag,onTouchRotate:this._onTouchRotate,onTouchEnd:this._onTouchEnd,onTouchTap:this._onTouchTap,onZoom:this._onZoom,onZoomEnd:this._onZoomEnd,width:this.props.width,height:this.props.height},s)),i.a.createElement("div",{style:Object.assign({},this.props.style,{width:this.props.width,height:this.props.height,position:"relative"})},s)},n}(n.Component);exports.a=T,T.displayName="MapGL",T.propTypes=P,T.defaultProps=A},function(t,exports,e){"use strict";var r=e(26);e.d(exports,"CanvasOverlay",function(){return r.a}),Object.defineProperty(exports,"__esModule",{value:!0});var n=e(27);e.d(exports,"ChoroplethOverlay",function(){return n.a});var i=e(28);e.d(exports,"DraggablePointsOverlay",function(){return i.a});var o=e(29);e.d(exports,"HTMLOverlay",function(){return o.a});var a=e(30);e.d(exports,"ScatterplotOverlay",function(){return a.a});var s=e(31);e.d(exports,"SVGOverlay",function(){return s.a})},function(t,exports,e){"use strict";function r(t,e,r,o){void 0===o&&(o={});var a=o.padding;void 0===a&&(a=0);var s=new i.LngLatBounds([r[0].reverse(),r[1].reverse()]),u=i.Point.convert([0,0]),h=new n.a;h.width=t,h.height=e;var p=h.project(s.getNorthWest()),l=h.project(s.getSouthEast()),c=l.sub(p),f=(h.width-2*a-2*Math.abs(u.x))/c.x,y=(h.height-2*a-2*Math.abs(u.y))/c.y,d=h.unproject(p.add(l).div(2)),g=h.scaleZoom(h.scale*Math.abs(Math.min(f,y)));return{latitude:d.lat,longitude:d.lng,zoom:g}}var n=e(15),i=e(13);e.n(i);exports.a=r},function(t,exports,e){"use strict";function r(){}function n(t,e){var r=t.getBoundingClientRect();return e=e.touches?e.touches[0]:e,[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}function i(t,e){for(var r=[],n=t.getBoundingClientRect(),i=0;i<e.touches.length;i++)r.push([e.touches[i].clientX-n.left-t.clientLeft,e.touches[i].clientY-n.top-t.clientTop]);return r}function o(t){var e=t.reduce(function(t,e){return[t[0]+e[0],t[1]+e[1]]},[0,0]);return[e[0]/t.length,e[1]/t.length]}var a=e(2),s=e.n(a),u=e(9),h=e(21),p=e.n(h),l=e(16),c=e.n(l),f=e(8),y=e.n(f),d="undefined"!=typeof y.a.navigator?y.a.navigator.userAgent.toLowerCase():"",g=d.indexOf("firefox")!==-1,m={width:a.PropTypes.number.isRequired,height:a.PropTypes.number.isRequired,onMouseDown:a.PropTypes.func,onMouseDrag:a.PropTypes.func,onMouseRotate:a.PropTypes.func,onMouseUp:a.PropTypes.func,onMouseMove:a.PropTypes.func,onMouseClick:a.PropTypes.func,onTouchStart:a.PropTypes.func,onTouchDrag:a.PropTypes.func,onTouchRotate:a.PropTypes.func,onTouchEnd:a.PropTypes.func,onTouchTap:a.PropTypes.func,onZoom:a.PropTypes.func,onZoomEnd:a.PropTypes.func},v={onMouseDown:r,onMouseDrag:r,onMouseRotate:r,onMouseUp:r,onMouseMove:r,onMouseClick:r,onTouchStart:r,onTouchDrag:r,onTouchRotate:r,onTouchEnd:r,onTouchTap:r,onZoom:r,onZoomEnd:r},x=function(t){function r(r){t.call(this,r),this.state={didDrag:!1,isFunctionKeyPressed:!1,startPos:null,pos:null,mouseWheelPos:null},e.i(u.a)(this)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.shouldComponentUpdate=function(t,e){return p()(this,t,e)},r.prototype._getMousePos=function(t){var e=this.refs.container;return n(e,t)},r.prototype._getTouchPos=function(t){var e=this.refs.container,r=i(e,t);return o(r)},r.prototype._isFunctionKeyPressed=function(t){return Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)},r.prototype._onMouseDown=function(t){var e=this._getMousePos(t);this.setState({didDrag:!1,startPos:e,pos:e,isFunctionKeyPressed:this._isFunctionKeyPressed(t)}),this.props.onMouseDown({pos:e}),c.a.addEventListener("mousemove",this._onMouseDrag,!1),c.a.addEventListener("mouseup",this._onMouseUp,!1)},r.prototype._onTouchStart=function(t){var e=this._getTouchPos(t);this.setState({didDrag:!1,startPos:e,pos:e,isFunctionKeyPressed:this._isFunctionKeyPressed(t)}),this.props.onTouchStart({pos:e}),c.a.addEventListener("touchmove",this._onTouchDrag,!1),c.a.addEventListener("touchend",this._onTouchEnd,!1)},r.prototype._onMouseDrag=function(t){var e=this._getMousePos(t);if(this.setState({pos:e,didDrag:!0}),this.state.isFunctionKeyPressed){var r=this.state,n=r.startPos;this.props.onMouseRotate({pos:e,startPos:n})}else this.props.onMouseDrag({pos:e})},r.prototype._onTouchDrag=function(t){var e=this._getTouchPos(t);if(this.setState({pos:e,didDrag:!0}),this.state.isFunctionKeyPressed){var r=this.state,n=r.startPos;this.props.onTouchRotate({pos:e,startPos:n})}else this.props.onTouchDrag({pos:e});t.preventDefault()},r.prototype._onMouseUp=function(t){c.a.removeEventListener("mousemove",this._onMouseDrag,!1),c.a.removeEventListener("mouseup",this._onMouseUp,!1);var e=this._getMousePos(t);this.setState({pos:e}),this.props.onMouseUp({pos:e}),this.state.didDrag||this.props.onMouseClick({pos:e})},r.prototype._onTouchEnd=function(t){c.a.removeEventListener("touchmove",this._onTouchDrag,!1),c.a.removeEventListener("touchend",this._onTouchEnd,!1);var e=this._getTouchPos(t);this.setState({pos:e}),this.props.onTouchEnd({pos:e}),this.state.didDrag||this.props.onTouchTap({pos:e})},r.prototype._onMouseMove=function(t){var e=this._getMousePos(t);this.props.onMouseMove({pos:e})},r.prototype._onWheel=function(t){
t.preventDefault();var e=t.deltaY;g&&t.deltaMode===y.a.WheelEvent.DOM_DELTA_PIXEL&&(e/=y.a.devicePixelRatio),t.deltaMode===y.a.WheelEvent.DOM_DELTA_LINE&&(e*=40);var r=this.state.mouseWheelType,n=this.state.mouseWheelTimeout,i=this.state.mouseWheelLastValue,o=this.state.mouseWheelTime,a=(y.a.performance||Date).now(),s=a-(o||0),u=this._getMousePos(t);o=a,0!==e&&e%4.000244140625===0?(r="wheel",e=Math.floor(e/4)):0!==e&&Math.abs(e)<4?r="trackpad":s>400?(r=null,i=e,n=y.a.setTimeout(function(){var t="wheel";this._zoom(-this.state.mouseWheelLastValue,this.state.mouseWheelPos),this.setState({mouseWheelType:t})}.bind(this),40)):this._type||(r=Math.abs(s*e)<200?"trackpad":"wheel",n&&(y.a.clearTimeout(n),n=null,e+=i)),t.shiftKey&&e&&(e/=4),r&&this._zoom(-e,u),this.setState({mouseWheelTime:o,mouseWheelPos:u,mouseWheelType:r,mouseWheelTimeout:n,mouseWheelLastValue:i})},r.prototype._zoom=function(t,e){var r=2/(1+Math.exp(-Math.abs(t/100)));t<0&&0!==r&&(r=1/r),this.props.onZoom({pos:e,scale:r}),y.a.clearTimeout(this._zoomEndTimeout),this._zoomEndTimeout=y.a.setTimeout(function(){this.props.onZoomEnd()}.bind(this),200)},r.prototype.render=function(){return s.a.createElement("div",{ref:"container",onMouseMove:this._onMouseMove,onMouseDown:this._onMouseDown,onTouchStart:this._onTouchStart,onContextMenu:this._onMouseDown,onWheel:this._onWheel,style:{width:this.props.width,height:this.props.height,position:"relative"}},this.props.children)},r}(a.Component);exports.a=x,x.displayName="Interactions",x.propTypes=m,x.defaultProps=v},function(t,exports,e){"use strict";var r=e(2),n=e.n(r),i=e(5),o=e.n(i),a=e(8),s=e.n(a),u={width:r.PropTypes.number.isRequired,height:r.PropTypes.number.isRequired,latitude:r.PropTypes.number.isRequired,longitude:r.PropTypes.number.isRequired,zoom:r.PropTypes.number.isRequired,redraw:r.PropTypes.func.isRequired,isDragging:r.PropTypes.bool.isRequired},h=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.componentDidMount=function(){this._redraw()},e.prototype.componentDidUpdate=function(){this._redraw()},e.prototype._redraw=function(){var t=s.a.devicePixelRatio||1,e=this.refs.overlay,r=e.getContext("2d");r.save(),r.scale(t,t);var n=o()(this.props);this.props.redraw({width:this.props.width,height:this.props.height,ctx:r,project:n.project,unproject:n.unproject,isDragging:this.props.isDragging}),r.restore()},e.prototype.render=function(){var t=s.a.devicePixelRatio||1;return n.a.createElement("canvas",{ref:"overlay",width:this.props.width*t,height:this.props.height*t,style:{width:this.props.width+"px",height:this.props.height+"px",position:"absolute",pointerEvents:"none",left:0,top:0}})},e}(r.Component);exports.a=h,h.propTypes=u},function(t,exports,e){"use strict";var r=e(2),n=e.n(r),i=e(5),o=e.n(i),a=e(8),s=e.n(a),u=e(61),h=(e.n(u),e(63)),p=(e.n(h),e(62)),l=(e.n(p),e(7)),c=e.n(l),f={width:r.PropTypes.number.isRequired,height:r.PropTypes.number.isRequired,latitude:r.PropTypes.number.isRequired,longitude:r.PropTypes.number.isRequired,zoom:r.PropTypes.number.isRequired,isDragging:r.PropTypes.bool.isRequired,renderWhileDragging:r.PropTypes.bool.isRequired,globalOpacity:r.PropTypes.number.isRequired,features:r.PropTypes.instanceOf(c.a.List),colorDomain:r.PropTypes.array,colorRange:r.PropTypes.array.isRequired,valueAccessor:r.PropTypes.func.isRequired},y={renderWhileDragging:!0,globalOpacity:1,colorDomain:null,colorRange:["#FFFFFF","#1FBAD6"],valueAccessor:function(t){return t.get("properties").get("value")}},d=function(t){function r(){t.apply(this,arguments)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.componentDidMount=function(){this._redraw()},r.prototype.componentDidUpdate=function(){this._redraw()},r.prototype._redraw=function(){function t(t,e){var r=a.project([t,e]);this.stream.point(r[0],r[1])}var r=s.a.devicePixelRatio,n=this.refs.overlay,i=n.getContext("2d"),a=o()(this.props);if(i.save(),i.scale(r,r),i.clearRect(0,0,this.props.width,this.props.height),this.props.renderWhileDragging||!this.props.isDragging){var u=e.i(p.geoTransform)({point:t}),h=e.i(p.geoPath)().projection(u).context(i);this._drawFeatures(i,h)}i.restore()},r.prototype._drawFeatures=function(t,r){var n=this,i=this.props,o=i.features;if(o)for(var a=this.props.colorDomain||e.i(u.extent)(o.toArray(),this.props.valueAccessor),s=e.i(h.scaleLinear)().domain(a).range(this.props.colorRange).clamp(!0),p=0,l=o;p<l.length;p+=1){var c=l[p];t.beginPath(),t.strokeStyle="rgba(255, 255, 255, 0.5)",t.lineWidth="1",t.fillStyle=s(n.props.valueAccessor(c));var f=c.get("geometry");r({type:f.get("type"),coordinates:f.get("coordinates").toJS()}),t.fill(),t.stroke()}},r.prototype.render=function(){var t=s.a.devicePixelRatio||1;return n.a.createElement("canvas",{ref:"overlay",width:this.props.width*t,height:this.props.height*t,style:{width:this.props.width+"px",height:this.props.height+"px",position:"absolute",pointerEvents:"none",opacity:this.props.globalOpacity,left:0,top:0}})},r}(r.Component);exports.a=d,d.propTypes=f,d.defaultProps=y},function(t,exports,e){"use strict";function r(){}function n(t,e){var r=t.getBoundingClientRect(),n=e.clientX-r.left-t.clientLeft,i=e.clientY-r.top-t.clientTop;return[n,i]}var i=e(2),o=e.n(i),a=e(9),s=e(7),u=e.n(s),h=e(70),p=e.n(h),l=e(16),c=e.n(l),f=e(14),y=e(5),d=e.n(y),g={width:i.PropTypes.number.isRequired,height:i.PropTypes.number.isRequired,latitude:i.PropTypes.number.isRequired,longitude:i.PropTypes.number.isRequired,zoom:i.PropTypes.number.isRequired,points:i.PropTypes.instanceOf(u.a.List).isRequired,isDragging:i.PropTypes.bool.isRequired,keyAccessor:i.PropTypes.func.isRequired,lngLatAccessor:i.PropTypes.func.isRequired,onAddPoint:i.PropTypes.func.isRequired,onUpdatePoint:i.PropTypes.func.isRequired,renderPoint:i.PropTypes.func.isRequired},m={keyAccessor:function(t){return t.get("id")},lngLatAccessor:function(t){return t.get("location").toArray()},onAddPoint:r,onUpdatePoint:r,renderPoint:r,isDragging:!1},v=function(t){function r(r){t.call(this,r),this.state={draggedPointKey:null},e.i(a.a)(this)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype._onDragStart=function(t,e){e.stopPropagation(),c.a.addEventListener("mousemove",this._onDrag,!1),c.a.addEventListener("mouseup",this._onDragEnd,!1),this.setState({draggedPointKey:this.props.keyAccessor(t)})},r.prototype._onDrag=function(t){t.stopPropagation();var e=n(this.refs.container,t),r=d()(this.props),i=r.unproject(e),o=this.state.draggedPointKey;this.props.onUpdatePoint({key:o,location:i})},r.prototype._onDragEnd=function(t){t.stopPropagation(),c.a.removeEventListener("mousemove",this._onDrag,!1),c.a.removeEventListener("mouseup",this._onDragEnd,!1),this.setState({draggedPoint:null})},r.prototype._addPoint=function(t){t.stopPropagation(),t.preventDefault();var e=n(this.refs.container,t),r=d()(this.props);this.props.onAddPoint(r.unproject(e))},r.prototype.render=function(){var t=this,e=this.props,r=e.points,n=e.width,i=e.height,a=e.isDragging,s=e.style,u=d()(this.props);return o.a.createElement("svg",{ref:"container",width:n,height:i,style:Object.assign({},{pointerEvents:"all",position:"absolute",left:0,top:0,cursor:a?f.a.CURSOR.GRABBING:f.a.CURSOR.GRAB},s),onContextMenu:this._addPoint},o.a.createElement("g",{style:{cursor:"pointer"}},r.map(function(e,r){var n=u.project(t.props.lngLatAccessor(e));return o.a.createElement("g",{key:r,style:{pointerEvents:"all"},transform:p()([{translate:n}]),onMouseDown:t._onDragStart.bind(t,e)},t.props.renderPoint.call(t,e,n))})))},r}(i.Component);exports.a=v,v.propTypes=g,v.defaultProps=m},function(t,exports,e){"use strict";var r=e(2),n=e.n(r),i=e(5),o=e.n(i),a={width:r.PropTypes.number.isRequired,height:r.PropTypes.number.isRequired,redraw:r.PropTypes.func.isRequired,isDragging:r.PropTypes.bool.isRequired},s=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){var t=this.props,e=t.width,r=t.height,i=t.isDragging,a=Object.assign({},{position:"absolute",pointerEvents:"none",left:0,top:0,width:e,height:r},this.props.style),s=o()(this.props),u=s.project,h=s.unproject;return n.a.createElement("div",{ref:"overlay",style:a},this.props.redraw({width:e,height:r,project:u,unproject:h,isDragging:i}))},e}(r.Component);exports.a=s,s.propTypes=a},function(t,exports,e){"use strict";function r(t,e){var r=Math.pow(10,e);return Math.round(t*r)/r}var n=e(2),i=e.n(n),o=e(8),a=e.n(o),s=e(7),u=e.n(s),h=e(60),p=e.n(h),l=e(5),c=e.n(l),f={width:n.PropTypes.number.isRequired,height:n.PropTypes.number.isRequired,latitude:n.PropTypes.number.isRequired,longitude:n.PropTypes.number.isRequired,zoom:n.PropTypes.number.isRequired,isDragging:n.PropTypes.bool.isRequired,locations:n.PropTypes.instanceOf(u.a.List).isRequired,lngLatAccessor:n.PropTypes.func.isRequired,renderWhileDragging:n.PropTypes.bool,globalOpacity:n.PropTypes.number.isRequired,dotRadius:n.PropTypes.number.isRequired,dotFill:n.PropTypes.string.isRequired,compositeOperation:n.PropTypes.oneOf(p.a).isRequired},y={lngLatAccessor:function(t){return[t.get(0),t.get(1)]},renderWhileDragging:!0,dotRadius:4,dotFill:"#1FBAD6",globalOpacity:1,compositeOperation:"source-over"},d=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.componentDidMount=function(){this._redraw()},e.prototype.componentDidUpdate=function(){this._redraw()},e.prototype._redraw=function(){var t=this.props,e=t.width,n=t.height,i=t.dotRadius,o=t.dotFill,s=t.compositeOperation,u=t.renderWhileDragging,h=t.isDragging,p=t.locations,l=t.lngLatAccessor,f=c()(this.props),y=a.a.devicePixelRatio||1,d=this.refs.overlay,g=d.getContext("2d");if(g.save(),g.scale(y,y),g.clearRect(0,0,e,n),g.globalCompositeOperation=s,(u||!h)&&p)for(var m=0,v=p;m<v.length;m+=1){var x=v[m],b=f.project(l(x)),w=[r(b[0],1),r(b[1],1)];w[0]+i>=0&&w[0]-i<e&&w[1]+i>=0&&w[1]-i<n&&(g.fillStyle=o,g.beginPath(),g.arc(w[0],w[1],i,0,2*Math.PI),g.fill())}g.restore()},e.prototype.render=function(){var t=this.props,e=t.width,r=t.height,n=t.globalOpacity,o=a.a.devicePixelRatio||1;return i.a.createElement("canvas",{ref:"overlay",width:e*o,height:r*o,style:{width:e+"px",height:r+"px",position:"absolute",pointerEvents:"none",opacity:n,left:0,top:0}})},e}(n.Component);exports.a=d,d.propTypes=f,d.defaultProps=y},function(t,exports,e){"use strict";var r=e(2),n=e.n(r),i=e(5),o=e.n(i),a={width:r.PropTypes.number.isRequired,height:r.PropTypes.number.isRequired,latitude:r.PropTypes.number.isRequired,longitude:r.PropTypes.number.isRequired,zoom:r.PropTypes.number.isRequired,redraw:r.PropTypes.func.isRequired,isDragging:r.PropTypes.bool.isRequired},s=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){var t=this.props,e=t.width,r=t.height,i=t.isDragging,a=Object.assign({},{pointerEvents:"none",position:"absolute",left:0,top:0},this.props.style),s=o()(this.props),u=s.project,h=s.unproject;return n.a.createElement("svg",{ref:"overlay",width:e,height:r,style:a},this.props.redraw({width:e,height:r,project:u,unproject:h,isDragging:i}))},e}(r.Component);exports.a=s,s.propTypes=a},function(t,exports,e){"use strict";function r(t,e){for(var r=t.get("sources"),n=e.get("sources"),i=[],o=[],a=[],s=r.keySeq().toArray(),u=n.keySeq().toArray(),h=0,p=s;h<p.length;h+=1){var l=p[h],c=n.get(l);c?c.equals(r.get(l))||o.push({id:l,source:n.get(l)}):a.push({id:l,source:r.get(l)})}for(var f=0,y=u;f<y.length;f+=1){var d=y[f],g=r.get(d);g||i.push({id:d,source:n.get(d)})}return{enter:i,update:o,exit:a}}function n(t,e){var r=t.get("layers"),n=e.get("layers"),i=[],o=[],a={},s={};n.forEach(function(t,e){var r=t.get("id"),i=n.get(e+1);s[r]={layer:t,id:r,before:i?i.get("id"):null,enter:!0}}),r.forEach(function(t,e){var n=t.get("id"),i=r.get(e+1);a[n]={layer:t,id:n,before:i?i.get("id"):null},s[n]?s[n].enter=!1:o.push(a[n])});for(var u=0,h=n.reverse();u<h.length;u+=1){var p=h[u],l=p.get("id");a[l]&&a[l].layer.equals(s[l].layer)&&a[l].before===s[l].before||i.push(s[l])}return{updates:i,exiting:o}}function i(t,e){return{sourcesDiff:r(t,e),layersDiff:n(t,e)}}exports.a=i},function(t,exports,e){"use strict";function r(t){var e=[];return n.Map.isMap(t)&&t.has("layers")?e=t.get("layers").filter(function(t){return t.get("interactive")}).map(function(t){return t.get("id")}).toJS():Array.isArray(t.layers)&&(e=t.layers.filter(function(t){return t.interactive}).map(function(t){return t.id})),e}var n=e(7);e.n(n);exports.a=r},function(t,exports,e){"use strict";(function(t){function r(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function n(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(t,e){if(n()<e)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=o.prototype):(null===t&&(t=new o(e)),t.length=e),t}function o(t,e,r){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return a(this,t,e,r)}function a(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?c(t,e,r,n):"string"==typeof e?p(t,e,r):f(t,e)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e,r,n){return s(e),e<=0?i(t,e):void 0!==r?"string"==typeof n?i(t,e).fill(r,n):i(t,e).fill(r):i(t,e)}function h(t,e){if(s(e),t=i(t,e<0?0:0|y(e)),!o.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function p(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!o.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|g(e,r);t=i(t,n);var a=t.write(e,r);return a!==n&&(t=t.slice(0,a)),t}function l(t,e){var r=e.length<0?0:0|y(e.length);t=i(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function c(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),o.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=o.prototype):t=l(t,e),t}function f(t,e){if(o.isBuffer(e)){var r=0|y(e.length);return t=i(t,r),0===t.length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||Q(e.length)?i(t,0):l(t,e);if("Buffer"===e.type&&J(e.data))return l(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(t){if(t>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),o.alloc(+t)}function g(t,e){if(o.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Y(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return X(t).length;default:if(n)return Y(t).length;e=(""+e).toLowerCase(),n=!0}}function m(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return B(this,e,r);case"utf8":case"utf-8":return S(this,e,r);case"ascii":return I(this,e,r);case"latin1":case"binary":return V(this,e,r);case"base64":return E(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function v(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function x(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=o.from(e,n)),o.isBuffer(e))return 0===e.length?-1:b(t,e,r,n,i);if("number"==typeof e)return e&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):b(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,r,n,i){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var a=1,s=t.length,u=e.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,r/=2}var h;if(i){var p=-1;for(h=r;h<s;h++)if(o(t,h)===o(e,p===-1?0:h-p)){if(p===-1&&(p=h),h-p+1===u)return p*a}else p!==-1&&(h-=h-p),p=-1}else for(r+u>s&&(r=s-u),h=r;h>=0;h--){for(var l=!0,c=0;c<u;c++)if(o(t,h+c)!==o(e,c)){l=!1;break}if(l)return h}return-1}function w(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[r+a]=s}return a}function _(t,e,r,n){return W(Y(e,t.length-r),t,r,n)}function P(t,e,r,n){return W(Z(e),t,r,n)}function A(t,e,r,n){return P(t,e,r,n)}function T(t,e,r,n){return W(X(e),t,r,n)}function M(t,e,r,n){return W(G(e,t.length-r),t,r,n)}function E(t,e,r){return 0===e&&r===t.length?H.fromByteArray(t):H.fromByteArray(t.slice(e,r))}function S(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o=t[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=r){var u,h,p,l;switch(s){case 1:o<128&&(a=o);break;case 2:u=t[i+1],128===(192&u)&&(l=(31&o)<<6|63&u,l>127&&(a=l));break;case 3:u=t[i+1],h=t[i+2],128===(192&u)&&128===(192&h)&&(l=(15&o)<<12|(63&u)<<6|63&h,l>2047&&(l<55296||l>57343)&&(a=l));break;case 4:u=t[i+1],h=t[i+2],p=t[i+3],128===(192&u)&&128===(192&h)&&128===(192&p)&&(l=(15&o)<<18|(63&u)<<12|(63&h)<<6|63&p,l>65535&&l<1114112&&(a=l))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=s}return R(n)}function R(t){var e=t.length;if(e<=tt)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=tt));return r}function I(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function V(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function B(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=N(t[o]);return i}function z(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function L(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function C(t,e,r,n,i,a){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function j(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function O(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function D(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function q(t,e,r,n,i){return i||D(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(t,e,r,n,23,4),r+4}function U(t,e,r,n,i){return i||D(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(t,e,r,n,52,8),r+8}function F(t){if(t=k(t).replace(et,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function k(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function N(t){return t<16?"0"+t.toString(16):t.toString(16)}function Y(t,e){e=e||1/0;for(var r,n=t.length,i=null,o=[],a=0;a<n;++a){if(r=t.charCodeAt(a),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function Z(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function G(t,e){for(var r,n,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function X(t){return H.toByteArray(F(t))}function W(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function Q(t){return t!==t}var H=e(58),K=e(66),J=e(67);exports.Buffer=o,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:r(),exports.kMaxLength=n(),o.poolSize=8192,o._augment=function(t){return t.__proto__=o.prototype,t},o.from=function(t,e,r){return a(null,t,e,r)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(t,e,r){return u(null,t,e,r)},o.allocUnsafe=function(t){return h(null,t)},o.allocUnsafeSlow=function(t){return h(null,t)},o.isBuffer=function(t){return!(null==t||!t._isBuffer)},o.compare=function(t,e){if(!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,a=Math.min(r,n);i<a;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!J(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=o.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var a=t[r];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},o.byteLength=g,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},o.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?S(this,0,t):m.apply(this,arguments)},o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",e=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t,e,r,n,i){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;for(var a=i-n,s=r-e,u=Math.min(a,s),h=this.slice(n,i),p=t.slice(e,r),l=0;l<u;++l)if(h[l]!==p[l]){a=h[l],s=p[l];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(t,e,r){return this.indexOf(t,e,r)!==-1},o.prototype.indexOf=function(t,e,r){return x(this,t,e,r,!0)},o.prototype.lastIndexOf=function(t,e,r){return x(this,t,e,r,!1)},o.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return w(this,t,e,r);case"utf8":case"utf-8":return _(this,t,e,r);case"ascii":return P(this,t,e,r);case"latin1":case"binary":return A(this,t,e,r);case"base64":return T(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tt=4096;o.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t);var n;if(o.TYPED_ARRAY_SUPPORT)n=this.subarray(t,e),n.__proto__=o.prototype;else{var i=e-t;n=new o(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+t]}return n},o.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||L(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},o.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||L(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},o.prototype.readUInt8=function(t,e){return e||L(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return e||L(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return e||L(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||L(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},o.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||L(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return e||L(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},o.prototype.readInt16LE=function(t,e){e||L(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(t,e){e||L(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(t,e){return e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return e||L(t,4,this.length),K.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return e||L(t,4,this.length),K.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return e||L(t,8,this.length),K.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return e||L(t,8,this.length),K.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){var i=Math.pow(2,8*r)-1;C(this,t,e,r,i,0)}var o=1,a=0;for(this[e]=255&t;++a<r&&(o*=256);)this[e+a]=t/o&255;return e+r},o.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){var i=Math.pow(2,8*r)-1;C(this,t,e,r,i,0)}var o=r-1,a=1;for(this[e+o]=255&t;--o>=0&&(a*=256);)this[e+o]=t/a&255;return e+r},o.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,1,255,0),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):j(this,t,e,!0),e+2},o.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):j(this,t,e,!1),e+2},o.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):O(this,t,e,!0),e+4},o.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},o.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);C(this,t,e,r,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},o.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);C(this,t,e,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},o.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,1,127,-128),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):j(this,t,e,!0),e+2},o.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):j(this,t,e,!1),e+2},o.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):O(this,t,e,!0),e+4},o.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},o.prototype.writeFloatLE=function(t,e,r){return q(this,t,e,!0,r)},o.prototype.writeFloatBE=function(t,e,r){return q(this,t,e,!1,r)},o.prototype.writeDoubleLE=function(t,e,r){return U(this,t,e,!0,r)},o.prototype.writeDoubleBE=function(t,e,r){return U(this,t,e,!1,r)},o.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,a=n-r;if(this===t&&r<e&&e<n)for(i=a-1;i>=0;--i)t[i+e]=this[i+r];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+a),e);return a},o.prototype.fill=function(t,e,r,n){
if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0);var a;if("number"==typeof t)for(a=e;a<r;++a)this[a]=t;else{var s=o.isBuffer(t)?t:Y(new o(t,n).toString()),u=s.length;for(a=0;a<r-e;++a)this[a+e]=s[a%u]}return this};var et=/[^+\/0-9A-Za-z-_]/g}).call(exports,e(12))},function(t,exports,e){"use strict";function r(t){var e=t.layoutVertexArrayType;this.layoutVertexArray=new e;var r=t.elementArrayType;r&&(this.elementArray=new r);var i=t.elementArrayType2;i&&(this.elementArray2=new i),this.paintVertexArrays=n.mapObject(t.paintVertexArrayTypes,function(t){return new t})}var n=e(0);t.exports=r,r.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,r.prototype.hasCapacityFor=function(t){return this.layoutVertexArray.length+t<=r.MAX_VERTEX_ARRAY_LENGTH},r.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},r.prototype.trim=function(){this.layoutVertexArray.trim(),this.elementArray&&this.elementArray.trim(),this.elementArray2&&this.elementArray2.trim();for(var t in this.paintVertexArrays)this.paintVertexArrays[t].trim()},r.prototype.serialize=function(){return{layoutVertexArray:this.layoutVertexArray.serialize(),elementArray:this.elementArray&&this.elementArray.serialize(),elementArray2:this.elementArray2&&this.elementArray2.serialize(),paintVertexArrays:n.mapObject(this.paintVertexArrays,function(t){return t.serialize()})}},r.prototype.getTransferables=function(t){t.push(this.layoutVertexArray.arrayBuffer),this.elementArray&&t.push(this.elementArray.arrayBuffer),this.elementArray2&&t.push(this.elementArray2.arrayBuffer);for(var e in this.paintVertexArrays)t.push(this.paintVertexArrays[e].arrayBuffer)}},function(t,exports,e){"use strict";function r(){n.apply(this,arguments)}var n=e(3),i=e(0),o=e(6),a=n.EXTENT;t.exports=r,r.prototype=i.inherit(n,{}),r.prototype.addCircleVertex=function(t,e,r,n,i){return t.emplaceBack(2*e+(n+1)/2,2*r+(i+1)/2)},r.prototype.programInterfaces={circle:{layoutVertexArrayType:new n.VertexArrayType([{name:"a_pos",components:2,type:"Int16"}]),elementArrayType:new n.ElementArrayType,paintAttributes:[{name:"a_color",components:4,type:"Uint8",getValue:function(t,e,r){return t.getPaintValue("circle-color",e,r)},multiplier:255,paintProperty:"circle-color"},{name:"a_radius",components:1,type:"Uint16",isLayerConstant:!1,getValue:function(t,e,r){return[t.getPaintValue("circle-radius",e,r)]},multiplier:10,paintProperty:"circle-radius"},{name:"a_blur",components:1,type:"Uint16",isLayerConstant:!1,getValue:function(t,e,r){return[t.getPaintValue("circle-blur",e,r)]},multiplier:10,paintProperty:"circle-blur"},{name:"a_opacity",components:1,type:"Uint16",isLayerConstant:!1,getValue:function(t,e,r){return[t.getPaintValue("circle-opacity",e,r)]},multiplier:255,paintProperty:"circle-opacity"}]}},r.prototype.addFeature=function(t){for(var e={zoom:this.zoom},r=o(t),n=this.prepareArrayGroup("circle",0),i=n.layoutVertexArray.length,s=0;s<r.length;s++)for(var u=0;u<r[s].length;u++){var h=r[s][u].x,p=r[s][u].y;if(!(h<0||h>=a||p<0||p>=a)){var l=this.prepareArrayGroup("circle",4),c=l.layoutVertexArray,f=this.addCircleVertex(c,h,p,-1,-1);this.addCircleVertex(c,h,p,1,-1),this.addCircleVertex(c,h,p,1,1),this.addCircleVertex(c,h,p,-1,1),l.elementArray.emplaceBack(f,f+1,f+2),l.elementArray.emplaceBack(f,f+3,f+2)}}this.populatePaintArrays("circle",e,t.properties,n,i)}},function(t,exports,e){"use strict";function r(){i.apply(this,arguments)}function n(t){return t instanceof h?[t.x,t.y]:t.map(n)}var i=e(3),o=e(0),a=e(6),s=e(20),u=e(11),h=e(1),p=500;t.exports=r,r.prototype=o.inherit(i,{}),r.prototype.programInterfaces={fill:{layoutVertexArrayType:new i.VertexArrayType([{name:"a_pos",components:2,type:"Int16"}]),elementArrayType:new i.ElementArrayType(1),elementArrayType2:new i.ElementArrayType(2),paintAttributes:[{name:"a_color",components:4,type:"Uint8",getValue:function(t,e,r){return t.getPaintValue("fill-color",e,r)},multiplier:255,paintProperty:"fill-color"},{name:"a_outline_color",components:4,type:"Uint8",getValue:function(t,e,r){return t.getPaintValue("fill-outline-color",e,r)},multiplier:255,paintProperty:"fill-outline-color"},{name:"a_opacity",components:1,type:"Uint8",getValue:function(t,e,r){return[t.getPaintValue("fill-opacity",e,r)]},multiplier:255,paintProperty:"fill-opacity"}]}},r.prototype.addVertex=function(t,e,r){return t.emplaceBack(e,r)},r.prototype.addFeature=function(t){var e=a(t),r=n(u(e,p));this.factor=Math.pow(2,13);for(var i=this.prepareArrayGroup("fill",0),o=i.layoutVertexArray.length,s=0;s<r.length;s++)this.addPolygon(r[s]);this.populatePaintArrays("fill",{zoom:this.zoom},t.properties,i,o)},r.prototype.addPolygon=function(t){for(var e=0,r=0;r<t.length;r++)e+=t[r].length;for(var n=this.prepareArrayGroup("fill",e),i=[],o=[],a=n.layoutVertexArray.length,u=[],h=0;h<t.length;h++){var p=t[h];h>0&&o.push(i.length/2);for(var l=0;l<p.length;l++){var c=p[l],f=this.addVertex(n.layoutVertexArray,c[0],c[1],0,0,1,1,0);u.push(f),l>=1&&n.elementArray2.emplaceBack(f-1,f),i.push(c[0]),i.push(c[1])}}for(var y=s(i,o),d=0;d<y.length;d++)n.elementArray.emplaceBack(y[d]+a)}},function(t,exports,e){"use strict";function r(){a.apply(this,arguments)}function n(t){return t instanceof l?[t.x,t.y]:t.map(n)}function i(t,e){return t.some(function(t,r){return o(e[r])&&e[r]===t})}function o(t){return t<0||t>a.EXTENT}var a=e(3),s=e(0),u=e(6),h=e(20),p=e(11),l=e(1),c=500;t.exports=r,r.prototype=s.inherit(a,{}),r.prototype.programInterfaces={fillextrusion:{layoutVertexArrayType:new a.VertexArrayType([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal",components:3,type:"Int16"},{name:"a_edgedistance",components:1,type:"Int16"}]),elementArrayType:new a.ElementArrayType(3),paintAttributes:[{name:"a_minH",components:1,type:"Uint16",getValue:function(t,e,r){return[t.getPaintValue("fill-extrude-base",e,r)]},multiplier:1,paintProperty:"fill-extrude-base"},{name:"a_maxH",components:1,type:"Uint16",getValue:function(t,e,r){return[t.getPaintValue("fill-extrude-height",e,r)]},multiplier:1,paintProperty:"fill-extrude-height"},{name:"a_color",components:4,type:"Uint8",getValue:function(t,e,r){var n=t.getPaintValue("fill-color",e,r);return n[3]=1,n},multiplier:255,paintProperty:"fill-color"}]}},r.prototype.addVertex=function(t,e,r,n,i,o,a,s){return t.emplaceBack(e,r,2*Math.floor(n*this.factor)+a,i*this.factor*2,o*this.factor*2,Math.round(s))},r.prototype.addFeature=function(t){var e=u(t),r=n(p(e,c));this.factor=Math.pow(2,13);for(var i=this.prepareArrayGroup("fillextrusion",0),o=i.layoutVertexArray.length,a=0;a<r.length;a++)this.addPolygon(r[a]);this.populatePaintArrays("fillextrusion",{zoom:this.zoom},t.properties,i,o)},r.prototype.addPolygon=function(t){for(var e=0,r=0;r<t.length;r++)e+=t[r].length;e*=5;for(var n=this.prepareArrayGroup("fillextrusion",e),o=[],a=[],s=[],u=0;u<t.length;u++){var p=t[u];u>0&&a.push(o.length/2);for(var c=0,f=0;f<p.length;f++){var y=p[f],d=this.addVertex(n.layoutVertexArray,y[0],y[1],0,0,1,1,0);if(s.push(d),f>=1){var g=p[f-1];if(!i(y,g)){var m=l.convert(y)._sub(l.convert(g))._perp()._unit(),v=this.addVertex(n.layoutVertexArray,y[0],y[1],m.x,m.y,0,0,c);this.addVertex(n.layoutVertexArray,y[0],y[1],m.x,m.y,0,1,c),c+=l.convert(g).dist(l.convert(y)),this.addVertex(n.layoutVertexArray,g[0],g[1],m.x,m.y,0,0,c),this.addVertex(n.layoutVertexArray,g[0],g[1],m.x,m.y,0,1,c),n.elementArray.emplaceBack(v,v+1,v+2),n.elementArray.emplaceBack(v+1,v+2,v+3)}}o.push(y[0]),o.push(y[1])}}for(var x=h(o,a),b=0;b<x.length-2;b+=3)n.elementArray.emplaceBack(s[x[b]],s[x[b+1]],s[x[b+2]])}},function(t,exports,e){"use strict";function r(){n.apply(this,arguments)}var n=e(3),i=e(0),o=e(6),a=n.EXTENT,s=63,u=Math.cos(37.5*(Math.PI/180)),h=15,p=15,l=.5,c=Math.pow(2,p-1)/l;t.exports=r,r.prototype=i.inherit(n,{}),r.prototype.addLineVertex=function(t,e,r,n,i,o,a){return t.emplaceBack(e.x<<1|n,e.y<<1|i,Math.round(s*r.x)+128,Math.round(s*r.y)+128,(0===o?0:o<0?-1:1)+1|(a*l&63)<<2,a*l>>6)},r.prototype.programInterfaces={line:{layoutVertexArrayType:new n.VertexArrayType([{name:"a_pos",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}]),paintAttributes:[{name:"a_color",components:4,type:"Uint8",getValue:function(t,e,r){return t.getPaintValue("line-color",e,r)},multiplier:255,paintProperty:"line-color"}],elementArrayType:new n.ElementArrayType}},r.prototype.addFeature=function(t){for(var e=o(t,p),r=0;r<e.length;r++)this.addLine(e[r],t.properties,this.layer.layout["line-join"],this.layer.layout["line-cap"],this.layer.layout["line-miter-limit"],this.layer.layout["line-round-limit"])},r.prototype.addLine=function(t,e,r,n,i,o){for(var s=t.length;s>2&&t[s-1].equals(t[s-2]);)s--;if(!(t.length<2)){"bevel"===r&&(i=1.05);var p=h*(a/(512*this.overscaling)),l=t[0],c=t[s-1],f=l.equals(c),y=this.prepareArrayGroup("line",10*s),d=y.layoutVertexArray.length;if(2!==s||!f){this.distance=0;var g,m,v,x,b,w,_,P=n,A=f?"butt":n,T=!0;this.e1=this.e2=this.e3=-1,f&&(g=t[s-2],b=l.sub(g)._unit()._perp());for(var M=0;M<s;M++)if(v=f&&M===s-1?t[1]:t[M+1],!v||!t[M].equals(v)){b&&(x=b),g&&(m=g),g=t[M],b=v?v.sub(g)._unit()._perp():x,x=x||b;var E=x.add(b)._unit(),S=E.x*b.x+E.y*b.y,R=1/S,I=S<u&&m&&v;if(I&&M>0){var V=g.dist(m);if(V>2*p){var B=g.sub(g.sub(m)._mult(p/V)._round());this.distance+=B.dist(m),this.addCurrentVertex(B,this.distance,x.mult(1),0,0,!1),m=B}}var z=m&&v,L=z?r:v?P:A;if(z&&"round"===L&&(R<o?L="miter":R<=2&&(L="fakeround")),"miter"===L&&R>i&&(L="bevel"),"bevel"===L&&(R>2&&(L="flipbevel"),R<i&&(L="miter")),m&&(this.distance+=g.dist(m)),"miter"===L)E._mult(R),this.addCurrentVertex(g,this.distance,E,0,0,!1);else if("flipbevel"===L){if(R>100)E=b.clone();else{var C=x.x*b.y-x.y*b.x>0?-1:1,j=R*x.add(b).mag()/x.sub(b).mag();E._perp()._mult(j*C)}this.addCurrentVertex(g,this.distance,E,0,0,!1),this.addCurrentVertex(g,this.distance,E.mult(-1),0,0,!1)}else if("bevel"===L||"fakeround"===L){var O=x.x*b.y-x.y*b.x>0,D=-Math.sqrt(R*R-1);if(O?(_=0,w=D):(w=0,_=D),T||this.addCurrentVertex(g,this.distance,x,w,_,!1),"fakeround"===L){for(var q,U=Math.floor(8*(.5-(S-.5))),F=0;F<U;F++)q=b.mult((F+1)/(U+1))._add(x)._unit(),this.addPieSliceVertex(g,this.distance,q,O);this.addPieSliceVertex(g,this.distance,E,O);for(var k=U-1;k>=0;k--)q=x.mult((k+1)/(U+1))._add(b)._unit(),this.addPieSliceVertex(g,this.distance,q,O)}v&&this.addCurrentVertex(g,this.distance,b,-w,-_,!1)}else"butt"===L?(T||this.addCurrentVertex(g,this.distance,x,0,0,!1),v&&this.addCurrentVertex(g,this.distance,b,0,0,!1)):"square"===L?(T||(this.addCurrentVertex(g,this.distance,x,1,1,!1),this.e1=this.e2=-1),v&&this.addCurrentVertex(g,this.distance,b,-1,-1,!1)):"round"===L&&(T||(this.addCurrentVertex(g,this.distance,x,0,0,!1),this.addCurrentVertex(g,this.distance,x,1,1,!0),this.e1=this.e2=-1),v&&(this.addCurrentVertex(g,this.distance,b,-1,-1,!0),this.addCurrentVertex(g,this.distance,b,0,0,!1)));if(I&&M<s-1){var N=g.dist(v);if(N>2*p){var Y=g.add(v.sub(g)._mult(p/N)._round());this.distance+=Y.dist(g),this.addCurrentVertex(Y,this.distance,b.mult(1),0,0,!1),g=Y}}T=!1}this.populatePaintArrays("line",{zoom:this.zoom},e,y,d)}}},r.prototype.addCurrentVertex=function(t,e,r,n,i,o){var a,s=o?1:0,u=this.arrayGroups.line[this.arrayGroups.line.length-1],h=u.layoutVertexArray,p=u.elementArray;a=r.clone(),n&&a._sub(r.perp()._mult(n)),this.e3=this.addLineVertex(h,t,a,s,0,n,e),this.e1>=0&&this.e2>=0&&p.emplaceBack(this.e1,this.e2,this.e3),this.e1=this.e2,this.e2=this.e3,a=r.mult(-1),i&&a._sub(r.perp()._mult(i)),this.e3=this.addLineVertex(h,t,a,s,1,-i,e),this.e1>=0&&this.e2>=0&&p.emplaceBack(this.e1,this.e2,this.e3),this.e1=this.e2,this.e2=this.e3,e>c/2&&(this.distance=0,this.addCurrentVertex(t,this.distance,r,n,i,o))},r.prototype.addPieSliceVertex=function(t,e,r,n){var i=n?1:0;r=r.mult(n?-1:1);var o=this.arrayGroups.line[this.arrayGroups.line.length-1],a=o.layoutVertexArray,s=o.elementArray;this.e3=this.addLineVertex(a,t,r,0,i,0,e),this.e1>=0&&this.e2>=0&&s.emplaceBack(this.e1,this.e2,this.e3),n?this.e2=this.e3:this.e1=this.e3}},function(t,exports,e){"use strict";function r(t){o.apply(this,arguments),this.showCollisionBoxes=t.showCollisionBoxes,this.overscaling=t.overscaling,this.collisionBoxArray=t.collisionBoxArray,this.symbolQuadsArray=t.symbolQuadsArray,this.symbolInstancesArray=t.symbolInstancesArray,this.sdfIcons=t.sdfIcons,this.iconsNeedLinear=t.iconsNeedLinear,this.adjustedTextSize=t.adjustedTextSize,this.adjustedIconSize=t.adjustedIconSize,this.fontstack=t.fontstack}function n(t,e,r,n,i,o,a,s,u,h,p){return t.emplaceBack(e,r,Math.round(64*n),Math.round(64*i),o/4,a/4,10*(h||0),p,10*(s||0),10*Math.min(u||25,25))}var i=e(1),o=e(3),a=e(17),s=e(50),u=e(19),h=e(52),p=e(54),l=e(53),c=e(51),f=e(48),y=e(0),d=e(6),g=e(49),m=e(55),v=e(11),x=p.shapeText,b=p.shapeIcon,w=h.getGlyphQuads,_=h.getIconQuads,P=o.EXTENT;t.exports=r,r.MAX_QUADS=65535,r.prototype=y.inherit(o,{}),r.prototype.serialize=function(){var t=o.prototype.serialize.apply(this);return t.sdfIcons=this.sdfIcons,t.iconsNeedLinear=this.iconsNeedLinear,t.adjustedTextSize=this.adjustedTextSize,t.adjustedIconSize=this.adjustedIconSize,t.fontstack=this.fontstack,t};var A=new o.VertexArrayType([{name:"a_pos",components:2,type:"Int16"},{name:"a_offset",components:2,type:"Int16"},{name:"a_texture_pos",components:2,type:"Uint16"},{name:"a_data",components:4,type:"Uint8"}]),T=new o.ElementArrayType;r.prototype.addCollisionBoxVertex=function(t,e,r,n,i){return t.emplaceBack(e.x,e.y,Math.round(r.x),Math.round(r.y),10*n,10*i)},r.prototype.programInterfaces={glyph:{layoutVertexArrayType:A,elementArrayType:T},icon:{layoutVertexArrayType:A,elementArrayType:T},collisionBox:{layoutVertexArrayType:new o.VertexArrayType([{name:"a_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"},{name:"a_data",components:2,type:"Uint8"}])}},r.prototype.populateArrays=function(t,e,r){var n={lastIntegerZoom:1/0,lastIntegerZoomTime:0,lastZoom:0};this.adjustedTextMaxSize=this.layer.getLayoutValue("text-size",{zoom:18,zoomHistory:n}),this.adjustedTextSize=this.layer.getLayoutValue("text-size",{zoom:this.zoom+1,zoomHistory:n}),this.adjustedIconMaxSize=this.layer.getLayoutValue("icon-size",{zoom:18,zoomHistory:n}),this.adjustedIconSize=this.layer.getLayoutValue("icon-size",{zoom:this.zoom+1,zoomHistory:n});var i=512*this.overscaling;this.tilePixelRatio=P/i,this.compareText={},this.iconsNeedLinear=!1,this.symbolInstancesStartIndex=this.symbolInstancesArray.length;var o=this.layer.layout,a=this.features,s=this.textFeatures,h=.5,p=.5;switch(o["text-anchor"]){case"right":case"top-right":case"bottom-right":h=1;break;case"left":case"top-left":case"bottom-left":h=0}switch(o["text-anchor"]){case"bottom":case"bottom-right":case"bottom-left":p=1;break;case"top":case"top-right":case"top-left":p=0}for(var l="right"===o["text-justify"]?1:"left"===o["text-justify"]?0:.5,f=24,g=o["text-line-height"]*f,m="line"!==o["symbol-placement"]?o["text-max-width"]*f:0,v=o["text-letter-spacing"]*f,w=[o["text-offset"][0]*f,o["text-offset"][1]*f],_=this.fontstack=o["text-font"].join(","),A=[],T=0;T<a.length;T++)A.push(d(a[T]));if("line"===o["symbol-placement"]){var M=c(a,s,A);A=M.geometries,a=M.features,s=M.textFeatures}for(var E,S,R=0;R<a.length;R++)if(A[R]){if(E=s[R]?x(s[R],e[_],m,g,h,p,l,v,w):null,o["icon-image"]){var I=u(a[R].properties,o["icon-image"]),V=r[I];S=b(V,o),V&&(void 0===this.sdfIcons?this.sdfIcons=V.sdf:this.sdfIcons!==V.sdf&&y.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),1!==V.pixelRatio?this.iconsNeedLinear=!0:0===o["icon-rotate"]&&this.layer.isLayoutValueFeatureConstant("icon-rotate")||(this.iconsNeedLinear=!0))}else S=null;(E||S)&&this.addFeature(A[R],E,S,a[R])}this.symbolInstancesEndIndex=this.symbolInstancesArray.length,this.placeFeatures(t,this.showCollisionBoxes),this.trimArrays()},r.prototype.addFeature=function(t,e,r,n){var i=this.layer.layout,o=24,a=this.adjustedTextSize/o,u=void 0!==this.adjustedTextMaxSize?this.adjustedTextMaxSize:this.adjustedTextSize,h=this.tilePixelRatio*a,p=this.tilePixelRatio*u/o,l=this.tilePixelRatio*this.adjustedIconSize,c=this.tilePixelRatio*i["symbol-spacing"],y=i["symbol-avoid-edges"],d=i["text-padding"]*this.tilePixelRatio,g=i["icon-padding"]*this.tilePixelRatio,m=i["text-max-angle"]/180*Math.PI,x="map"===i["text-rotation-alignment"]&&"line"===i["symbol-placement"],b="map"===i["icon-rotation-alignment"]&&"line"===i["symbol-placement"],w=i["text-allow-overlap"]||i["icon-allow-overlap"]||i["text-ignore-placement"]||i["icon-ignore-placement"],_=i["symbol-placement"],A="line"===_,T=c/2,M=null;M=A?f(t,0,0,P,P):v(t,0);for(var E=0;E<M.length;E++){var S=null,R=M[E],I=null;A?(I=R,S=s(I,c,m,e,r,o,p,this.overscaling,P)):(I=R[0],S=this.findPolygonAnchors(R));for(var V=0,B=S.length;V<B;V++){var z=S[V];if(!(e&&A&&this.anchorIsTooClose(e.text,T,z))){var L=!(z.x<0||z.x>P||z.y<0||z.y>P);if(!y||L){var C=L||w;this.addSymbolInstance(z,I,e,r,this.layer,C,this.symbolInstancesArray.length,this.collisionBoxArray,n.index,this.sourceLayerIndex,this.index,h,d,x,l,g,b,{zoom:this.zoom},n.properties)}}}}},r.prototype.findPolygonAnchors=function(t){var e=t[0];if(0===e.length)return[];if(e.length<3||!y.isClosedPolygon(e))return[new a(e[0].x,e[0].y,0)];var r=null,n=m(t,16);return r=[new a(n.x,n.y,0)]},r.prototype.anchorIsTooClose=function(t,e,r){var n=this.compareText;if(t in n){for(var i=n[t],o=i.length-1;o>=0;o--)if(r.dist(i[o])<e)return!0}else n[t]=[];return n[t].push(r),!1},r.prototype.placeFeatures=function(t,e){this.recalculateStyleLayers(),this.createArrays();var r=this.layer.layout,n=t.maxScale,i="map"===r["text-rotation-alignment"]&&"line"===r["symbol-placement"],o="map"===r["icon-rotation-alignment"]&&"line"===r["symbol-placement"],a=r["text-allow-overlap"]||r["icon-allow-overlap"]||r["text-ignore-placement"]||r["icon-ignore-placement"];if(a){var s=this.symbolInstancesArray.toArray(this.symbolInstancesStartIndex,this.symbolInstancesEndIndex),u=t.angle,h=Math.sin(u),p=Math.cos(u);this.sortedSymbolInstances=s.sort(function(t,e){var r=h*t.anchorPointX+p*t.anchorPointY|0,n=h*e.anchorPointX+p*e.anchorPointY|0;return r-n||e.index-t.index})}for(var l=this.symbolInstancesStartIndex;l<this.symbolInstancesEndIndex;l++){var c=this.sortedSymbolInstances?this.sortedSymbolInstances[l-this.symbolInstancesStartIndex]:this.symbolInstancesArray.get(l),f={boxStartIndex:c.textBoxStartIndex,boxEndIndex:c.textBoxEndIndex},y={boxStartIndex:c.iconBoxStartIndex,boxEndIndex:c.iconBoxEndIndex},d=!(c.textBoxStartIndex===c.textBoxEndIndex),g=!(c.iconBoxStartIndex===c.iconBoxEndIndex),m=r["text-optional"]||!d,v=r["icon-optional"]||!g,x=d?t.placeCollisionFeature(f,r["text-allow-overlap"],r["symbol-avoid-edges"]):t.minScale,b=g?t.placeCollisionFeature(y,r["icon-allow-overlap"],r["symbol-avoid-edges"]):t.minScale;m||v?!v&&x?x=Math.max(b,x):!m&&b&&(b=Math.max(b,x)):b=x=Math.max(b,x),d&&(t.insertCollisionFeature(f,x,r["text-ignore-placement"]),x<=n&&this.addSymbols("glyph",c.glyphQuadStartIndex,c.glyphQuadEndIndex,x,r["text-keep-upright"],i,t.angle)),g&&(t.insertCollisionFeature(y,b,r["icon-ignore-placement"]),b<=n&&this.addSymbols("icon",c.iconQuadStartIndex,c.iconQuadEndIndex,b,r["icon-keep-upright"],o,t.angle))}e&&this.addToDebugBuffers(t)},r.prototype.addSymbols=function(t,e,r,i,o,a,s){for(var u=this.prepareArrayGroup(t,4*(r-e)),h=u.elementArray,p=u.layoutVertexArray,l=this.zoom,c=Math.max(Math.log(i)/Math.LN2+l,0),f=e;f<r;f++){var y=this.symbolQuadsArray.get(f).SymbolQuad,d=(y.anchorAngle+s+Math.PI)%(2*Math.PI);if(!(o&&a&&(d<=Math.PI/2||d>3*Math.PI/2))){var g=y.tl,m=y.tr,v=y.bl,x=y.br,b=y.tex,w=y.anchorPoint,_=Math.max(l+Math.log(y.minScale)/Math.LN2,c),P=Math.min(l+Math.log(y.maxScale)/Math.LN2,25);if(!(P<=_)){_===c&&(_=0);var A=Math.round(y.glyphAngle/(2*Math.PI)*256),T=n(p,w.x,w.y,g.x,g.y,b.x,b.y,_,P,c,A);n(p,w.x,w.y,m.x,m.y,b.x+b.w,b.y,_,P,c,A),n(p,w.x,w.y,v.x,v.y,b.x,b.y+b.h,_,P,c,A),n(p,w.x,w.y,x.x,x.y,b.x+b.w,b.y+b.h,_,P,c,A),h.emplaceBack(T,T+1,T+2),h.emplaceBack(T+1,T+2,T+3)}}}},r.prototype.updateIcons=function(t){this.recalculateStyleLayers();var e=this.layer.layout["icon-image"];if(e)for(var r=0;r<this.features.length;r++){var n=u(this.features[r].properties,e);n&&(t[n]=!0)}},r.prototype.updateFont=function(t){this.recalculateStyleLayers();var e=this.layer.layout["text-font"],r=t[e]=t[e]||{};this.textFeatures=l(this.features,this.layer.layout,r)},r.prototype.addToDebugBuffers=function(t){for(var e=this.prepareArrayGroup("collisionBox",0),r=e.layoutVertexArray,n=-t.angle,o=t.yStretch,a=this.symbolInstancesStartIndex;a<this.symbolInstancesEndIndex;a++){var s=this.symbolInstancesArray.get(a);s.textCollisionFeature={boxStartIndex:s.textBoxStartIndex,boxEndIndex:s.textBoxEndIndex},s.iconCollisionFeature={boxStartIndex:s.iconBoxStartIndex,boxEndIndex:s.iconBoxEndIndex};for(var u=0;u<2;u++){var h=s[0===u?"textCollisionFeature":"iconCollisionFeature"];if(h)for(var p=h.boxStartIndex;p<h.boxEndIndex;p++){var l=this.collisionBoxArray.get(p),c=l.anchorPoint,f=new i(l.x1,l.y1*o)._rotate(n),y=new i(l.x2,l.y1*o)._rotate(n),d=new i(l.x1,l.y2*o)._rotate(n),g=new i(l.x2,l.y2*o)._rotate(n),m=Math.max(0,Math.min(25,this.zoom+Math.log(l.maxScale)/Math.LN2)),v=Math.max(0,Math.min(25,this.zoom+Math.log(l.placementScale)/Math.LN2));this.addCollisionBoxVertex(r,c,f,m,v),this.addCollisionBoxVertex(r,c,y,m,v),this.addCollisionBoxVertex(r,c,y,m,v),this.addCollisionBoxVertex(r,c,g,m,v),this.addCollisionBoxVertex(r,c,g,m,v),this.addCollisionBoxVertex(r,c,d,m,v),this.addCollisionBoxVertex(r,c,d,m,v),this.addCollisionBoxVertex(r,c,f,m,v)}}}},r.prototype.addSymbolInstance=function(t,e,n,i,o,a,s,u,h,p,l,c,f,d,m,v,x,b,P){var A,T,M,E,S,R,I,V;if(n&&(I=a?w(t,n,c,e,o,d):[],S=new g(u,e,t,h,p,l,n,c,f,d,!1)),A=this.symbolQuadsArray.length,I&&I.length)for(var B=0;B<I.length;B++)this.addSymbolQuad(I[B]);T=this.symbolQuadsArray.length;var z=S?S.boxStartIndex:this.collisionBoxArray.length,L=S?S.boxEndIndex:this.collisionBoxArray.length;i&&(V=a?_(t,i,m,e,o,x,n,b,P):[],R=new g(u,e,t,h,p,l,i,m,v,x,!0)),M=this.symbolQuadsArray.length,V&&1===V.length&&this.addSymbolQuad(V[0]),E=this.symbolQuadsArray.length;var C=R?R.boxStartIndex:this.collisionBoxArray.length,j=R?R.boxEndIndex:this.collisionBoxArray.length;return E>r.MAX_QUADS&&y.warnOnce("Too many symbols being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),T>r.MAX_QUADS&&y.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),this.symbolInstancesArray.emplaceBack(z,L,C,j,A,T,M,E,t.x,t.y,s)},r.prototype.addSymbolQuad=function(t){return this.symbolQuadsArray.emplaceBack(t.anchorPoint.x,t.anchorPoint.y,t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y,t.tex.h,t.tex.w,t.tex.x,t.tex.y,t.anchorAngle,t.glyphAngle,t.maxScale,t.minScale)}},function(t,exports,e){"use strict";(function(e){function e(t,e,r){this.arrayBuffer=t.arrayBuffer,this.length=t.length,this.attributes=e.members,this.itemSize=e.bytesPerElement,this.type=r,this.arrayType=e}t.exports=e,e.prototype.bind=function(t){var e=t[this.type];this.buffer?t.bindBuffer(e,this.buffer):(this.gl=t,this.buffer=t.createBuffer(),t.bindBuffer(e,this.buffer),t.bufferData(e,this.arrayBuffer,t.STATIC_DRAW),this.arrayBuffer=null)};var r={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT"};e.prototype.setVertexAttribPointers=function(t,e){for(var n=0;n<this.attributes.length;n++){var i=this.attributes[n],o=e[i.name];void 0!==o&&t.vertexAttribPointer(o,i.components,t[r[i.type]],!1,this.arrayType.bytesPerElement,i.offset)}},e.prototype.destroy=function(){this.buffer&&this.gl.deleteBuffer(this.buffer)},e.BufferType={VERTEX:"ARRAY_BUFFER",ELEMENT:"ELEMENT_ARRAY_BUFFER"}}).call(exports,e(34).Buffer)},function(t,exports,e){"use strict";function r(t,e){this.layoutVertexBuffer=new i(t.layoutVertexArray,e.layoutVertexArrayType,i.BufferType.VERTEX),t.elementArray&&(this.elementBuffer=new i(t.elementArray,e.elementArrayType,i.BufferType.ELEMENT));var r,a=this.vaos={};t.elementArray2&&(this.elementBuffer2=new i(t.elementArray2,e.elementArrayType2,i.BufferType.ELEMENT),r=this.secondVaos={}),this.paintVertexBuffers=n.mapObject(t.paintVertexArrays,function(n,s){return a[s]=new o,t.elementArray2&&(r[s]=new o),new i(n,e.paintVertexArrayTypes[s],i.BufferType.VERTEX)})}var n=e(0),i=e(41),o=e(45);t.exports=r,r.prototype.destroy=function(){this.layoutVertexBuffer.destroy(),this.elementBuffer&&this.elementBuffer.destroy(),this.elementBuffer2&&this.elementBuffer2.destroy();for(var t in this.paintVertexBuffers)this.paintVertexBuffers[t].destroy();for(var e in this.vaos)this.vaos[e].destroy();for(var r in this.secondVaos)this.secondVaos[r].destroy()}},function(t,exports,e){"use strict";function r(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}t.exports=r;var n=e(0).wrap;r.prototype.wrap=function(){return new r(n(this.lng,-180,180),this.lat)},r.prototype.toArray=function(){return[this.lng,this.lat]},r.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},r.convert=function(t){if(t instanceof r)return t;if(t&&t.hasOwnProperty("lng")&&t.hasOwnProperty("lat"))return new r(t.lng,t.lat);if(Array.isArray(t)&&2===t.length)return new r(t[0],t[1]);throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}},function(t,exports,e){"use strict";function r(t,e){this.tileSize=512,this._minZoom=t||0,this._maxZoom=e||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new n(0,0),this.zoom=0,this.angle=0,this._altitude=1.5,this._pitch=0,this._unmodified=!0}var n=e(43),i=e(1),o=e(10),a=e(0),s=e(18),u=e(46),h=e(3).EXTENT,p=e(65),l=p.vec4,c=p.mat4,f=p.mat2;t.exports=r,r.prototype={get minZoom(){return this._minZoom},set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},get maxZoom(){return this._maxZoom},set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},get worldSize(){return this.tileSize*this.scale},get centerPoint(){return this.size._div(2)},get size(){return new i(this.width,this.height)},get bearing(){return-this.angle/Math.PI*180},set bearing(t){var e=-a.wrap(t,-180,180)*Math.PI/180;this.angle!==e&&(this._unmodified=!1,this.angle=e,this._calcMatrices(),this.rotationMatrix=f.create(),f.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},get pitch(){return this._pitch/Math.PI*180},set pitch(t){var e=a.clamp(t,0,60)/180*Math.PI;this._pitch!==e&&(this._unmodified=!1,this._pitch=e,this._calcMatrices())},get altitude(){return this._altitude},set altitude(t){var e=Math.max(.75,t);this._altitude!==e&&(this._unmodified=!1,this._altitude=e,this._calcMatrices())},get zoom(){return this._zoom},set zoom(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._calcMatrices(),this._constrain())},get center(){return this._center},set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._calcMatrices(),this._constrain())},coveringZoomLevel:function(t){return(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize))},coveringTiles:function(t){var e=this.coveringZoomLevel(t),r=e;if(e<t.minzoom)return[];e>t.maxzoom&&(e=t.maxzoom);var n=this,o=n.locationCoordinate(n.center)._zoomTo(e),a=new i(o.column-.5,o.row-.5);return u.cover(e,[n.pointCoordinate(new i(0,0))._zoomTo(e),n.pointCoordinate(new i(n.width,0))._zoomTo(e),n.pointCoordinate(new i(n.width,n.height))._zoomTo(e),n.pointCoordinate(new i(0,n.height))._zoomTo(e)],t.reparseOverscaled?r:e).sort(function(t,e){return a.dist(t)-a.dist(e)})},resize:function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._calcMatrices(),this._constrain()},get unmodified(){return this._unmodified},zoomScale:function(t){return Math.pow(2,t)},scaleZoom:function(t){return Math.log(t)/Math.LN2},project:function(t,e){return new i(this.lngX(t.lng,e),this.latY(t.lat,e))},unproject:function(t,e){return new n(this.xLng(t.x,e),this.yLat(t.y,e))},get x(){return this.lngX(this.center.lng)},get y(){return this.latY(this.center.lat)},get point(){return new i(this.x,this.y)},lngX:function(t,e){return(180+t)*(e||this.worldSize)/360},latY:function(t,e){var r=180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360));return(180-r)*(e||this.worldSize)/360},xLng:function(t,e){return 360*t/(e||this.worldSize)-180},yLat:function(t,e){var r=180-360*t/(e||this.worldSize);return 360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90},panBy:function(t){var e=this.centerPoint._add(t);this.center=this.pointLocation(e)},setLocationAtPoint:function(t,e){var r=this.locationCoordinate(t),n=this.pointCoordinate(e),i=this.pointCoordinate(this.centerPoint),o=n._sub(r);this._unmodified=!1,this.center=this.coordinateLocation(i._sub(o))},locationPoint:function(t){return this.coordinatePoint(this.locationCoordinate(t))},pointLocation:function(t){return this.coordinateLocation(this.pointCoordinate(t))},locationCoordinate:function(t){var e=this.zoomScale(this.tileZoom)/this.worldSize,r=n.convert(t);return new o(this.lngX(r.lng)*e,this.latY(r.lat)*e,this.tileZoom)},coordinateLocation:function(t){var e=this.zoomScale(t.zoom);return new n(this.xLng(t.column,e),this.yLat(t.row,e))},pointCoordinate:function(t){var e=0,r=[t.x,t.y,0,1],n=[t.x,t.y,1,1];l.transformMat4(r,r,this.pixelMatrixInverse),l.transformMat4(n,n,this.pixelMatrixInverse);var i=r[3],a=n[3],u=r[0]/i,h=n[0]/a,p=r[1]/i,c=n[1]/a,f=r[2]/i,y=n[2]/a,d=f===y?0:(e-f)/(y-f),g=this.worldSize/this.zoomScale(this.tileZoom);return new o(s(u,h,d)/g,s(p,c,d)/g,this.tileZoom)},coordinatePoint:function(t){var e=this.worldSize/this.zoomScale(t.zoom),r=[t.column*e,t.row*e,0,1];return l.transformMat4(r,r,this.pixelMatrix),new i(r[0]/r[3],r[1]/r[3])},calculatePosMatrix:function(t,e){void 0===e&&(e=1/0),t instanceof u&&(t=t.toCoordinate(e));var r=Math.min(t.zoom,e),n=this.worldSize/Math.pow(2,r),i=new Float64Array(16);return c.identity(i),c.translate(i,i,[t.column*n,t.row*n,0]),c.scale(i,i,[n/h,n/h,1]),c.multiply(i,this.projMatrix,i),new Float32Array(i)},_constrain:function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,e,r,n,o,a,s,u,h=this.size,p=this._unmodified;this.latRange&&(t=this.latY(this.latRange[1]),e=this.latY(this.latRange[0]),o=e-t<h.y?h.y/(e-t):0),this.lngRange&&(r=this.lngX(this.lngRange[0]),n=this.lngX(this.lngRange[1]),a=n-r<h.x?h.x/(n-r):0);var l=Math.max(a||0,o||0);if(l)return this.center=this.unproject(new i(a?(n+r)/2:this.x,o?(e+t)/2:this.y)),this.zoom+=this.scaleZoom(l),this._unmodified=p,void(this._constraining=!1);if(this.latRange){var c=this.y,f=h.y/2;c-f<t&&(u=t+f),c+f>e&&(u=e-f)}if(this.lngRange){var y=this.x,d=h.x/2;y-d<r&&(s=r+d),y+d>n&&(s=n-d)}void 0===s&&void 0===u||(this.center=this.unproject(new i(void 0!==s?s:this.x,void 0!==u?u:this.y))),this._unmodified=p,this._constraining=!1}},_calcMatrices:function(){if(this.height){var t=Math.atan(.5/this.altitude),e=Math.sin(t)*this.altitude/Math.sin(Math.PI/2-this._pitch-t),r=Math.cos(Math.PI/2-this._pitch)*e+this.altitude,n=new Float64Array(16);if(c.perspective(n,2*Math.atan(this.height/2/this.altitude),this.width/this.height,.1,r),c.translate(n,n,[0,0,-this.altitude]),c.scale(n,n,[1,-1,1/this.height]),c.rotateX(n,n,this._pitch),c.rotateZ(n,n,this.angle),c.translate(n,n,[-this.x,-this.y,0]),
this.projMatrix=n,n=c.create(),c.scale(n,n,[this.width/2,-this.height/2,1]),c.translate(n,n,[1,-1,0]),this.pixelMatrix=c.multiply(new Float64Array(16),n,this.projMatrix),n=c.invert(new Float64Array(16),this.pixelMatrix),!n)throw new Error("failed to invert matrix");this.pixelMatrixInverse=n,n=f.create(),f.scale(n,n,[1,Math.cos(this._pitch)]),f.rotate(n,n,this.angle),this.lineAntialiasingMatrix=n;var i=Math.sqrt(this.height*this.height/4*(1+this.altitude*this.altitude));this.lineStretch=(i+this.height/2*Math.tan(this._pitch))/i-1}}}},function(t,exports,e){"use strict";function r(){this.boundProgram=null,this.boundVertexBuffer=null,this.boundVertexBuffer2=null,this.boundElementBuffer=null,this.vao=null}var n=e(4);t.exports=r,r.prototype.bind=function(t,e,r,n,i){void 0===t.extVertexArrayObject&&(t.extVertexArrayObject=t.getExtension("OES_vertex_array_object"));var o=!this.vao||this.boundProgram!==e||this.boundVertexBuffer!==r||this.boundVertexBuffer2!==i||this.boundElementBuffer!==n;!t.extVertexArrayObject||o?(this.freshBind(t,e,r,n,i),this.gl=t):t.extVertexArrayObject.bindVertexArrayOES(this.vao)},r.prototype.freshBind=function(t,e,r,i,o){var a,s=e.numAttributes;if(t.extVertexArrayObject)this.vao&&this.destroy(),this.vao=t.extVertexArrayObject.createVertexArrayOES(),t.extVertexArrayObject.bindVertexArrayOES(this.vao),a=0,this.boundProgram=e,this.boundVertexBuffer=r,this.boundVertexBuffer2=o,this.boundElementBuffer=i;else{a=t.currentNumAttributes||0;for(var u=s;u<a;u++)n(0!==u),t.disableVertexAttribArray(u)}for(var h=a;h<s;h++)t.enableVertexAttribArray(h);r.bind(t),r.setVertexAttribPointers(t,e),o&&(o.bind(t),o.setVertexAttribPointers(t,e)),i&&i.bind(t),t.currentNumAttributes=s},r.prototype.destroy=function(){this.vao&&(this.gl.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}},function(t,exports,e){"use strict";function r(t,e,r,n){s(!isNaN(t)&&t>=0&&t%1===0),s(!isNaN(e)&&e>=0&&e%1===0),s(!isNaN(r)&&r>=0&&r%1===0),isNaN(n)&&(n=0),this.z=+t,this.x=+e,this.y=+r,this.w=+n,n*=2,n<0&&(n=n*-1-1);var i=1<<this.z;this.id=32*(i*i*n+i*this.y+this.x)+this.z,this.posMatrix=null}function n(t,e,r){for(var n,i="",o=t;o>0;o--)n=1<<o-1,i+=(e&n?1:0)+(r&n?2:0);return i}function i(t,e){if(t.row>e.row){var r=t;t=e,e=r}return{x0:t.column,y0:t.row,x1:e.column,y1:e.row,dx:e.column-t.column,dy:e.row-t.row}}function o(t,e,r,n,i){var o=Math.max(r,Math.floor(e.y0)),a=Math.min(n,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var s=t;t=e,e=s}for(var u=t.dx/t.dy,h=e.dx/e.dy,p=t.dx>0,l=e.dx<0,c=o;c<a;c++){var f=u*Math.max(0,Math.min(t.dy,c+p-t.y0))+t.x0,y=h*Math.max(0,Math.min(e.dy,c+l-e.y0))+e.x0;i(Math.floor(y),Math.ceil(f),c)}}function a(t,e,r,n,a,s){var u,h=i(t,e),p=i(e,r),l=i(r,t);h.dy>p.dy&&(u=h,h=p,p=u),h.dy>l.dy&&(u=h,h=l,l=u),p.dy>l.dy&&(u=p,p=l,l=u),h.dy&&o(l,h,n,a,s),p.dy&&o(l,p,n,a,s)}var s=e(4),u=e(73),h=e(10);t.exports=r,r.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y},r.prototype.toCoordinate=function(t){var e=Math.min(this.z,t),r=Math.pow(2,e),n=this.y,i=this.x+r*this.w;return new h(i,n,e)},r.fromID=function(t){var e=t%32,n=1<<e,i=(t-e)/32,o=i%n,a=(i-o)/n%n,s=Math.floor(i/(n*n));return s%2!==0&&(s=s*-1-1),s/=2,new r(e,o,a,s)},r.prototype.url=function(t,e,r){var i=u.getTileBBox(this.x,this.y,this.z),o=n(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",Math.min(this.z,e||this.z)).replace("{x}",this.x).replace("{y}","tms"===r?Math.pow(2,this.z)-this.y-1:this.y).replace("{quadkey}",o).replace("{bbox-epsg-3857}",i)},r.prototype.parent=function(t){return 0===this.z?null:this.z>t?new r(this.z-1,this.x,this.y,this.w):new r(this.z-1,Math.floor(this.x/2),Math.floor(this.y/2),this.w)},r.prototype.wrapped=function(){return new r(this.z,this.x,this.y,0)},r.prototype.children=function(t){if(this.z>=t)return[new r(this.z+1,this.x,this.y,this.w)];var e=this.z+1,n=2*this.x,i=2*this.y;return[new r(e,n,i,this.w),new r(e,n+1,i,this.w),new r(e,n,i+1,this.w),new r(e,n+1,i+1,this.w)]},r.cover=function(t,e,n){function i(t,e,i){var a,u,h;if(i>=0&&i<=o)for(a=t;a<e;a++)u=(a%o+o)%o,h=new r(n,u,i,Math.floor(a/o)),s[h.id]=h}var o=1<<t,s={};return a(e[0],e[1],e[2],0,o,i),a(e[2],e[3],e[0],0,o,i),Object.keys(s).map(function(t){return s[t]})}},function(t,exports,e){"use strict";function r(t,e,r,n,i){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;s>-r/2;){if(a--,a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var u=[],h=0;s<r/2;){var p=t[a-1],l=t[a],c=t[a+1];if(!c)return!1;var f=p.angleTo(l)-l.angleTo(c);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:f}),h+=f;s-u[0].distance>n;)h-=u.shift().angleDelta;if(h>i)return!1;a++,s+=l.dist(c)}return!0}t.exports=r},function(t,exports,e){"use strict";function r(t,e,r,i,o){for(var a=[],s=0;s<t.length;s++)for(var u,h=t[s],p=0;p<h.length-1;p++){var l=h[p],c=h[p+1];l.x<e&&c.x<e||(l.x<e?l=new n(e,l.y+(c.y-l.y)*((e-l.x)/(c.x-l.x)))._round():c.x<e&&(c=new n(e,l.y+(c.y-l.y)*((e-l.x)/(c.x-l.x)))._round()),l.y<r&&c.y<r||(l.y<r?l=new n(l.x+(c.x-l.x)*((r-l.y)/(c.y-l.y)),r)._round():c.y<r&&(c=new n(l.x+(c.x-l.x)*((r-l.y)/(c.y-l.y)),r)._round()),l.x>=i&&c.x>=i||(l.x>=i?l=new n(i,l.y+(c.y-l.y)*((i-l.x)/(c.x-l.x)))._round():c.x>=i&&(c=new n(i,l.y+(c.y-l.y)*((i-l.x)/(c.x-l.x)))._round()),l.y>=o&&c.y>=o||(l.y>=o?l=new n(l.x+(c.x-l.x)*((o-l.y)/(c.y-l.y)),o)._round():c.y>=o&&(c=new n(l.x+(c.x-l.x)*((o-l.y)/(c.y-l.y)),o)._round()),u&&l.equals(u[u.length-1])||(u=[l],a.push(u)),u.push(c)))))}return a}var n=e(1);t.exports=r},function(t,exports,e){"use strict";function r(t,e,r,n,i,o,a,s,u,h,p){var l=a.top*s-u,c=a.bottom*s+u,f=a.left*s-u,y=a.right*s+u;if(this.boxStartIndex=t.length,h){var d=c-l,g=y-f;if(d>0)if(d=Math.max(10*s,d),p){var m=e[r.segment+1].sub(e[r.segment])._unit()._mult(g),v=[r.sub(m),r.add(m)];this._addLineCollisionBoxes(t,v,r,0,g,d,n,i,o)}else this._addLineCollisionBoxes(t,e,r,r.segment,g,d,n,i,o)}else t.emplaceBack(r.x,r.y,f,l,y,c,1/0,n,i,o,0,0,0,0,0);this.boxEndIndex=t.length}t.exports=r,r.prototype._addLineCollisionBoxes=function(t,e,r,n,i,o,a,s,u){var h=o/2,p=Math.floor(i/h),l=-o/2,c=this.boxes,f=r,y=n+1,d=l;do{if(y--,y<0)return c;d-=e[y].dist(f),f=e[y]}while(d>-i/2);for(var g=e[y].dist(e[y+1]),m=0;m<p;m++){for(var v=-i/2+m*h;d+g<v;){if(d+=g,y++,y+1>=e.length)return c;g=e[y].dist(e[y+1])}var x=v-d,b=e[y],w=e[y+1],_=w.sub(b)._unit()._mult(x)._add(b)._round(),P=Math.max(Math.abs(v-l)-h/2,0),A=i/2/P;t.emplaceBack(_.x,_.y,-o/2,-o/2,o/2,o/2,A,a,s,u,0,0,0,0,0)}return c}},function(t,exports,e){"use strict";function r(t,e,r,i,o,a,s,u,h){var p=i?.6*a*s:0,l=Math.max(i?i.right-i.left:0,o?o.right-o.left:0),c=0===t[0].x||t[0].x===h||0===t[0].y||t[0].y===h;e-l*s<e/4&&(e=l*s+e/4);var f=2*a,y=c?e/2*u%e:(l/2+f)*s*u%e;return n(t,y,e,p,r,l*s,c,!1,h)}function n(t,e,r,s,u,h,p,l,c){for(var f=h/2,y=0,d=0;d<t.length-1;d++)y+=t[d].dist(t[d+1]);for(var g=0,m=e-r,v=[],x=0;x<t.length-1;x++){for(var b=t[x],w=t[x+1],_=b.dist(w),P=w.angleTo(b);m+r<g+_;){m+=r;var A=(m-g)/_,T=i(b.x,w.x,A),M=i(b.y,w.y,A);if(T>=0&&T<c&&M>=0&&M<c&&m-f>=0&&m+f<=y){var E=new o(T,M,P,x)._round();s&&!a(t,E,h,s,u)||v.push(E)}}g+=_}return l||v.length||p||(v=n(t,g/2,r,s,u,h,p,!0,c)),v}var i=e(18),o=e(17),a=e(47);t.exports=r},function(t,exports,e){"use strict";t.exports=function(t,e,r){function n(n){p.push(t[n]),l.push(r[n]),c.push(e[n]),f++}function i(t,e,r){var n=h[t];return delete h[t],h[e]=n,l[n][0].pop(),l[n][0]=l[n][0].concat(r[0]),n}function o(t,e,r){var n=u[e];return delete u[e],u[t]=n,l[n][0].shift(),l[n][0]=r[0].concat(l[n][0]),n}function a(t,e,r){var n=r?e[0][e[0].length-1]:e[0][0];return t+":"+n.x+":"+n.y}var s,u={},h={},p=[],l=[],c=[],f=0;for(s=0;s<t.length;s++){var y=r[s],d=e[s];if(d){var g=a(d,y),m=a(d,y,!0);if(g in h&&m in u&&h[g]!==u[m]){var v=o(g,m,y),x=i(g,m,l[v]);delete u[g],delete h[m],h[a(d,l[x],!0)]=x,l[v]=null}else g in h?i(g,m,y):m in u?o(g,m,y):(n(s),u[g]=f-1,h[m]=f-1)}else n(s)}return{features:p,textFeatures:c,geometries:l}}},function(t,exports,e){"use strict";function r(t,e,r,n,i,o,a,s,u,h){this.anchorPoint=t,this.tl=e,this.tr=r,this.bl=n,this.br=i,this.tex=o,this.anchorAngle=a,this.glyphAngle=s,this.minScale=u,this.maxScale=h}function n(t,e,n,i,o,u,h,p,l){var c,f,y,d,g=e.image.rect,m=o.layout,v=1,x=e.left-v,b=x+g.w/e.image.pixelRatio,w=e.top-v,_=w+g.h/e.image.pixelRatio;if("none"!==m["icon-text-fit"]&&h){var P=b-x,A=_-w,T=m["text-size"]/24,M=h.left*T,E=h.right*T,S=h.top*T,R=h.bottom*T,I=E-M,V=R-S,B=m["icon-text-fit-padding"][0],z=m["icon-text-fit-padding"][1],L=m["icon-text-fit-padding"][2],C=m["icon-text-fit-padding"][3],j="width"===m["icon-text-fit"]?.5*(V-A):0,O="height"===m["icon-text-fit"]?.5*(I-P):0,D="width"===m["icon-text-fit"]||"both"===m["icon-text-fit"]?I:P,q="height"===m["icon-text-fit"]||"both"===m["icon-text-fit"]?V:A;c=new a(M+O-C,S+j-B),f=new a(M+O+z+D,S+j-B),y=new a(M+O+z+D,S+j+L+q),d=new a(M+O-C,S+j+L+q)}else c=new a(x,w),f=new a(b,w),y=new a(b,_),d=new a(x,_);var U=o.getLayoutValue("icon-rotate",p,l)*Math.PI/180;if(u){var F=i[t.segment];if(t.y===F.y&&t.x===F.x&&t.segment+1<i.length){var k=i[t.segment+1];U+=Math.atan2(t.y-k.y,t.x-k.x)+Math.PI}else U+=Math.atan2(t.y-F.y,t.x-F.x)}if(U){var N=Math.sin(U),Y=Math.cos(U),Z=[Y,-N,N,Y];c=c.matMult(Z),f=f.matMult(Z),d=d.matMult(Z),y=y.matMult(Z)}return[new r(new a(t.x,t.y),c,f,d,y,e.image.rect,0,0,s,1/0)]}function i(t,e,n,i,u,h){for(var p=u.layout["text-rotate"]*Math.PI/180,l=u.layout["text-keep-upright"],c=e.positionedGlyphs,f=[],y=0;y<c.length;y++){var d=c[y],g=d.glyph;if(g){var m=g.rect;if(m){var v,x=(d.x+g.advance/2)*n,b=s;h?(v=[],b=o(v,t,x,i,t.segment,!0),l&&(b=Math.min(b,o(v,t,x,i,t.segment,!1)))):v=[{anchorPoint:new a(t.x,t.y),offset:0,angle:0,maxScale:1/0,minScale:s}];for(var w=d.x+g.left,_=d.y-g.top,P=w+m.w,A=_+m.h,T=new a(w,_),M=new a(P,_),E=new a(w,A),S=new a(P,A),R=0;R<v.length;R++){var I=v[R],V=T,B=M,z=E,L=S;if(p){var C=Math.sin(p),j=Math.cos(p),O=[j,-C,C,j];V=V.matMult(O),B=B.matMult(O),z=z.matMult(O),L=L.matMult(O)}var D=Math.max(I.minScale,b),q=(t.angle+I.offset+2*Math.PI)%(2*Math.PI),U=(I.angle+I.offset+2*Math.PI)%(2*Math.PI);f.push(new r(I.anchorPoint,V,B,z,L,m,q,U,D,I.maxScale))}}}}return f}function o(t,e,r,n,i,o){var u=!o;r<0&&(o=!o),o&&i++;var h=new a(e.x,e.y),p=n[i],l=1/0;r=Math.abs(r);for(var c=s;;){var f=h.dist(p),y=r/f,d=Math.atan2(p.y-h.y,p.x-h.x);if(o||(d+=Math.PI),t.push({anchorPoint:h,offset:u?Math.PI:0,minScale:y,maxScale:l,angle:(d+2*Math.PI)%(2*Math.PI)}),y<=c)break;for(h=p;h.equals(p);)if(i+=o?1:-1,p=n[i],!p)return y;var g=p.sub(h)._unit();h=h.sub(g._mult(f)),l=y}return c}var a=e(1);t.exports={getIconQuads:n,getGlyphQuads:i,SymbolQuad:r};var s=.5},function(t,exports,e){"use strict";function r(t,e,r){for(var i=[],o=0,a=t.length;o<a;o++){var s=n(t[o].properties,e["text-field"]);if(s){s=s.toString();var u=e["text-transform"];"uppercase"===u?s=s.toLocaleUpperCase():"lowercase"===u&&(s=s.toLocaleLowerCase());for(var h=0;h<s.length;h++)r[s.charCodeAt(h)]=!0;i[o]=s}else i[o]=null}return i}var n=e(19);t.exports=r},function(t,exports,e){"use strict";function r(t,e,r,n){this.codePoint=t,this.x=e,this.y=r,this.glyph=n||null}function n(t,e,r,n,i,o){this.positionedGlyphs=t,this.text=e,this.top=r,this.bottom=n,this.left=i,this.right=o}function i(t,e,i,a,s,u,h,l,c){var f=[],y=new n(f,t,c[1],c[1],c[0],c[0]),d=-17,g=0,m=d;t=t.trim();for(var v=0;v<t.length;v++){var x=t.charCodeAt(v),b=e[x];(b||x===p)&&(f.push(new r(x,g,m,b)),b&&(g+=b.advance+l))}return!!f.length&&(o(y,e,a,i,s,u,h,c),y)}function o(t,e,r,n,i,o,u,h){var f=null,y=0,d=0,g=0,m=0,v=t.positionedGlyphs;if(n)for(var x=0;x<v.length;x++){var b=v[x];if(b.x-=y,b.y+=r*g,null!==f&&(b.x>n||v[f].codePoint===p)){var w=v[f+1].x;m=Math.max(w,m);for(var _=f+1;_<=x;_++)v[_].y+=r,v[_].x-=w;if(u){var P=f;l[v[f].codePoint]&&P--,a(v,e,d,P,u)}d=f+1,f=null,y+=w,g++}c[b.codePoint]&&(f=x)}var A=v[v.length-1],T=A.x+e[A.codePoint].advance;m=Math.max(m,T);var M=(g+1)*r;a(v,e,d,v.length-1,u),s(v,u,i,o,m,r,g,h),t.top+=-o*M,t.bottom=t.top+M,t.left+=-i*m,t.right=t.left+m}function a(t,e,r,n,i){for(var o=e[t[n].codePoint].advance,a=(t[n].x+o)*i,s=r;s<=n;s++)t[s].x-=a}function s(t,e,r,n,i,o,a,s){for(var u=(e-r)*i+s[0],h=(-n*(a+1)+.5)*o+s[1],p=0;p<t.length;p++)t[p].x+=u,t[p].y+=h}function u(t,e){if(!t||!t.rect)return null;var r=e["icon-offset"][0],n=e["icon-offset"][1],i=r-t.width/2,o=i+t.width,a=n-t.height/2,s=a+t.height;return new h(t,a,s,i,o)}function h(t,e,r,n,i){this.image=t,this.top=e,this.bottom=r,this.left=n,this.right=i}t.exports={shapeText:i,shapeIcon:u};var p=10,l={32:!0,8203:!0},c={32:!0,38:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0};l[p]=c[p]=!0},function(t,exports,e){"use strict";function r(t,e){return e.max-t.max}function n(t,e,r,n){this.p=new s(t,e),this.h=r,this.d=i(this.p,n),this.max=this.d+this.h*Math.SQRT2}function i(t,e){for(var r=!1,n=1/0,i=0;i<e.length;i++)for(var o=e[i],a=0,s=o.length,h=s-1;a<s;h=a++){var p=o[a],l=o[h];p.y>t.y!=l.y>t.y&&t.x<(l.x-p.x)*(t.y-p.y)/(l.y-p.y)+p.x&&(r=!r),n=Math.min(n,u(t,p,l))}return(r?1:-1)*Math.sqrt(n)}function o(t){for(var e=0,r=0,i=0,o=t[0],a=0,s=o.length,u=s-1;a<s;u=a++){var h=o[a],p=o[u],l=h.x*p.y-p.x*h.y;r+=(h.x+p.x)*l,i+=(h.y+p.y)*l,e+=3*l}return new n(r/e,i/e,0,t)}var a=e(71),s=e(1),u=e(56).distToSegmentSquared;t.exports=function(t,e,i){e=e||1;for(var s,u,h,p,l=t[0],c=0;c<l.length;c++){var f=l[c];(!c||f.x<s)&&(s=f.x),(!c||f.y<u)&&(u=f.y),(!c||f.x>h)&&(h=f.x),(!c||f.y>p)&&(p=f.y)}for(var y=h-s,d=p-u,g=Math.min(y,d),m=g/2,v=new a(null,r),x=s;x<h;x+=g)for(var b=u;b<p;b+=g)v.push(new n(x+m,b+m,m,t));for(var w=o(t),_=v.length;v.length;){var P=v.pop();P.d>w.d&&(w=P),P.max-w.d<=e||(m=P.h/2,v.push(new n(P.p.x-m,P.p.y-m,m,t)),v.push(new n(P.p.x+m,P.p.y-m,m,t)),v.push(new n(P.p.x-m,P.p.y+m,m,t)),v.push(new n(P.p.x+m,P.p.y+m,m,t)),_+=4)}return w.p}},function(t,exports,e){"use strict";function r(t,e,r){for(var n=0;n<t.length;n++)for(var i=t[n],o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var h=a[s];if(l(i,h))return!0;if(u(h,i,r))return!0}return!1}function n(t,e){if(1===t.length&&1===t[0].length)return p(e,t[0][0]);for(var r=0;r<e.length;r++)for(var n=e[r],i=0;i<n.length;i++)if(p(t,n[i]))return!0;for(var o=0;o<t.length;o++){for(var s=t[o],u=0;u<s.length;u++)if(p(e,s[u]))return!0;for(var h=0;h<e.length;h++)if(a(s,e[h]))return!0}return!1}function i(t,e,r){for(var n=0;n<e.length;n++)for(var i=e[n],a=0;a<t.length;a++){var s=t[a];if(s.length>=3)for(var u=0;u<i.length;u++)if(l(s,i[u]))return!0;if(o(s,i,r))return!0}return!1}function o(t,e,r){if(t.length>1){if(a(t,e))return!0;for(var n=0;n<e.length;n++)if(u(e[n],t,r))return!0}for(var i=0;i<t.length;i++)if(u(t[i],e,r))return!0;return!1}function a(t,e){for(var r=0;r<t.length-1;r++)for(var n=t[r],i=t[r+1],o=0;o<e.length-1;o++){var a=e[o],u=e[o+1];if(s(n,i,a,u))return!0}return!1}function s(t,e,r,n){return c(t,r,n)!==c(e,r,n)&&c(t,e,r)!==c(t,e,n)}function u(t,e,r){var n=r*r;if(1===e.length)return t.distSqr(e[0])<n;for(var i=1;i<e.length;i++){var o=e[i-1],a=e[i];if(h(t,o,a)<n)return!0}return!1}function h(t,e,r){var n=e.distSqr(r);if(0===n)return t.distSqr(e);var i=((t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y))/n;return i<0?t.distSqr(e):i>1?t.distSqr(r):t.distSqr(r.sub(e)._mult(i)._add(e))}function p(t,e){for(var r,n,i,o=!1,a=0;a<t.length;a++){r=t[a];for(var s=0,u=r.length-1;s<r.length;u=s++)n=r[s],i=r[u],n.y>e.y!=i.y>e.y&&e.x<(i.x-n.x)*(e.y-n.y)/(i.y-n.y)+n.x&&(o=!o)}return o}function l(t,e){for(var r=!1,n=0,i=t.length-1;n<t.length;i=n++){var o=t[n],a=t[i];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(r=!r)}return r}var c=e(0).isCounterClockwise;t.exports={multiPolygonIntersectsBufferedMultiPoint:r,multiPolygonIntersectsMultiPolygon:n,multiPolygonIntersectsBufferedMultiLine:i,distToSegmentSquared:h}},function(t,exports,e){"use strict";function r(t){function e(){l.apply(this,arguments)}function r(){c.apply(this,arguments),this.members=e.prototype.members}var a=JSON.stringify(t);if(d[a])return d[a];void 0===t.alignment&&(t.alignment=1),e.prototype=Object.create(l.prototype);var u=0,g=0,m=["Uint8"];return e.prototype.members=t.members.map(function(r){r={name:r.name,type:r.type,components:r.components||1},f(r.name.length),f(r.type in y),m.indexOf(r.type)<0&&m.push(r.type);var n=o(r.type);g=Math.max(g,n),r.offset=u=i(u,Math.max(t.alignment,n));for(var a=0;a<r.components;a++)Object.defineProperty(e.prototype,r.name+(1===r.components?"":a),{get:h(r,a),set:p(r,a)});return u+=n*r.components,r}),e.prototype.alignment=t.alignment,e.prototype.size=i(u,Math.max(g,t.alignment)),r.serialize=n,r.prototype=Object.create(c.prototype),r.prototype.StructType=e,r.prototype.bytesPerElement=e.prototype.size,r.prototype.emplaceBack=s(e.prototype.members,e.prototype.size),r.prototype._usedTypes=m,d[a]=r,r}function n(){return{members:this.prototype.StructType.prototype.members,alignment:this.prototype.StructType.prototype.alignment,bytesPerElement:this.prototype.bytesPerElement}}function i(t,e){return Math.ceil(t/e)*e}function o(t){return y[t].BYTES_PER_ELEMENT}function a(t){return t.toLowerCase()}function s(t,e){for(var r=[],n=[],i="var i = this.length;\nthis.resize(this.length + 1);\n",s=0;s<t.length;s++){var u=t[s],h=o(u.type);r.indexOf(h)<0&&(r.push(h),i+="var o"+h.toFixed(0)+" = i * "+(e/h).toFixed(0)+";\n");for(var p=0;p<u.components;p++){var l="v"+n.length,c="o"+h.toFixed(0)+" + "+(u.offset/h+p).toFixed(0);i+="this."+a(u.type)+"["+c+"] = "+l+";\n",n.push(l)}}return i+="return i;",new Function(n,i)}function u(t,e){var r="this._pos"+o(t.type).toFixed(0),n=(t.offset/o(t.type)+e).toFixed(0),i=r+" + "+n;return"this._structArray."+a(t.type)+"["+i+"]"}function h(t,e){return new Function([],"return "+u(t,e)+";")}function p(t,e){return new Function(["x"],u(t,e)+" = x;")}function l(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}function c(t){void 0!==t?(this.arrayBuffer=t.arrayBuffer,this.length=t.length,this.capacity=this.arrayBuffer.byteLength/this.bytesPerElement,this._refreshViews()):(this.capacity=-1,this.resize(0))}var f=e(4);t.exports=r;var y={Int8:Int8Array,Uint8:Uint8Array,Uint8Clamped:Uint8ClampedArray,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array,Float64:Float64Array},d={};c.prototype.DEFAULT_CAPACITY=128,c.prototype.RESIZE_MULTIPLIER=5,c.prototype.serialize=function(){return this.trim(),{length:this.length,arrayBuffer:this.arrayBuffer}},c.prototype.get=function(t){return new this.StructType(this,t)},c.prototype.trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},c.prototype.resize=function(t){if(this.length=t,t>this.capacity){this.capacity=Math.max(t,Math.floor(this.capacity*this.RESIZE_MULTIPLIER),this.DEFAULT_CAPACITY),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},c.prototype._refreshViews=function(){for(var t=0;t<this._usedTypes.length;t++){var e=this._usedTypes[t];this[a(e)]=new y[e](this.arrayBuffer)}},c.prototype.toArray=function(t,e){for(var r=[],n=t;n<e;n++){var i=this.get(n);r.push(i)}return r}},function(t,exports){t.exports=u},function(t,exports){t.exports=h},function(t,exports){t.exports=p},function(t,exports){t.exports=l},function(t,exports){t.exports=c},function(t,exports){t.exports=f},function(t,exports){t.exports=y},function(t,exports){t.exports=d},function(t,exports){t.exports=g},function(t,exports){t.exports=m},function(t,exports){t.exports=v},function(t,exports){t.exports=x},function(t,exports){t.exports=b},function(t,exports){t.exports=w},function(t,exports){t.exports=_},function(t,exports){t.exports=P},function(t,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=e(22),n=e(23),i=e(24);t.exports=r.a,t.exports.fitBounds=i.a,Object.assign(t.exports,n)}])});